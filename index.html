<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAGZS - Your Universal Content Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #6C63FF;
            --primary-dark: #5a52d5;
            --primary-light: #e0deff;
            --secondary-color: #4CAF50;
            --accent-color: #FF6B6B;
            --background-color: #F8F9FA;
            --text-color: #2C3E50;
            --text-light: #6c757d;
            --card-shadow: 0 4px 12px rgba(0,0,0,0.08);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            --border-radius: 12px;
            --sidebar-width: 280px;
            --primary-gradient: linear-gradient(135deg, var(--primary-color) 0%, #8A7FFF 100%);
            --secondary-gradient: linear-gradient(135deg, var(--secondary-color) 0%, #69DC9E 100%);
            --accent-gradient: linear-gradient(135deg, var(--accent-color) 0%, #FF9B9B 100%);
            --glass-effect: backdrop-filter: blur(10px);
            --animation-timing: cubic-bezier(0.4, 0, 0.2, 1);
            --hover-transform: transform 0.2s var(--animation-timing);
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.2);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --card-hover-transform: translateY(-5px) scale(1.02);
            --smooth-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.1);
            --gradient-primary: linear-gradient(135deg, var(--primary-color) 0%, #8A7FFF 100%);
            --gradient-secondary: linear-gradient(135deg, var(--secondary-color) 0%, #69DC9E 100%);
            --gradient-accent: linear-gradient(135deg, var(--accent-color) 0%, #FF9B9B 100%);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        /* Improved Hero Section */
        .hero {
            position: relative;
            background: var(--gradient-primary);
            padding: 120px 0 100px;
            overflow: hidden;
        }

        .hero-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .hero .container {
            position: relative;
            z-index: 2;
        }

        .hero-title {
            font-size: 4rem;
            font-weight: 800;
            line-height: 1.2;
            margin-bottom: 1.5rem;
            animation: fadeInUp 0.6s ease;
        }

        .gradient-text {
            background: linear-gradient(45deg, #fff, #e0deff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 2rem;
            animation: fadeInUp 0.6s ease 0.2s both;
        }

        .hero-buttons {
            animation: fadeInUp 0.6s ease 0.4s both;
        }

        .hero-features {
            display: flex;
            gap: 1rem;
            animation: fadeInUp 0.6s ease 0.6s both;
        }

        .feature-tag {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .feature-tag i {
            font-size: 1rem;
        }

        .hero-image {
            position: relative;
            height: 400px;
            animation: fadeIn 1s ease;
        }

        .floating-card {
            position: absolute;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--glass-shadow);
            display: flex;
            align-items: center;
            gap: 1rem;
            font-weight: 500;
        }

        .floating-card i {
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .card-1 {
            top: 20%;
            left: 10%;
            animation: float 6s ease-in-out infinite;
        }

        .card-2 {
            top: 40%;
            right: 5%;
            animation: float 6s ease-in-out infinite 1s;
        }

        .card-3 {
            bottom: 15%;
            left: 20%;
            animation: float 6s ease-in-out infinite 2s;
        }

        .hero-shape {
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            line-height: 0;
        }

        /* Enhanced Animations */
        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-20px);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .pulse-animation {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(255, 255, 255, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
            }
        }

        .glow-animation {
            animation: glow 3s infinite;
        }

        @keyframes glow {
            0%, 100% {
                box-shadow: 0 0 5px rgba(255, 255, 255, 0.2);
            }
            50% {
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
            }
        }

        /* Enhanced Responsive Styles */
        @media (max-width: 992px) {
            .hero-title {
                font-size: 3rem;
            }

            .floating-card {
                padding: 1rem;
                font-size: 0.9rem;
            }

            .floating-card i {
                font-size: 1.2rem;
            }
        }

        @media (max-width: 768px) {
            .hero {
                padding: 80px 0 60px;
            }

            .hero-title {
                font-size: 2.5rem;
            }

            .hero-subtitle {
                font-size: 1.1rem;
            }

            .hero-features {
                flex-wrap: wrap;
            }

            .feature-tag {
                font-size: 0.8rem;
            }
        }

        /* Features Section */
        .section-title {
            font-weight: 700;
            margin-bottom: 3rem;
            text-align: center;
            position: relative;
            display: inline-block;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 4px;
            background: var(--primary-color);
            border-radius: 2px;
        }

        .features {
            padding: 6rem 0;
            background: white;
        }

        .feature-card {
            text-align: center;
            padding: 2.5rem 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            height: 100%;
            background: white;
            border: 1px solid rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.1);
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .feature-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            background: rgba(108, 99, 255, 0.1);
            width: 80px;
            height: 80px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .feature-card:hover .feature-icon {
            transform: scale(1.1);
            background: rgba(108, 99, 255, 0.2);
        }

        .feature-card h4 {
            font-weight: 600;
            margin-bottom: 1rem;
        }

        /* Problem/Solution Section */
        .problem-solution {
            padding: 6rem 0;
            background: var(--background-color);
        }

        .solution-card {
            background: white;
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            height: 100%;
            border: 1px solid rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        .solution-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.1);
        }

        .solution-card i {
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            font-size: 2.5rem;
        }

        .solution-card h4 {
            font-weight: 600;
            margin-bottom: 1rem;
        }

        /* Testimonials */
        .testimonials {
            padding: 6rem 0;
            background: white;
        }

        .testimonial-card {
            background: var(--background-color);
            padding: 2rem;
            border-radius: var(--border-radius);
            height: 100%;
            position: relative;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .testimonial-card::before {
            content: '"';
            position: absolute;
            top: 1rem;
            left: 1.5rem;
            font-size: 4rem;
            color: rgba(108, 99, 255, 0.1);
            font-family: Georgia, serif;
            line-height: 1;
        }

        .testimonial-card p {
            position: relative;
            z-index: 1;
            font-style: italic;
            margin-bottom: 1.5rem;
        }

        .testimonial-card h5 {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 0;
        }

        /* Pricing */
        .pricing {
            padding: 6rem 0;
            background: var(--background-color);
        }

        .pricing-card {
            background: white;
            padding: 2.5rem 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            text-align: center;
            transition: var(--transition);
            height: 100%;
            border: 1px solid rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        .pricing-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.1);
        }

        .pricing-card .price {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin: 1.5rem 0;
        }

        .pricing-card ul {
            text-align: left;
            margin: 2rem 0;
            padding-left: 1rem;
        }

        .pricing-card ul li {
            margin-bottom: 0.8rem;
            position: relative;
            padding-left: 1.5rem;
        }

        .pricing-card ul li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--secondary-color);
            font-weight: bold;
        }

        .pricing-card .btn {
            width: 100%;
            padding: 0.8rem;
            font-weight: 600;
            border-radius: 50px;
        }

        .pricing-card.popular {
            border: 2px solid var(--primary-color);
        }

        .pricing-card.popular::after {
            content: 'Most Popular';
            position: absolute;
            top: 20px;
            right: -30px;
            background: var(--primary-color);
            color: white;
            padding: 0.3rem 1.5rem;
            font-size: 0.8rem;
            font-weight: 600;
            transform: rotate(45deg);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            width: 150px;
            text-align: center;
        }

        /* FAQ */
        .faq {
            padding: 6rem 0;
            background: white;
        }

        .faq-item {
            margin-bottom: 1.5rem;
            background: var(--background-color);
            padding: 1.5rem;
            border-radius: 10px;
            transition: var(--transition);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .faq-item:hover {
            box-shadow: var(--card-shadow);
            border-color: var(--primary-light);
        }

        .faq-item h5 {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        /* Footer */
        .footer {
            background: var(--text-color);
            color: white;
            padding: 4rem 0 2rem;
            clip-path: polygon(0 10%, 100% 0, 100% 100%, 0% 100%);
            margin-top: 5rem;
        }

        .footer h5 {
            font-weight: 600;
            margin-bottom: 1.5rem;
            position: relative;
            display: inline-block;
        }

        .footer h5::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 40px;
            height: 3px;
            background: var(--primary-color);
            border-radius: 2px;
        }

        .footer ul li {
            margin-bottom: 0.8rem;
        }

        .footer a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer a:hover {
            color: white;
            padding-left: 5px;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .social-links a {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .social-links a:hover {
            background: var(--primary-color);
            transform: translateY(-3px);
        }

        .copyright {
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            text-align: center;
            color: rgba(255,255,255,0.6);
            font-size: 0.9rem;
        }

        /* Dashboard Styles */
        .dashboard {
            display: none;
            min-height: 100vh;
        }

        .navbar {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .navbar-brand {
            font-size: 1.5rem;
            font-weight: 700;
            color: white !important;
            display: flex;
            align-items: center;
        }

        .navbar-brand i {
            margin-right: 0.5rem;
        }

        .navbar-nav .nav-link {
            color: rgba(255,255,255,0.9);
            font-weight: 500;
            padding: 0.5rem 1rem;
            transition: var(--transition);
            position: relative;
        }

        .navbar-nav .nav-link:hover {
            color: white;
            transform: translateY(-2px);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--primary-gradient);
            transform: translateX(-50%);
            transition: width 0.3s var(--animation-timing);
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .badge-notification {
            position: absolute;
            top: -5px;
            right: -5px;
            font-size: 0.6rem;
            padding: 0.25rem 0.4rem;
        }

        .sidebar {
            background: white;
            padding: 1.5rem;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
            height: calc(100vh - 60px);
            position: sticky;
            top: 60px;
            box-shadow: 2px 0 10px rgba(0,0,0,0.05);
            border-right: 1px solid rgba(0,0,0,0.05);
            overflow-y: auto;
            width: var(--sidebar-width);
        }

        .sidebar .nav-link {
            padding: 0.8rem 1rem;
            border-radius: 10px;
            margin-bottom: 0.5rem;
            transition: var(--transition);
            color: var(--text-color);
            font-weight: 500;
            display: flex;
            align-items: center;
        }

        .sidebar .nav-link:hover {
            background: rgba(108, 99, 255, 0.1);
            color: var(--primary-color);
        }

        .sidebar .nav-link.active {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 4px 12px rgba(108, 99, 255, 0.2);
        }

        .sidebar .nav-link i {
            width: 24px;
            text-align: center;
            margin-right: 0.75rem;
            font-size: 1.1rem;
        }

        .search-bar {
            position: relative;
            margin-bottom: 2rem;
        }

        .search-bar input {
            width: 100%;
            padding: 0.8rem 0.8rem 0.8rem 2.8rem;
            border-radius: 50px;
            border: 2px solid rgba(0,0,0,0.1);
            transition: var(--transition);
            font-size: 0.95rem;
        }

        .search-bar input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.1);
            outline: none;
        }

        .search-bar i {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
        }

        .main-content {
            padding: 2rem;
            background: var(--background-color);
            min-height: calc(100vh - 60px);
            flex: 1;
        }

        /* Dashboard Overview */
        .dashboard-overview {
            background: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        .dashboard-overview::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .overview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .overview-header h3 {
            font-weight: 600;
            margin-bottom: 0;
        }

        .overview-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .stat-card h4 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .stat-card p {
            color: var(--text-light);
            margin: 0;
            font-size: 0.9rem;
        }

        /* Category Tabs */
        .category-tabs {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
            scrollbar-width: none;
        }

        .category-tabs::-webkit-scrollbar {
            display: none;
        }

        .category-tab {
            padding: 0.6rem 1.2rem;
            border-radius: 50px;
            background: #f8f9fa;
            border: 1px solid rgba(0,0,0,0.1);
            cursor: pointer;
            white-space: nowrap;
            transition: var(--transition);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .category-tab:hover {
            background: rgba(108, 99, 255, 0.1);
            color: var(--primary-color);
        }

        .category-tab.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            box-shadow: 0 4px 12px rgba(108, 99, 255, 0.2);
        }

        /* Content Grid */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .content-card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid rgba(0,0,0,0.05);
            position: relative;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s var(--animation-timing);
            transform-origin: center;
        }

        .content-card:hover {
            transform: var(--card-hover-transform);
            box-shadow: var(--smooth-shadow);
        }

        .content-card img {
            width: 100%;
            height: 160px;
            object-fit: cover;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .content-card .card-body {
            padding: 1.5rem;
        }

        .content-card .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .content-card .card-text {
            color: var(--text-light);
            font-size: 0.85rem;
            margin-bottom: 1rem;
        }

        .content-card .tag-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .content-card .tag {
            background: var(--primary-gradient);
            border: none;
            transition: all 0.3s var(--animation-timing);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .content-card .tag:hover {
            transform: translateY(-2px) scale(1.05);
        }

        .content-card .content-actions {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            gap: 0.5rem;
            opacity: 0;
            transition: var(--transition);
        }

        .content-card:hover .content-actions {
            opacity: 1;
        }

        .content-actions button {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: var(--transition);
            color: #666;
        }

        .content-actions button:hover {
            background: var(--primary-color);
            color: white;
            transform: scale(1.1);
        }

        /* Content Type Badges */
        .content-type-badge {
            position: absolute;
            top: 1rem;
            left: 1rem;
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            background: rgba(0,0,0,0.7);
            color: white;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .content-type-video { background: #FF6B6B; }
        .content-type-article { background: #4CAF50; }
        .content-type-podcast { background: #6C63FF; }
        .content-type-music { background: #FFB74D; }
        .content-type-document { background: #78909C; }

        /* Content Preview */
        .content-preview {
            margin-top: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            font-size: 0.85rem;
            line-height: 1.5;
        }

        .content-preview img {
            max-width: 100%;
            border-radius: 5px;
            margin-top: 0.5rem;
        }

        /* Notes Section */
        .notes-section {
            margin-top: 1rem;
        }

        .notes-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
            transition: var(--transition);
        }

        .notes-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.1);
        }

        .notes-list {
            max-height: 150px;
            overflow-y: auto;
            font-size: 0.85rem;
        }

        .note-item {
            padding: 0.75rem;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            transition: var(--transition);
        }

        .note-item:hover {
            background: rgba(108, 99, 255, 0.05);
        }

        .note-item:last-child {
            border-bottom: none;
        }

        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 600px;
            background: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: modalFadeIn 0.3s ease;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, -40%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .modal-header h3 {
            font-weight: 600;
            margin-bottom: 0;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--primary-color);
            transform: rotate(90deg);
        }

        .modal-body {
            margin-bottom: 1.5rem;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(0,0,0,0.1);
        }

        /* Login Modal */
        .login-modal .modal-container {
            max-width: 450px;
        }

        .login-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .login-header img {
            width: 80px;
            margin-bottom: 1rem;
        }

        .login-header h2 {
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .login-header p {
            color: var(--text-light);
            margin-bottom: 0;
        }

        .social-login {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .social-login button {
            flex: 1;
            padding: 0.8rem;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .social-login button:hover {
            background: #f8f9fa;
            border-color: rgba(0,0,0,0.2);
        }

        .divider {
            text-align: center;
            margin: 1.5rem 0;
            position: relative;
            color: #999;
            font-size: 0.9rem;
        }

        .divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: rgba(0,0,0,0.1);
        }

        .divider span {
            background: white;
            padding: 0 1rem;
            position: relative;
            z-index: 1;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            transition: var(--transition);
            font-size: 0.95rem;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s var(--animation-timing);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.1);
            transform: translateY(-2px);
        }

        .form-check {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .form-check-input {
            margin-right: 0.5rem;
        }

        .form-check-label {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .auth-footer {
            text-align: center;
            margin-top: 1.5rem;
            font-size: 0.9rem;
        }

        .auth-footer a {
            color: var(--primary-color);
            font-weight: 500;
            text-decoration: none;
        }

        /* Content Tagging Modal */
        .tagging-modal .modal-container {
            max-width: 700px;
        }

        .tag-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .tag-suggestion {
            background: rgba(108, 99, 255, 0.1);
            color: var(--primary-color);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .tag-suggestion:hover {
            background: rgba(108, 99, 255, 0.2);
        }

        .tag-suggestion.selected {
            background: var(--primary-color);
            color: white;
        }

        .highlight-section {
            margin: 1.5rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .highlight-section label {
            font-weight: 500;
            margin-bottom: 0.5rem;
            display: block;
        }

        .highlight-text {
            padding: 1rem;
            background: white;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            line-height: 1.5;
            border: 1px solid rgba(0,0,0,0.05);
        }

        /* Content Viewer Modal */
        .content-viewer .modal-container {
            max-width: 800px;
        }

        .content-viewer-body {
            line-height: 1.6;
        }

        .content-viewer-body img {
            max-width: 100%;
            border-radius: 8px;
            margin: 1rem 0;
        }

        /* Flashcard Modal */
        .flashcard-modal .modal-container {
            max-width: 600px;
        }

        .flashcard {
            background: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--card-shadow);
            text-align: center;
            perspective: 1000px;
            transform-style: preserve-3d;
        }

        .flashcard-front, .flashcard-back {
            padding: 2rem;
            border-radius: 12px;
            background: #f8f9fa;
            margin-bottom: 1.5rem;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 1.2rem;
            line-height: 1.6;
            border: 1px solid rgba(0,0,0,0.05);
            backface-visibility: hidden;
            transition: transform 0.6s var(--animation-timing);
        }

        .flashcard-back {
            display: none;
            background: var(--primary-color);
            color: white;
        }

        .flashcard.flipped .flashcard-front {
            transform: rotateY(180deg);
        }

        .flashcard.flipped .flashcard-back {
            transform: rotateY(0);
        }

        .flashcard-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
        }

        .flashcard-controls button {
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            font-weight: 500;
        }

        /* Tag Manager Modal */
        .tag-manager .modal-container {
            max-width: 500px;
        }

        .tag-list {
            max-height: 300px;
            overflow-y: auto;
            margin: 1rem 0;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
        }

        .tag-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem 1rem;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            transition: var(--transition);
        }

        .tag-item:hover {
            background: #f8f9fa;
        }

        .tag-item:last-child {
            border-bottom: none;
        }

        .tag-name {
            font-weight: 500;
            color: var(--primary-color);
        }

        .tag-actions button {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            transition: var(--transition);
            padding: 0.3rem;
        }

        .tag-actions button:hover {
            color: var(--accent-color);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 3000;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast i {
            font-size: 1.2rem;
        }

        /* Responsive Adjustments */
        @media (max-width: 992px) {
            .hero h1 {
                font-size: 2.8rem;
            }
            
            .sidebar {
                height: auto;
                position: static;
                border-radius: 0;
                border-right: none;
                border-bottom: 1px solid rgba(0,0,0,0.05);
                width: 100%;
            }
            
            .main-content {
                min-height: auto;
            }
        }

        @media (max-width: 768px) {
            .hero {
                padding: 6rem 0 4rem;
                clip-path: polygon(0 0, 100% 0, 100% 95%, 0 100%);
                margin-bottom: -3rem;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .hero-buttons .btn {
                width: 100%;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
            
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-container {
                width: 95%;
                padding: 1.5rem;
            }

            .pricing-card.popular::after {
                right: -25px;
                width: 120px;
            }
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeInScale 0.5s var(--animation-timing);
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .slide-up {
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Utility Classes */
        .text-primary {
            color: var(--primary-color) !important;
        }

        .bg-primary {
            background-color: var(--primary-color) !important;
        }

        .shadow-sm {
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .shadow-md {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .shadow-lg {
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
        }

        .rounded-lg {
            border-radius: 12px;
        }

        .rounded-xl {
            border-radius: 16px;
        }

        .transition {
            transition: var(--transition);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-gradient);
        }

        /* NEW: Dark Mode Toggle */
        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: var(--transition);
        }

        .dark-mode-toggle:hover {
            transform: scale(1.1);
        }

        /* NEW: Dark Mode Styles */
        body.dark-mode {
            --background-color: #1a1a2e;
            --text-color: #f8f9fa;
            --text-light: #adb5bd;
            --card-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        body.dark-mode .sidebar,
        body.dark-mode .feature-card,
        body.dark-mode .solution-card,
        body.dark-mode .testimonial-card,
        body.dark-mode .pricing-card,
        body.dark-mode .faq-item,
        body.dark-mode .stat-card,
        body.dark-mode .content-card,
        body.dark-mode .dashboard-overview,
        body.dark-mode .modal-container {
            background: #16213e;
            color: var(--text-color);
            border-color: rgba(255,255,255,0.1);
        }

        body.dark-mode .search-bar input,
        body.dark-mode .form-control,
        body.dark-mode .notes-input,
        body.dark-mode .highlight-text,
        body.dark-mode .tag-list {
            background: #0f3460;
            color: var(--text-color);
            border-color: rgba(255,255,255,0.1);
        }

        body.dark-mode .footer {
            background: #0f3460;
        }

        body.dark-mode .category-tab {
            background: #0f3460;
            border-color: rgba(255,255,255,0.1);
        }

        body.dark-mode .content-preview,
        body.dark-mode .highlight-section {
            background: #0f3460;
        }

        /* NEW: Content Rating */
        .content-rating {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .rating-star {
            color: #ddd;
            cursor: pointer;
            transition: var(--transition);
        }

        .rating-star:hover,
        .rating-star.active {
            color: #FFD700;
        }

        /* NEW: Content Timeline */
        .timeline {
            position: relative;
            margin: 2rem 0;
            padding-left: 1.5rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 7px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--primary-color);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 1.5rem;
            padding-left: 1.5rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -7px;
            top: 5px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--primary-color);
        }

        .timeline-date {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .timeline-content {
            margin-top: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(108, 99, 255, 0.1);
            border-radius: 8px;
        }

        /* NEW: Content Analytics */
        .analytics-chart {
            width: 100%;
            height: 200px;
            background: rgba(108, 99, 255, 0.1);
            border-radius: 8px;
            margin: 1rem 0;
            position: relative;
            overflow: hidden;
        }

        .chart-bar {
            position: absolute;
            bottom: 0;
            width: 30px;
            background: var(--primary-color);
            transition: all 0.5s ease;
        }

        /* NEW: AI Suggestions */
        .ai-suggestions {
            margin: 1.5rem 0;
            padding: 1rem;
            background: rgba(108, 99, 255, 0.1);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }

        .ai-suggestions h5 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        /* NEW: Content Collections */
        .collections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .collection-card {
            padding: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .collection-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        /* NEW: Content Import Options */
        .import-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .import-option {
            padding: 1rem;
            text-align: center;
            border-radius: 8px;
            background: white;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            cursor: pointer;
        }

        .import-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .import-option i {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        /* NEW: Content Export Options */
        .export-options {
            display: flex;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .export-btn {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            background: white;
            border: 1px solid rgba(0,0,0,0.1);
            transition: var(--transition);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .export-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        /* NEW: Content Sharing */
        .share-options {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .share-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: white;
            border: 1px solid rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            cursor: pointer;
        }

        .share-btn:hover {
            transform: scale(1.1);
        }

        /* NEW: Content Reminders */
        .reminder-item {
            padding: 1rem;
            margin-bottom: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            border-left: 4px solid var(--primary-color);
        }

        .reminder-date {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        /* NEW: Content AI Summary */
        .ai-summary {
            padding: 1rem;
            background: rgba(108, 99, 255, 0.1);
            border-radius: 8px;
            margin: 1rem 0;
        }

        /* NEW: Content Version History */
        .version-history {
            margin: 1rem 0;
        }

        .version-item {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .version-date {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        /* NEW: Content Related Items */
        .related-items {
            margin: 1.5rem 0;
        }

        .related-item {
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            background: rgba(108, 99, 255, 0.1);
            border-radius: 4px;
        }

        /* NEW: Content Quick Actions */
        .quick-actions {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .quick-action-btn {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            background: white;
            border: 1px solid rgba(0,0,0,0.1);
            font-size: 0.8rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .quick-action-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        /* NEW: Content AI Tags */
        .ai-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .ai-tag {
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            background: rgba(76, 175, 80, 0.1);
            color: var(--secondary-color);
            font-size: 0.8rem;
        }

        /* NEW: Content Priority */
        .priority-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .priority-high {
            background: rgba(255, 107, 107, 0.1);
            color: var(--accent-color);
        }

        .priority-medium {
            background: rgba(255, 183, 77, 0.1);
            color: #FFB74D;
        }

        .priority-low {
            background: rgba(108, 99, 255, 0.1);
            color: var(--primary-color);
        }

        /* NEW: Content Status */
        .status-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-new {
            background: rgba(108, 99, 255, 0.1);
            color: var(--primary-color);
        }

        .status-in-progress {
            background: rgba(255, 183, 77, 0.1);
            color: #FFB74D;
        }

        .status-completed {
            background: rgba(76, 175, 80, 0.1);
            color: var(--secondary-color);
        }

        /* NEW: Content Progress */
        .progress-container {
            margin: 1rem 0;
        }

        .progress-bar-container {
            height: 8px;
            background: rgba(0,0,0,0.05);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .progress-bar-fill {
            height: 100%;
            background: var(--primary-color);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* NEW: Content Due Date */
        .due-date {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            background: rgba(108, 99, 255, 0.1);
            color: var(--primary-color);
            font-size: 0.8rem;
        }

        /* NEW: Content Collaborators */
        .collaborators {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .collaborator {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        /* NEW: Content Attachments */
        .attachments {
            margin: 1rem 0;
        }

        .attachment-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            background: rgba(0,0,0,0.05);
            border-radius: 4px;
        }

        .attachment-icon {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* NEW: Content Comments */
        .comments-section {
            margin: 1.5rem 0;
        }

        .comment-item {
            padding: 1rem;
            margin-bottom: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }

        .comment-author {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .comment-date {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        /* Content Calendar Styles */
        .content-calendar-section {
            background: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .calendar-day {
            aspect-ratio: 1;
            padding: 0.5rem;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .calendar-day:hover {
            background: var(--background-color);
            transform: translateY(-2px);
            box-shadow: var(--card-shadow);
        }

        .calendar-day.has-content {
            background: rgba(108, 99, 255, 0.1);
        }

        .calendar-day.today {
            border-color: var(--primary-color);
            font-weight: bold;
        }

        .calendar-day .date {
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .calendar-day .tag-dots {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
        }

        .tag-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--primary-color);
        }

        .tag-matrix {
            background: var(--background-color);
            padding: 1rem;
            border-radius: var(--border-radius);
        }

        .matrix-row {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .matrix-tag {
            width: 150px;
            font-weight: 500;
        }

        .matrix-days {
            display: flex;
            gap: 0.25rem;
            flex: 1;
        }

        .matrix-day {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            background: rgba(0,0,0,0.1);
            cursor: pointer;
            transition: var(--transition);
        }

        .matrix-day.planned {
            background: var(--primary-color);
        }

        .matrix-day:hover {
            transform: scale(1.2);
        }

        /* Plan Content Modal Styles */
        .plan-content-modal .modal-container {
            max-width: 600px;
        }

        .tag-selection {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .selectable-tag {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            background: var(--background-color);
            cursor: pointer;
            transition: var(--transition);
        }

        .selectable-tag.selected {
            background: var(--primary-color);
            color: white;
        }

        .date-range-selection {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
        }

        .schedule-pattern {
            margin: 1rem 0;
        }

        .pattern-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0.5rem 0;
        }

        /* NEW: Content AI Assistant */
        .ai-assistant {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: var(--transition);
        }

        .ai-assistant:hover {
            transform: scale(1.1);
        }

        .ai-assistant-chat {
            position: fixed;
            bottom: 90px;
            left: 20px;
            width: 300px;
            max-height: 400px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            overflow: hidden;
            display: none;
            flex-direction: column;
            z-index: 1000;
        }

        .ai-assistant-chat.active {
            display: flex;
        }

        .ai-chat-header {
            padding: 1rem;
            background: var(--primary-color);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ai-chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
        }

        .ai-chat-input {
            padding: 1rem;
            border-top: 1px solid rgba(0,0,0,0.1);
        }

        .ai-chat-input input {
            width: 100%;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            border: 1px solid rgba(0,0,0,0.1);
        }

        /* NEW: Content AI Generated Tags */
        .ai-generated-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .ai-generated-tag {
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            background: rgba(108, 99, 255, 0.1);
            color: var(--primary-color);
            font-size: 0.8rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .ai-generated-tag:hover {
            background: var(--primary-color);
            color: white;
        }

        /* NEW: Content AI Summary */
        .ai-summary-card {
            padding: 1rem;
            margin: 1rem 0;
            background: rgba(108, 99, 255, 0.1);
            border-radius: 8px;
        }

        /* NEW: Content AI Recommendations */
        .ai-recommendations {
            margin: 1.5rem 0;
        }

        .ai-recommendation {
            padding: 1rem;
            margin-bottom: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            border-left: 4px solid var(--primary-color);
        }

        /* NEW: Content AI Insights */
        .ai-insights {
            margin: 1.5rem 0;
        }

        .ai-insight {
            padding: 1rem;
            margin-bottom: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            border-left: 4px solid var(--accent-color);
        }

        /* NEW: Content AI Actions */
        .ai-actions {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .ai-action-btn {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            background: white;
            border: 1px solid rgba(0,0,0,0.1);
            font-size: 0.8rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .ai-action-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        /* NEW: Content AI Processing */
        .ai-processing {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            background: rgba(108, 99, 255, 0.1);
            border-radius: 8px;
            margin: 1rem 0;
        }

        .ai-processing-spinner {
            width: 20px;
            height: 20px;
            border: 3px solid rgba(108, 99, 255, 0.2);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* NEW: Content AI Results */
        .ai-results {
            margin: 1.5rem 0;
        }

        .ai-result-item {
            padding: 1rem;
            margin-bottom: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }

        /* NEW: Content AI Feedback */
        .ai-feedback {
            margin: 1.5rem 0;
        }

        .ai-feedback-item {
            padding: 1rem;
            margin-bottom: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }

        /* NEW: Content AI Settings */
        .ai-settings {
            margin: 1.5rem 0;
        }

        .ai-setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            margin-bottom: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }

        /* NEW: Content AI History */
        .ai-history {
            margin: 1.5rem 0;
        }

        .ai-history-item {
            padding: 1rem;
            margin-bottom: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }

        /* NEW: Content AI Models */
        .ai-models {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .ai-model {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            background: white;
            border: 1px solid rgba(0,0,0,0.1);
            font-size: 0.8rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .ai-model.active {
            background: var(--primary-color);
            color: white;
        }

        /* NEW: Content AI Parameters */
        .ai-parameters {
            margin: 1.5rem 0;
        }

        .ai-parameter {
            margin-bottom: 1rem;
        }

        .ai-parameter label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .ai-parameter input {
            width: 100%;
            padding: 0.5rem;
            border-radius: 4px;
            border: 1px solid rgba(0,0,0,0.1);
        }

        /* NEW: Content AI Output */
        .ai-output {
            padding: 1rem;
            margin: 1rem 0;
            background: white;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }

        /* NEW: Content AI Controls */
        .ai-controls {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .ai-control-btn {
            padding: 0.5rem 1rem;
            border-radius: 4px;
            background: white;
            border: 1px solid rgba(0,0,0,0.1);
            transition: var(--transition);
            cursor: pointer;
        }

        .ai-control-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        /* NEW: Content AI Status */
        .ai-status {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            background: rgba(108, 99, 255, 0.1);
            color: var(--primary-color);
            font-size: 0.8rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .ai-status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--primary-color);
        }

        /* NEW: Content AI Progress */
        .ai-progress {
            width: 100%;
            height: 4px;
            background: rgba(108, 99, 255, 0.1);
            border-radius: 2px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .ai-progress-bar {
            height: 100%;
            background: var(--primary-color);
            border-radius: 2px;
            transition: width 0.5s ease;
        }

        /* NEW: Content AI Error */
        .ai-error {
            padding: 1rem;
            margin: 1rem 0;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 8px;
            color: var(--accent-color);
        }

        /* NEW: Content AI Success */
        .ai-success {
            padding: 1rem;
            margin: 1rem 0;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 8px;
            color: var(--secondary-color);
        }

        /* NEW: Content AI Warning */
        .ai-warning {
            padding: 1rem;
            margin: 1rem 0;
            background: rgba(255, 183, 77, 0.1);
            border-radius: 8px;
            color: #FFB74D;
        }

        /* NEW: Content AI Info */
        .ai-info {
            padding: 1rem;
            margin: 1rem 0;
            background: rgba(108, 99, 255, 0.1);
            border-radius: 8px;
            color: var(--primary-color);
        }

        /* NEW: Content AI Debug */
        .ai-debug {
            padding: 1rem;
            margin: 1rem 0;
            background: rgba(0,0,0,0.05);
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.8rem;
        }

        /* Flashcard Creation Styles */
        .flashcard-creation-modal .modal-container {
            max-width: 800px;
        }

        .flashcard-editor {
            padding: 1rem;
        }

        .formatting-tools {
            display: flex;
            gap: 0.5rem;
            padding: 0.5rem 0;
        }

        .formatting-tools button {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .formatting-tools button:hover {
            background: var(--primary-color);
            color: white;
        }

        .style-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .color-picker {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .color-picker input[type="color"] {
            width: 100%;
            height: 40px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .preview-card {
            position: relative;
            width: 100%;
            height: 200px;
            perspective: 1000px;
            margin: 1rem 0;
        }

        .preview-front,
        .preview-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            transition: transform 0.6s;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            overflow-y: auto;
        }

        .preview-back {
            transform: rotateY(180deg);
        }

        .preview-card.flipped .preview-front {
            transform: rotateY(180deg);
        }

        .preview-card.flipped .preview-back {
            transform: rotateY(0);
        }

        /* Enhanced Flashcard Study Styles */
        .flashcard-study-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .study-progress {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .study-stats {
            display: flex;
            gap: 2rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .deck-selector {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            padding: 0.5rem;
            margin: 1rem 0;
        }

        .deck-item {
            padding: 0.5rem 1rem;
            background: white;
            border-radius: 50px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .deck-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .deck-item.active {
            background: var(--primary-color);
            color: white;
        }

        /* Add these styles to your existing CSS */
        .ai-assistant-chat {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            display: none;
            flex-direction: column;
            z-index: 1000;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid rgba(108, 99, 255, 0.1);
        }

        .ai-assistant-chat.active {
            display: flex;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .ai-chat-header {
            padding: 1rem;
            background: var(--primary-gradient);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .ai-chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            background: #f8f9fa;
        }

        .ai-message {
            max-width: 85%;
            padding: 0.8rem 1rem;
            border-radius: 12px;
            position: relative;
            animation: messageIn 0.3s ease;
        }

        @keyframes messageIn {
            from {
                transform: translateY(10px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .ai-user {
            background: var(--primary-color);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        .ai-response {
            background: white;
            color: var(--text-color);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .ai-error {
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid var(--accent-color);
        }

        .message-content {
            line-height: 1.5;
            margin-bottom: 0.5rem;
        }

        .message-time {
            font-size: 0.75rem;
            color: rgba(0,0,0,0.4);
            margin-top: 0.25rem;
        }

        .suggestion-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .suggestion-chip {
            padding: 0.4rem 0.8rem;
            background: rgba(108, 99, 255, 0.1);
            border: none;
            border-radius: 50px;
            color: var(--primary-color);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .suggestion-chip:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-1px);
        }

        .ai-chat-input {
            padding: 1rem;
            background: white;
            border-top: 1px solid rgba(0,0,0,0.1);
        }

        .ai-chat-input input {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 50px;
            outline: none;
            transition: all 0.2s ease;
        }

        .ai-chat-input input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.1);
        }

        .typing-indicator {
            display: flex;
            gap: 0.3rem;
            padding: 0.5rem;
            align-items: center;
        }

        .typing-indicator span {
            width: 6px;
            height: 6px;
            background: var(--primary-color);
            border-radius: 50%;
            animation: typing 1s infinite;
            opacity: 0.3;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 100% {
                transform: translateY(0);
                opacity: 0.3;
            }
            50% {
                transform: translateY(-4px);
                opacity: 1;
            }
        }

        .ai-assistant {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary-gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(108, 99, 255, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .ai-assistant:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(108, 99, 255, 0.4);
        }

        .ai-assistant i {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .ai-assistant:hover i {
            transform: rotate(10deg);
        }

        /* Reminder System Styles */
        .reminder-modal .modal-container {
            max-width: 500px;
        }

        .reminder-form {
            padding: 1rem;
        }

        .priority-selector {
            display: flex;
            gap: 0.5rem;
        }

        .priority-btn {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .priority-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .priority-btn[data-priority="low"] {
            color: var(--secondary-color);
        }

        .priority-btn[data-priority="medium"] {
            color: #FFB74D;
        }

        .priority-btn[data-priority="high"] {
            color: var(--accent-color);
        }

        .priority-btn[data-priority="low"].active {
            background: var(--secondary-color);
            border-color: var(--secondary-color);
            color: white;
        }

        .priority-btn[data-priority="medium"].active {
            background: #FFB74D;
            border-color: #FFB74D;
            color: white;
        }

        .priority-btn[data-priority="high"].active {
            background: var(--accent-color);
            border-color: var(--accent-color);
            color: white;
        }

        .quick-templates {
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .template-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .template-btn {
            padding: 0.75rem;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .template-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        .template-btn i {
            font-size: 1.2rem;
        }

        .reminders-list-modal .modal-container {
            max-width: 700px;
        }

        .reminders-filters {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .filter-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 50px;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .filter-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .reminders-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-height: 400px;
            overflow-y: auto;
            padding: 0.5rem;
        }

        .reminder-item {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }

        .reminder-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .reminder-info {
            flex: 1;
        }

        .reminder-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .reminder-meta {
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .reminder-actions {
            display: flex;
            gap: 0.5rem;
        }

        .reminder-actions button {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            background: #f8f9fa;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .reminder-actions button:hover {
            background: var(--primary-color);
            color: white;
        }

        .reminder-status {
            padding: 0.25rem 0.5rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .status-upcoming {
            background: rgba(108, 99, 255, 0.1);
            color: var(--primary-color);
        }

        .status-completed {
            background: rgba(76, 175, 80, 0.1);
            color: var(--secondary-color);
        }

        /* Content Expiry Styles */
        .content-expiry-section {
            margin-top: 2rem;
        }

        .expiry-filters {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .expiry-filter {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .expiry-filter.active {
            background: var(--primary-color);
            color: white;
        }

        .expiry-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-height: 400px;
            overflow-y: auto;
            padding: 0.5rem;
        }

        .expiry-item {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }

        .expiry-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .expiry-info {
            flex: 1;
        }

        .expiry-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .expiry-meta {
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .expiry-actions {
            display: flex;
            gap: 0.5rem;
        }

        .expiry-actions button {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            background: #f8f9fa;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .expiry-actions button:hover {
            background: var(--primary-color);
            color: white;
        }

        .expiry-status {
            padding: 0.25rem 0.5rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .status-upcoming {
            background: rgba(108, 99, 255, 0.1);
            color: var(--primary-color);
        }

        .status-overdue {
            background: rgba(255, 107, 107, 0.1);
            color: var(--accent-color);
        }

        .status-completed {
            background: rgba(76, 175, 80, 0.1);
            color: var(--secondary-color);
        }

        /* Content Planning Styles */
        .plan-content-modal .modal-container {
            max-width: 800px;
        }

        .learning-goals select {
            width: 100%;
            padding: 0.5rem;
            border-radius: var(--border-radius);
            border: 1px solid rgba(0,0,0,0.1);
        }

        .difficulty-level .btn-group {
            display: flex;
            gap: 0.5rem;
        }

        .difficulty-level .btn {
            flex: 1;
            border-radius: var(--border-radius);
        }

        .difficulty-level .btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .pattern-details {
            margin-left: 1.5rem;
            margin-top: 0.5rem;
        }

        .weekday-selector {
            display: flex;
            gap: 0.25rem;
            margin-top: 0.5rem;
        }

        .weekday-selector button {
            width: 32px;
            height: 32px;
            padding: 0;
            border-radius: 50%;
        }

        .weekday-selector button.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .additional-options {
            padding: 1rem;
            background: var(--background-color);
            border-radius: var(--border-radius);
        }

        .ai-recommendations {
            padding: 1rem;
            background: rgba(108, 99, 255, 0.1);
            border-radius: var(--border-radius);
            margin-top: 0.5rem;
        }

        .session-card {
            background: white;
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
            box-shadow: var(--card-shadow);
        }

        .session-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .session-duration {
            background: var(--primary-color);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 50px;
            font-size: 0.8rem;
        }

        .session-content {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .content-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            background: var(--background-color);
            border-radius: var(--border-radius);
        }

        .content-type {
            font-size: 0.8rem;
            color: var(--text-light);
            background: rgba(108, 99, 255, 0.1);
            padding: 0.25rem 0.5rem;
            border-radius: 50px;
        }

        .plan-summary {
            background: var(--background-color);
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
        }

        .tag-selection {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 0.5rem;
        }

        .selectable-tag {
            display: flex;
            flex-direction: column;
            padding: 0.75rem;
            border-radius: var(--border-radius);
            background: var(--background-color);
            cursor: pointer;
            transition: var(--transition);
        }

        .selectable-tag.selected {
            background: var(--primary-color);
            color: white;
        }

        .tag-stats {
            font-size: 0.8rem;
            margin-top: 0.25rem;
            opacity: 0.8;
        }

        .pattern-option {
            margin-bottom: 1rem;
            padding: 0.75rem;
            border-radius: var(--border-radius);
            background: var(--background-color);
        }

        .pattern-option:hover {
            background: rgba(108, 99, 255, 0.1);
        }

        .pattern-option label {
            margin-bottom: 0;
            cursor: pointer;
        }

        #customSchedule {
            min-height: 80px;
            margin-top: 0.5rem;
        }

        /* Dark mode support */
        body.dark-mode .session-card,
        body.dark-mode .content-item {
            background: #16213e;
        }

        body.dark-mode .pattern-option,
        body.dark-mode .additional-options {
            background: #0f3460;
        }

        body.dark-mode .selectable-tag {
            background: #16213e;
        }

        body.dark-mode .selectable-tag.selected {
            background: var(--primary-color);
        }

        .status-missed {
            background: rgba(255, 107, 107, 0.1);
            color: var(--accent-color);
        }

        /* Add these styles to your existing CSS section */
        .nav-link .badge-notification {
            position: absolute;
            top: 0;
            right: -5px;
            font-size: 0.7rem;
            padding: 0.25rem 0.5rem;
            border-radius: 50px;
            background: var(--primary-color);
            color: white;
            border: 2px solid white;
            min-width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transform: scale(0.9);
            transition: transform 0.2s ease;
        }

        .nav-link:hover .badge-notification {
            transform: scale(1.1);
        }

        #showRemindersBtn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
        }

        #showRemindersBtn i {
            font-size: 1.1rem;
        }

        /* Enhanced reminder modal styles */
        .reminder-modal {
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .reminder-form .form-group {
            margin-bottom: 1.5rem;
        }

        .reminder-form label {
            font-weight: 500;
            margin-bottom: 0.5rem;
            display: block;
        }

        .reminder-form input[type="date"],
        .reminder-form input[type="time"] {
            padding: 0.5rem;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            width: 100%;
            transition: all 0.2s ease;
        }

        .reminder-form input[type="date"]:focus,
        .reminder-form input[type="time"]:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.1);
            outline: none;
        }

        /* Toast notification for reminders */
        .reminder-toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 9999;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reminder-toast:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.2);
        }

        .reminder-toast i {
            font-size: 1.2rem;
        }

        /* Notes Styles */
        .notes-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .note-item {
            background: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .note-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .note-category {
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            background: rgba(108, 99, 255, 0.1);
            color: var(--primary-color);
            font-size: 0.8rem;
        }

        .note-preview {
            color: var(--text-light);
            margin-bottom: 1rem;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .note-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .note-actions {
            display: flex;
            gap: 0.5rem;
        }

        .note-actions button {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            background: #f8f9fa;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .note-actions button:hover {
            background: var(--primary-color);
            color: white;
        }

        /* Collections Styles */
        .collections-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .collection-item {
            background: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .collection-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        .collection-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .collection-count {
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            background: rgba(76, 175, 80, 0.1);
            color: var(--secondary-color);
            font-size: 0.8rem;
        }

        .collection-description {
            color: var(--text-light);
            margin-bottom: 1rem;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .collection-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .collection-actions {
            display: flex;
            gap: 0.5rem;
        }

        .collection-actions button {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            background: #f8f9fa;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .collection-actions button:hover {
            background: var(--primary-color);
            color: white;
        }

        .collection-items-list {
            max-height: 300px;
            overflow-y: auto;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: var(--border-radius);
            margin-top: 0.5rem;
        }

        .collection-items-list .collection-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            background: white;
        }

        .item-info {
            flex: 1;
        }

        .item-info h5 {
            margin: 0;
            font-size: 0.9rem;
        }

        .item-type {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .empty-state {
            text-align: center;
            padding: 2rem;
            color: var(--text-light);
            font-style: italic;
        }

        /* Dark mode styles for notes and collections */
        body.dark-mode .note-item,
        body.dark-mode .collection-item {
            background: #16213e;
            border-color: rgba(255,255,255,0.1);
        }

        body.dark-mode .note-actions button,
        body.dark-mode .collection-actions button {
            background: #0f3460;
            color: var(--text-light);
        }

        body.dark-mode .collection-items-list {
            background: #0f3460;
        }

        body.dark-mode .collection-items-list .collection-item {
            background: #16213e;
        }

        /* Enhanced Dashboard Styles */
        .dashboard {
            display: none;
            min-height: 100vh;
            background: var(--background-color);
        }

        .navbar {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .navbar-brand {
            font-size: 1.5rem;
            font-weight: 700;
            color: white !important;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
        }

        .navbar-brand:hover {
            transform: translateY(-2px);
        }

        .navbar-brand i {
            font-size: 1.2rem;
            color: var(--primary-light);
        }

        /* Enhanced Sidebar */
        .sidebar {
            background: white;
            height: 100vh;
            position: sticky;
            top: 0;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
            border-right: 1px solid rgba(0,0,0,0.05);
        }

        .nav-link {
            padding: 0.8rem 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 0.5rem;
            transition: var(--transition);
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .nav-link:hover {
            background: var(--primary-light);
            color: var(--primary-color);
            transform: translateX(5px);
        }

        .nav-link.active {
            background: var(--primary-color);
            color: white;
        }

        .nav-link i {
            font-size: 1.1rem;
            width: 20px;
            text-align: center;
        }

        /* Enhanced Dashboard Overview */
        .dashboard-overview {
            background: white;
            padding: 2rem;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        .dashboard-overview::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .overview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .overview-header h3 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-color);
        }

        .overview-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            border: 1px solid rgba(0,0,0,0.05);
            text-align: center;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--smooth-shadow);
        }

        .stat-card h4 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .stat-card p {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .quick-action-btn {
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            background: white;
            border: 1px solid rgba(0,0,0,0.1);
            color: var(--text-color);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .quick-action-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        .quick-action-btn i {
            font-size: 1.1rem;
        }

        /* Statistics Section */
        .statistics-section {
            background: white;
            padding: 3rem 0;
            margin-top: 4rem;
            border-top: 1px solid rgba(0,0,0,0.05);
        }

        .statistics-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .statistics-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .statistics-header h2 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-color);
            margin-bottom: 1rem;
        }

        .statistics-header p {
            color: var(--text-light);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .statistics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .statistic-card {
            background: white;
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            text-align: center;
            transition: var(--transition);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .statistic-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--smooth-shadow);
        }

        .statistic-card i {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .statistic-card h3 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-color);
            margin-bottom: 0.5rem;
        }

        .statistic-card p {
            color: var(--text-light);
            font-size: 1rem;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .overview-header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .statistics-grid {
                grid-template-columns: 1fr;
            }

            .statistic-card {
                padding: 1.5rem;
            }
        }

        .glass-card {
            background: rgba(255,255,255,0.15);
            border-radius: 24px;
            box-shadow: 0 8px 32px 0 rgba(31,38,135,0.18);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255,255,255,0.18);
            margin-top: 2rem;
            margin-bottom: 2rem;
        }

        .floating-shape {
            position: absolute;
            border-radius: 50%;
            opacity: 0.15;
            z-index: 0;
            animation: floatShape 8s ease-in-out infinite;
        }

        .shape1 { width: 120px; height: 120px; background: #6C63FF; top: 10%; left: 5%; }
        .shape2 { width: 80px; height: 80px; background: #FF6B6B; bottom: 15%; right: 10%; animation-delay: 2s; }
        @keyframes floatShape {
            0%, 100% { transform: translateY(0);}
            50% { transform: translateY(-30px);}
        }

        .cta-banner {
            background: var(--primary-gradient);
            color: #fff;
            padding: 3rem 0;
            border-radius: 18px;
            margin: 3rem 0 2rem 0;
            box-shadow: 0 8px 32px rgba(108,99,255,0.10);
        }
        .cta-banner .btn-primary {
            background: #fff;
            color: var(--primary-color);
            border: none;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .cta-banner .btn-primary:hover {
            background: var(--primary-color);
            color: #fff;
        }

        html { scroll-behavior: smooth; }

        h1, h2, h3, h4 { letter-spacing: -1px; }
        .container, .statistics-container { padding-left: 2rem; padding-right: 2rem; }

        /* URL Preview Styles */
        .url-preview-container {
            margin-top: 2rem;
            padding: 1.5rem;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            box-shadow: var(--glass-shadow);
            display: none;
        }

        .url-preview {
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }

        .url-preview-image {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
        }

        .url-preview-content {
            flex: 1;
        }

        .url-preview-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .url-preview-description {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .url-preview-domain {
            color: var(--primary-color);
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <!-- Home Page -->
    <div id="homePage">
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-particles" id="particles-js"></div>
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-6">
                        <!-- In your hero section, wrap the main content in a glass-card -->
                        <div class="glass-card p-5">
                            <h1 class="hero-title">
                                <span class="gradient-text">Organize</span> Your Digital World
                            </h1>
                            <p class="hero-subtitle">Transform your learning experience with TAGZS - Your intelligent content hub for organizing, learning, and remembering everything that matters.</p>
                            <div class="hero-buttons">
                                <button class="btn btn-light btn-lg pulse-animation" id="signInBtn">
                                    <i class="fas fa-sign-in-alt me-2"></i>Sign In
                                </button>
                                <button class="btn btn-outline-light btn-lg glow-animation" id="signUpBtn">
                                    <i class="fas fa-user-plus me-2"></i>Sign Up Free
                                </button>
                            </div>
                            <div class="hero-features mt-4">
                                <div class="feature-tag">
                                    <i class="fas fa-brain"></i> AI-Powered
                                </div>
                                <div class="feature-tag">
                                    <i class="fas fa-shield-alt"></i> Secure
                                </div>
                                <div class="feature-tag">
                                    <i class="fas fa-bolt"></i> Fast
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 d-none d-lg-block">
                        <div class="hero-image">
                            <div class="floating-card card-1">
                                <i class="fas fa-lightbulb"></i>
                                <span>Smart Learning</span>
                            </div>
                            <div class="floating-card card-2">
                                <i class="fas fa-tasks"></i>
                                <span>Organized Content</span>
                            </div>
                            <div class="floating-card card-3">
                                <i class="fas fa-clock"></i>
                                <span>Time-saving</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="hero-shape">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
                    <path fill="#ffffff" fill-opacity="1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
                </svg>
            </div>
            <div class="floating-shape shape1"></div>
            <div class="floating-shape shape2"></div>
        </section>

        <!-- Problem/Solution Section -->
        <section class="problem-solution">
            <div class="container">
                <h2 class="section-title">The Problem We Solve</h2>
                <div class="row">
                    <div class="col-md-4">
                        <div class="solution-card slide-up">
                            <i class="fas fa-puzzle-piece"></i>
                            <h4>Scattered Content</h4>
                            <p>Your valuable content is spread across different platforms, making it hard to find and organize.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="solution-card slide-up" style="animation-delay: 0.1s;">
                            <i class="fas fa-brain"></i>
                            <h4>Information Overload</h4>
                            <p>Too much content leads to cognitive overload and difficulty in retaining important information.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="solution-card slide-up" style="animation-delay: 0.2s;">
                            <i class="fas fa-search"></i>
                            <h4>Hard to Find</h4>
                            <p>Finding specific content across multiple platforms is time-consuming and frustrating.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="features">
            <div class="container">
                <h2 class="section-title">Key Features</h2>
                <div class="row">
                    <div class="col-md-4">
                        <div class="feature-card fade-in">
                            <div class="feature-icon">
                                <i class="fas fa-tags"></i>
                            </div>
                            <h4>Smart Tagging</h4>
                            <p>Tag content from any platform with AI-powered suggestions and automatic categorization.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-card fade-in" style="animation-delay: 0.1s;">
                            <div class="feature-icon">
                                <i class="fas fa-layer-group"></i>
                            </div>
                            <h4>Unified Dashboard</h4>
                            <p>Access all your tagged content in one organized place with powerful filtering options.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-card fade-in" style="animation-delay: 0.2s;">
                            <div class="feature-icon">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                            <h4>AI-Powered Search</h4>
                            <p>Find exactly what you need with intelligent search that understands context and meaning.</p>
                        </div>
                    </div>
                </div>
                <!-- NEW: Additional Features Row -->
                <div class="row mt-4">
                    <div class="col-md-4">
                        <div class="feature-card fade-in" style="animation-delay: 0.3s;">
                            <div class="feature-icon">
                                <i class="fas fa-robot"></i>
                            </div>
                            <h4>AI Assistant</h4>
                            <p>Get smart suggestions and automated tagging from our AI assistant.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-card fade-in" style="animation-delay: 0.4s;">
                            <div class="feature-icon">
                                <i class="fas fa-moon"></i>
                            </div>
                            <h4>Dark Mode</h4>
                            <p>Work comfortably at night with our eye-friendly dark mode.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-card fade-in" style="animation-delay: 0.5s;">
                            <div class="feature-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h4>Content Analytics</h4>
                            <p>Track your content consumption patterns and learning progress.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials -->
        <section class="testimonials">
            <div class="container">
                <h2 class="section-title">What Our Users Say</h2>
                <div class="row">
                    <div class="col-md-4">
                        <div class="testimonial-card fade-in">
                            <p>TAGZS has completely transformed how I organize my research. As a PhD student, I was drowning in articles and notes. Now everything is neatly tagged and instantly searchable.</p>
                            <h5>Sarah J.</h5>
                            <div class="text-primary">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="testimonial-card fade-in" style="animation-delay: 0.1s;">
                            <p>The AI-powered search is incredible. I can find anything I've saved in seconds, even if I don't remember exactly what I tagged it with. The flashcard feature is a game-changer for learning.</p>
                            <h5>Michael R.</h5>
                            <div class="text-primary">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="testimonial-card fade-in" style="animation-delay: 0.2s;">
                            <p>Best tool for content creators. I save hundreds of references and inspiration pieces, and TAGZS makes it effortless to organize and rediscover them when I need them most.</p>
                            <h5>Emily T.</h5>
                            <div class="text-primary">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pricing -->
        <section class="pricing">
            <div class="container">
                <h2 class="section-title">Simple, Transparent Pricing</h2>
                <div class="row">
                    <div class="col-md-4">
                        <div class="pricing-card fade-in">
                            <h3>Free</h3>
                            <p class="price">$0</p>
                            <ul class="list-unstyled">
                                <li>Basic Tagging</li>
                                <li>500 MB Storage</li>
                                <li>Basic Search</li>
                                <li>Up to 100 items</li>
                                <li>Community Support</li>
                            </ul>
                            <button class="btn btn-outline-primary">Get Started</button>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="pricing-card fade-in popular" style="animation-delay: 0.1s;">
                            <h3>Pro</h3>
                            <p class="price">$9.99<span class="text-muted">/month</span></p>
                            <ul class="list-unstyled">
                                <li>Advanced Tagging</li>
                                <li>10 GB Storage</li>
                                <li>AI-Powered Search</li>
                                <li>Unlimited Items</li>
                                <li>Flashcards & Notes</li>
                                <li>Priority Support</li>
                                <li>AI Assistant</li>
                                <li>Content Analytics</li>
                            </ul>
                            <button class="btn btn-primary">Upgrade Now</button>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="pricing-card fade-in" style="animation-delay: 0.2s;">
                            <h3>Enterprise</h3>
                            <p class="price">Custom</p>
                            <ul class="list-unstyled">
                                <li>All Pro Features</li>
                                <li>Unlimited Storage</li>
                                <li>Team Collaboration</li>
                                <li>Custom Integration</li>
                                <li>Dedicated Support</li>
                                <li>Advanced Analytics</li>
                                <li>API Access</li>
                                <li>White-label Options</li>
                            </ul>
                            <button class="btn btn-outline-primary">Contact Us</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ -->
        <section class="faq">
            <div class="container">
                <h2 class="section-title">Frequently Asked Questions</h2>
                <div class="row">
                    <div class="col-md-6">
                        <div class="faq-item fade-in">
                            <h5>What platforms does TAGZS support?</h5>
                            <p>TAGZS supports all major platforms including YouTube, Twitter, LinkedIn, news websites, PDFs, and more through our browser extension and mobile apps. We're constantly adding new integrations.</p>
                        </div>
                        <div class="faq-item fade-in" style="animation-delay: 0.1s;">
                            <h5>Is my data secure with TAGZS?</h5>
                            <p>Absolutely. We use industry-standard encryption for all your data. You own your content, and we never sell or share your information with third parties.</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="faq-item fade-in" style="animation-delay: 0.2s;">
                            <h5>How does the AI-powered search work?</h5>
                            <p>Our AI analyzes your content and tags to provide intelligent search results based on meaning, not just keywords. It learns from your usage patterns to deliver increasingly relevant results.</p>
                        </div>
                        <div class="faq-item fade-in" style="animation-delay: 0.3s;">
                            <h5>Can I try TAGZS before paying?</h5>
                            <p>Yes! Our free plan lets you experience all core features with some limitations. You can upgrade anytime to unlock the full potential of TAGZS.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-md-4 mb-4">
                        <h5>TAGZS</h5>
                        <p>Your Universal Content Hub for organizing, learning, and remembering everything that matters.</p>
                        <div class="social-links mt-3">
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-facebook"></i></a>
                            <a href="#"><i class="fab fa-linkedin"></i></a>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                        </div>
                    </div>
                    <div class="col-md-2 mb-4">
                        <h5>Product</h5>
                        <ul class="list-unstyled">
                            <li><a href="#">Features</a></li>
                            <li><a href="#">Pricing</a></li>
                            <li><a href="#">Integrations</a></li>
                            <li><a href="#">Updates</a></li>
                        </ul>
                    </div>
                    <div class="col-md-2 mb-4">
                        <h5>Resources</h5>
                        <ul class="list-unstyled">
                            <li><a href="#">Blog</a></li>
                            <li><a href="#">Help Center</a></li>
                            <li><a href="#">Tutorials</a></li>
                            <li><a href="#">API Docs</a></li>
                        </ul>
                    </div>
                    <div class="col-md-2 mb-4">
                        <h5>Company</h5>
                        <ul class="list-unstyled">
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Careers</a></li>
                            <li><a href="#">Contact</a></li>
                            <li><a href="#">Press</a></li>
                        </ul>
                    </div>
                    <div class="col-md-2 mb-4">
                        <h5>Legal</h5>
                        <ul class="list-unstyled">
                            <li><a href="#">Privacy</a></li>
                            <li><a href="#">Terms</a></li>
                            <li><a href="#">Security</a></li>
                            <li><a href="#">GDPR</a></li>
                        </ul>
                    </div>
                </div>
                <div class="copyright">
                    <p>&copy; 2023 TAGZS. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Dashboard -->
    <div class="dashboard" id="dashboard">
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <i class="fas fa-tags"></i> TAGZS
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item position-relative">
                            <a class="nav-link" href="#" id="notificationsBtn">
                                <i class="fas fa-bell"></i>
                                <span class="badge bg-danger badge-notification">3</span>
                            </a>
                        </li>
                        <li class="nav-item position-relative">
                            <a class="nav-link" href="#" id="showRemindersBtn">
                                <i class="fas fa-bell"></i> Reminders
                                <span class="badge bg-primary badge-notification" id="reminderCount">0</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="profileBtn">
                                <i class="fas fa-user"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="container-fluid">
            <div class="row">
                <!-- Sidebar -->
                <div class="col-md-3 col-lg-2 p-0">
                    <div class="sidebar">
                        <div class="search-bar">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Search your content..." id="searchInput">
                        </div>
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a class="nav-link active" href="#" data-section="dashboard">
                                    <i class="fas fa-home"></i> Dashboard
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-section="tags">
                                    <i class="fas fa-tags"></i> Tags
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-section="flashcards">
                                    <i class="fas fa-lightbulb"></i> Flashcards
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-section="notes">
                                    <i class="fas fa-sticky-note"></i> Notes
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-section="reminders">
                                    <i class="fas fa-bell"></i> Reminders
                                    <span class="badge bg-primary badge-notification" id="reminderCount">0</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-section="collections">
                                    <i class="fas fa-folder"></i> Collections
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-section="analytics">
                                    <i class="fas fa-chart-line"></i> Analytics
                                </a>
                            </li>
                            <li class="nav-item mt-3">
                                <a class="nav-link" href="#" id="logoutBtn">
                                    <i class="fas fa-sign-out-alt"></i> Logout
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="col-md-9 col-lg-10 p-0">
                    <div class="main-content">
                        <!-- Dashboard Overview -->
                        <div class="dashboard-overview">
                            <div class="overview-header">
                                <h3>Welcome back, <span id="userName">User</span>!</h3>
                                <div>
                                    <button class="btn btn-outline-primary me-2" id="importContentBtn">
                                        <i class="fas fa-file-import"></i> Import
                                    </button>
                                    <button class="btn btn-primary" id="addContentBtn">
                                        <i class="fas fa-plus"></i> Add Content
                                    </button>
                                </div>
                            </div>
                            <div class="overview-stats">
                                <div class="stat-card">
                                    <h4 id="totalItems">0</h4>
                                    <p>Total Items</p>
                                </div>
                                <div class="stat-card">
                                    <h4 id="totalTags">0</h4>
                                    <p>Total Tags</p>
                                </div>
                                <div class="stat-card">
                                    <h4 id="recentItems">0</h4>
                                    <p>Recent Items</p>
                                </div>
                                <div class="stat-card">
                                    <h4 id="flashcardsCount">0</h4>
                                    <p>Flashcards</p>
                                </div>
                                <div class="stat-card">
                                    <h4 id="aiSuggestions">0</h4>
                                    <p>AI Suggestions</p>
                                </div>
                            </div>
                        </div>

                        <!-- NEW: Quick Actions -->
                        <div class="quick-actions mb-3">
                            <button class="quick-action-btn" data-action="generate-flashcards">
                                <i class="fas fa-lightbulb"></i> Generate Flashcards
                            </button>
                            <button class="quick-action-btn" data-action="ai-tagging">
                                <i class="fas fa-robot"></i> AI Tagging
                            </button>
                            <button class="quick-action-btn" data-action="export-all">
                                <i class="fas fa-file-export"></i> Export All
                            </button>
                        </div>

                        <!-- NEW: AI Suggestions Section -->
                        <div class="ai-suggestions">
                            <h5>AI Suggestions</h5>
                            <p>Based on your recent activity, we recommend reviewing these items:</p>
                            <div class="ai-suggested-items" id="aiSuggestedItems">
                                <!-- AI suggested items will appear here -->
                            </div>
                        </div>

                        <!-- Category Tabs -->
                        <div class="category-tabs">
                            <button class="category-tab active" data-category="all">All</button>
                            <button class="category-tab" data-category="video">Videos</button>
                            <button class="category-tab" data-category="article">Articles</button>
                            <button class="category-tab" data-category="podcast">Podcasts</button>
                            <button class="category-tab" data-category="document">Documents</button>
                            <button class="category-tab" data-category="website">Websites</button>
                            <button class="category-tab" data-category="image">Images</button>
                        </div>

                        <!-- Content Grid -->
                        <div class="content-grid" id="contentGrid">
                            <!-- Content cards will be dynamically inserted here -->
                        </div>

                        <!-- Content Expiry Section -->
                        <div class="content-expiry-section mt-4">
                            <h4>Content Review Schedule</h4>
                            <div class="expiry-filters mb-3">
                                <button class="btn btn-outline-primary active" data-filter="upcoming">Upcoming Reviews</button>
                                <button class="btn btn-outline-primary" data-filter="overdue">Overdue</button>
                                <button class="btn btn-outline-primary" data-filter="completed">Completed</button>
                            </div>
                            <div id="expiryList" class="expiry-list">
                                <!-- Expiry items will be dynamically inserted here -->
                            </div>
                        </div>

                        <!-- Content Calendar Section -->
                        <div class="content-calendar-section mt-4">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h4>Content Calendar</h4>
                                <div>
                                    <button class="btn btn-outline-primary me-2" id="planContentBtn">
                                        <i class="fas fa-calendar-plus"></i> Plan Content
                                    </button>
                                    <button class="btn btn-outline-primary" id="viewMatrixBtn">
                                        <i class="fas fa-th"></i> View Matrix
                                    </button>
                                </div>
                            </div>
                            <div class="calendar-container">
                                <div class="calendar-navigation d-flex justify-content-between align-items-center mb-3">
                                    <button class="btn btn-link" id="prevMonth"><i class="fas fa-chevron-left"></i></button>
                                    <h5 id="currentMonth">January 2024</h5>
                                    <button class="btn btn-link" id="nextMonth"><i class="fas fa-chevron-right"></i></button>
                                </div>
                                <div class="calendar-grid" id="calendarGrid">
                                    <!-- Calendar will be dynamically inserted here -->
                                </div>
                                <div class="tag-matrix mt-3" id="tagMatrix" style="display: none;">
                                    <!-- Tag matrix will be dynamically inserted here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal-container login-modal">
            <div class="modal-header">
                <h3>Welcome to TAGZS</h3>
                <button class="modal-close" id="closeLoginModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="login-header">
                    <img src="https://via.placeholder.com/80" alt="TAGZS Logo">
                    <h2>Sign In</h2>
                    <p>Access your content hub</p>
                </div>
                <div class="social-login">
                    <button id="googleLogin">
                        <i class="fab fa-google"></i>
                        Google
                    </button>
                    <button id="githubLogin">
                        <i class="fab fa-github"></i>
                        GitHub
                    </button>
                </div>
                <div class="divider">
                    <span>or</span>
                </div>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" class="form-control" id="loginEmail" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" class="form-control" id="loginPassword" placeholder="Enter your password" required>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" class="form-check-input" id="rememberMe">
                        <label class="form-check-label" for="rememberMe">Remember me</label>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" id="cancelLogin">Cancel</button>
                        <button type="submit" class="btn btn-primary">Sign In</button>
                    </div>
                </form>
                <div class="auth-footer">
                    <p>Don't have an account? <a href="#" id="switchToSignup">Sign up</a></p>
                    <p><a href="#" id="forgotPassword">Forgot password?</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal-overlay" id="signupModal">
        <div class="modal-container login-modal">
            <div class="modal-header">
                <h3>Join TAGZS</h3>
                <button class="modal-close" id="closeSignupModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="login-header">
                    <img src="https://via.placeholder.com/80" alt="TAGZS Logo">
                    <h2>Create Account</h2>
                    <p>Start organizing your digital world</p>
                </div>
                <div class="social-login">
                    <button id="googleSignup">
                        <i class="fab fa-google"></i>
                        Google
                    </button>
                    <button id="githubSignup">
                        <i class="fab fa-github"></i>
                        GitHub
                    </button>
                </div>
                <div class="divider">
                    <span>or</span>
                </div>
                <form id="signupForm">
                    <div class="form-group">
                        <label for="signupName">Full Name</label>
                        <input type="text" class="form-control" id="signupName" placeholder="Enter your name" required>
                    </div>
                    <div class="form-group">
                        <label for="signupEmail">Email</label>
                        <input type="email" class="form-control" id="signupEmail" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <input type="password" class="form-control" id="signupPassword" placeholder="Create a password" required minlength="8">
                    </div>
                    <div class="form-group">
                        <label for="signupConfirm">Confirm Password</label>
                        <input type="password" class="form-control" id="signupConfirm" placeholder="Confirm your password" required>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" id="cancelSignup">Cancel</button>
                        <button type="submit" class="btn btn-primary">Create Account</button>
                    </div>
                </form>
                <div class="auth-footer">
                    <p>Already have an account? <a href="#" id="switchToLogin">Sign in</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Content Modal -->
    <div class="modal-overlay" id="addContentModal">
        <div class="modal-container tagging-modal">
            <div class="modal-header">
                <h3>Add New Content</h3>
                <button class="modal-close" id="closeAddContentModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="contentTitle">Title</label>
                    <input type="text" class="form-control" id="contentTitle" placeholder="Enter content title">
                </div>
                <div class="form-group">
                    <label for="contentUrl">URL (optional)</label>
                    <input type="url" class="form-control" id="contentUrl" placeholder="https://example.com">
                </div>
                <div class="form-group">
                    <label for="contentType">Content Type</label>
                    <select class="form-control" id="contentType">
                        <option value="article">Article</option>
                        <option value="video">Video</option>
                        <option value="podcast">Podcast</option>
                        <option value="document">Document</option>
                        <option value="website">Website</option>
                        <option value="image">Image</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Tags</label>
                    <input type="text" class="form-control" id="tagInput" placeholder="Type and press Enter to add tags">
                    <div class="tag-suggestions" id="tagSuggestions">
                        <!-- Suggested tags will appear here -->
                    </div>
                    <!-- NEW: AI Tag Suggestions -->
                    <div class="ai-generated-tags mt-2">
                        <small class="text-muted">AI suggests: </small>
                        <span class="ai-generated-tag">machine-learning</span>
                        <span class="ai-generated-tag">web-development</span>
                        <span class="ai-generated-tag">tutorial</span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="contentNotes">Notes</label>
                    <textarea class="form-control" id="contentNotes" rows="3" placeholder="Add your notes about this content..."></textarea>
                </div>
                <!-- NEW: Content Priority -->
                <div class="form-group">
                    <label>Priority</label>
                    <div class="quick-actions">
                        <button type="button" class="quick-action-btn priority-high">High</button>
                        <button type="button" class="quick-action-btn priority-medium">Medium</button>
                        <button type="button" class="quick-action-btn priority-low">Low</button>
                    </div>
                </div>
                <!-- NEW: AI Summary -->
                <div class="ai-summary-card">
                    <h5>AI Summary</h5>
                    <p>Based on the URL, this appears to be a technical article about web development best practices.</p>
                    <button class="btn btn-sm btn-outline-primary mt-2">Regenerate Summary</button>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" id="cancelAddContent">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveContent">Save Content</button>
            </div>
        </div>
    </div>

    <!-- NEW: Import Content Modal -->
    <div class="modal-overlay" id="importContentModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>Import Content</h3>
                <button class="modal-close" id="closeImportContentModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="import-options">
                    <div class="import-option">
                        <i class="fab fa-chrome"></i>
                        <p>Browser Extension</p>
                    </div>
                    <div class="import-option">
                        <i class="fas fa-file-import"></i>
                        <p>CSV/JSON</p>
                    </div>
                    <div class="import-option">
                        <i class="fab fa-pocket"></i>
                        <p>Pocket</p>
                    </div>
                    <div class="import-option">
                        <i class="fab fa-evernote"></i>
                        <p>Evernote</p>
                    </div>
                    <div class="import-option">
                        <i class="fas fa-rss"></i>
                        <p>RSS Feed</p>
                    </div>
                    <div class="import-option">
                        <i class="fas fa-link"></i>
                        <p>URL List</p>
                    </div>
                </div>
                <div class="form-group mt-3">
                    <label>Or paste URLs (one per line)</label>
                    <textarea class="form-control" rows="5" placeholder="https://example.com/article1\nhttps://example.com/video2"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" id="cancelImport">Cancel</button>
                <button type="button" class="btn btn-primary" id="startImport">Start Import</button>
            </div>
        </div>
    </div>

    <!-- Content Viewer Modal -->
    <div class="modal-overlay" id="contentViewerModal">
        <div class="modal-container content-viewer">
            <div class="modal-header">
                <h3 id="viewerTitle">Content Title</h3>
                <button class="modal-close" id="closeContentViewer">&times;</button>
            </div>
            <div class="modal-body">
                <div class="content-viewer-body" id="viewerContent">
                    <p>Loading content...</p>
                </div>
                <div class="tag-cloud" id="viewerTags"></div>
                <!-- NEW: Content Rating -->
                <div class="content-rating mt-3">
                    <label>Rate this content:</label>
                    <div>
                        <i class="fas fa-star rating-star"></i>
                        <i class="fas fa-star rating-star"></i>
                        <i class="fas fa-star rating-star"></i>
                        <i class="fas fa-star rating-star"></i>
                        <i class="fas fa-star rating-star"></i>
                    </div>
                </div>
                <!-- NEW: Content Actions -->
                <div class="quick-actions mt-3">
                    <button class="quick-action-btn">
                        <i class="fas fa-share-alt"></i> Share
                    </button>
                    <button class="quick-action-btn">
                        <i class="fas fa-download"></i> Download
                    </button>
                    <button class="quick-action-btn">
                        <i class="fas fa-flask"></i> Analyze
                    </button>
                </div>
                <div class="notes-section mt-3">
                    <label>Your Notes</label>
                    <div class="notes-list" id="viewerNotes"></div>
                    <input type="text" class="notes-input" id="addViewerNote" placeholder="Add a note...">
                </div>
                <!-- NEW: AI Summary -->
                <div class="ai-summary mt-3">
                    <h5>AI Summary</h5>
                    <p>This article discusses the latest trends in web development, focusing on performance optimization techniques.</p>
                </div>
                <!-- NEW: Related Content -->
                <div class="related-items mt-3">
                    <h5>Related Content</h5>
                    <div class="related-item">Web Performance Optimization Guide</div>
                    <div class="related-item">JavaScript Best Practices</div>
                    <div class="related-item">Modern CSS Techniques</div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" id="editContent">Edit</button>
                <button type="button" class="btn btn-primary" id="openOriginal">Open Original</button>
            </div>
        </div>
    </div>

    <!-- Flashcard Modal -->
    <div class="modal-overlay" id="flashcardModal">
        <div class="modal-container flashcard-modal">
            <div class="modal-header">
                <h3>Flashcards</h3>
                <button class="modal-close" id="closeFlashcardModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="flashcard-study-container">
                    <!-- Study Progress -->
                    <div class="study-progress">
                        <div class="study-stats">
                            <div class="stat-item">
                                <div class="stat-value" id="totalFlashcards">0</div>
                                <div class="stat-label">Total Cards</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="masteredCards">0</div>
                                <div class="stat-label">Mastered</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="studyStreak">0</div>
                                <div class="stat-label">Day Streak</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" id="createFlashcardBtn">
                            <i class="fas fa-plus"></i> Create Flashcard
                        </button>
                    </div>

                    <!-- Deck Selector -->
                    <div class="deck-selector">
                        <!-- Decks will be dynamically inserted here -->
                    </div>

                    <!-- Flashcard Display -->
                    <div class="flashcard">
                        <div class="flashcard-front" id="flashcardFront">
                            <h3>Welcome to Flashcards!</h3>
                            <p>Click 'Create Flashcard' to get started</p>
                        </div>
                        <div class="flashcard-back" id="flashcardBack">
                            <p>Start creating your own flashcards or generate them from your content.</p>
                        </div>
                        <div class="flashcard-controls">
                            <button class="btn btn-outline-primary" id="prevCard">
                                <i class="fas fa-arrow-left"></i> Previous
                            </button>
                            <button class="btn btn-primary" id="flipCard">Flip Card</button>
                            <button class="btn btn-outline-primary" id="nextCard">
                                Next <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <div class="progress mt-3">
                        <div class="progress-bar" id="flashcardProgress" role="progressbar" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tag Manager Modal -->
    <div class="modal-overlay" id="tagManagerModal">
        <div class="modal-container tag-manager">
            <div class="modal-header">
                <h3>Manage Tags</h3>
                <button class="modal-close" id="closeTagManager">&times;</button>
            </div>
            <div class="modal-body">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" id="newTagInput" placeholder="Add new tag...">
                    <button class="btn btn-primary" id="addTagBtn">Add</button>
                </div>
                <div class="tag-list" id="tagList">
                    <!-- Tags will be populated here -->
                </div>
                <!-- NEW: AI Tag Suggestions -->
                <div class="ai-suggestions mt-3">
                    <h5>AI Tag Recommendations</h5>
                    <div class="ai-tags">
                        <span class="ai-generated-tag">web-development</span>
                        <span class="ai-generated-tag">javascript</span>
                        <span class="ai-generated-tag">tutorial</span>
                        <span class="ai-generated-tag">beginners</span>
                        <span class="ai-generated-tag">advanced</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="saveTags">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- NEW: Analytics Modal -->
    <div class="modal-overlay" id="analyticsModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>Content Analytics</h3>
                <button class="modal-close" id="closeAnalyticsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="analytics-chart">
                    <!-- Chart will be rendered here -->
                    <div class="chart-bar" style="left: 10%; height: 30%;"></div>
                    <div class="chart-bar" style="left: 20%; height: 50%;"></div>
                    <div class="chart-bar" style="left: 30%; height: 70%;"></div>
                    <div class="chart-bar" style="left: 40%; height: 40%;"></div>
                    <div class="chart-bar" style="left: 50%; height: 60%;"></div>
                    <div class="chart-bar" style="left: 60%; height: 80%;"></div>
                    <div class="chart-bar" style="left: 70%; height: 30%;"></div>
                </div>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-date">Today</div>
                        <div class="timeline-content">Added 3 new articles</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-date">Yesterday</div>
                        <div class="timeline-content">Reviewed 5 flashcards</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-date">2 days ago</div>
                        <div class="timeline-content">Created collection "Web Dev"</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="closeAnalytics">Close</button>
            </div>
        </div>
    </div>

    <!-- NEW: AI Assistant Chat -->
    <div class="ai-assistant-chat" id="aiAssistantChat">
        <div class="ai-chat-header">
            <h5>AI Assistant</h5>
            <button class="modal-close" id="closeAIChat">&times;</button>
        </div>
        <div class="ai-chat-messages" id="aiChatMessages">
            <div class="ai-message ai-response">
                <p>Hi there! I'm your TAGZS AI assistant. How can I help you today?</p>
            </div>
        </div>
        <div class="ai-chat-input">
            <input type="text" placeholder="Ask me anything..." id="aiChatInput">
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toastNotification">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Action completed successfully</span>
    </div>

    <!-- NEW: Dark Mode Toggle -->
    <div class="dark-mode-toggle" id="darkModeToggle">
        <i class="fas fa-moon"></i>
    </div>

    <!-- NEW: AI Assistant Button -->
    <div class="ai-assistant" id="aiAssistant">
        <i class="fas fa-robot"></i>
    </div>

    <!-- Flashcard Creation Modal -->
    <div class="modal-overlay" id="createFlashcardModal">
        <div class="modal-container flashcard-creation-modal">
            <div class="modal-header">
                <h3>Create Flashcard</h3>
                <button class="modal-close" id="closeCreateFlashcardModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="flashcard-editor">
                    <div class="form-group">
                        <label>Question/Front Side</label>
                        <textarea class="form-control" id="flashcardQuestion" rows="3" placeholder="Enter your question or front side content..."></textarea>
                        <div class="formatting-tools mt-2">
                            <button class="btn btn-sm btn-outline-secondary" data-format="bold"><i class="fas fa-bold"></i></button>
                            <button class="btn btn-sm btn-outline-secondary" data-format="italic"><i class="fas fa-italic"></i></button>
                            <button class="btn btn-sm btn-outline-secondary" data-format="underline"><i class="fas fa-underline"></i></button>
                            <button class="btn btn-sm btn-outline-secondary" data-format="list"><i class="fas fa-list"></i></button>
                            <button class="btn btn-sm btn-outline-secondary" data-format="image"><i class="fas fa-image"></i></button>
                            <input type="file" id="imageUpload" accept="image/*" style="display: none">
                        </div>
                    </div>
                    
                    <div class="form-group mt-4">
                        <label>Answer/Back Side</label>
                        <textarea class="form-control" id="flashcardAnswer" rows="3" placeholder="Enter your answer or back side content..."></textarea>
                        <div class="formatting-tools mt-2">
                            <button class="btn btn-sm btn-outline-secondary" data-format="bold"><i class="fas fa-bold"></i></button>
                            <button class="btn btn-sm btn-outline-secondary" data-format="italic"><i class="fas fa-italic"></i></button>
                            <button class="btn btn-sm btn-outline-secondary" data-format="underline"><i class="fas fa-underline"></i></button>
                            <button class="btn btn-sm btn-outline-secondary" data-format="list"><i class="fas fa-list"></i></button>
                            <button class="btn btn-sm btn-outline-secondary" data-format="image"><i class="fas fa-image"></i></button>
                        </div>
                    </div>

                    <div class="form-group mt-4">
                        <label>Tags</label>
                        <input type="text" class="form-control" id="flashcardTags" placeholder="Add tags (comma separated)">
                    </div>

                    <div class="form-group mt-4">
                        <label>Category</label>
                        <select class="form-control" id="flashcardCategory">
                            <option value="">Select a category</option>
                            <option value="general">General</option>
                            <option value="vocabulary">Vocabulary</option>
                            <option value="math">Mathematics</option>
                            <option value="science">Science</option>
                            <option value="history">History</option>
                            <option value="custom">Custom</option>
                        </select>
                    </div>

                    <div class="form-group mt-4">
                        <label>Styling</label>
                        <div class="style-options">
                            <div class="color-picker">
                                <label>Background Color</label>
                                <input type="color" id="cardBgColor" value="#ffffff">
                            </div>
                            <div class="color-picker">
                                <label>Text Color</label>
                                <input type="color" id="cardTextColor" value="#000000">
                            </div>
                            <div class="font-selector">
                                <label>Font</label>
                                <select class="form-control" id="cardFont">
                                    <option value="Inter">Inter</option>
                                    <option value="Arial">Arial</option>
                                    <option value="Times New Roman">Times New Roman</option>
                                    <option value="Courier New">Courier New</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="flashcard-preview mt-4">
                        <h5>Preview</h5>
                        <div class="preview-card">
                            <div class="preview-front" id="previewFront">
                                <p>Question preview will appear here</p>
                            </div>
                            <div class="preview-back" id="previewBack">
                                <p>Answer preview will appear here</p>
                            </div>
                        </div>
                        <button class="btn btn-sm btn-outline-primary mt-2" id="togglePreview">Flip Preview</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" id="cancelCreateFlashcard">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveFlashcard">Create Flashcard</button>
            </div>
        </div>
    </div>

    <!-- Reminder Modal -->
    <div class="modal-overlay" id="reminderModal">
        <div class="modal-container reminder-modal">
            <div class="modal-header">
                <h3>Set Reminder</h3>
                <button class="modal-close" id="closeReminderModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="reminder-form">
                    <div class="form-group">
                        <label>Title</label>
                        <input type="text" class="form-control" id="reminderTitle" placeholder="Enter reminder title">
                    </div>
                    
                    <div class="form-group mt-3">
                        <label>Type</label>
                        <select class="form-control" id="reminderType">
                            <option value="study">Study Session</option>
                            <option value="review">Content Review</option>
                            <option value="flashcards">Flashcard Practice</option>
                            <option value="custom">Custom Reminder</option>
                        </select>
                    </div>

                    <div class="form-group mt-3">
                        <label>Date & Time</label>
                        <div class="d-flex gap-2">
                            <input type="date" class="form-control" id="reminderDate">
                            <input type="time" class="form-control" id="reminderTime">
                        </div>
                    </div>

                    <div class="form-group mt-3">
                        <label>Repeat</label>
                        <select class="form-control" id="reminderRepeat">
                            <option value="none">Don't repeat</option>
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                        </select>
                    </div>

                    <div class="form-group mt-3">
                        <label>Priority</label>
                        <div class="priority-selector">
                            <button class="priority-btn" data-priority="low">Low</button>
                            <button class="priority-btn" data-priority="medium">Medium</button>
                            <button class="priority-btn active" data-priority="high">High</button>
                        </div>
                    </div>

                    <div class="form-group mt-3">
                        <label>Notes</label>
                        <textarea class="form-control" id="reminderNotes" rows="3" placeholder="Add any additional notes..."></textarea>
                    </div>
                </div>

                <!-- Quick Templates -->
                <div class="quick-templates mt-4">
                    <h5>Quick Templates</h5>
                    <div class="template-buttons">
                        <button class="template-btn" data-template="study">
                            <i class="fas fa-book"></i> Study Session
                        </button>
                        <button class="template-btn" data-template="review">
                            <i class="fas fa-sync"></i> Review
                        </button>
                        <button class="template-btn" data-template="practice">
                            <i class="fas fa-brain"></i> Practice
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" id="cancelReminder">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveReminder">Set Reminder</button>
            </div>
        </div>
    </div>

    <!-- Reminders List Modal -->
    <div class="modal-overlay" id="remindersListModal">
        <div class="modal-container reminders-list-modal">
            <div class="modal-header">
                <h3>My Reminders</h3>
                <button class="modal-close" id="closeRemindersListModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="reminders-filters">
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="upcoming">Upcoming</button>
                        <button class="filter-btn" data-filter="completed">Completed</button>
                        <button class="filter-btn" data-filter="missed">Missed</button>
                    </div>
                    <button class="btn btn-primary btn-sm" id="addNewReminder">
                        <i class="fas fa-plus"></i> New Reminder
                    </button>
                </div>

                <div class="reminders-list" id="remindersList">
                    <!-- Reminders will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Notes Modal -->
    <div class="modal-overlay" id="noteModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>Create/Edit Note</h3>
                <button class="modal-close" id="closeNoteModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="noteTitle">Title</label>
                    <input type="text" class="form-control" id="noteTitle" placeholder="Enter note title">
                </div>
                <div class="form-group mt-3">
                    <label for="noteCategory">Category</label>
                    <select class="form-control" id="noteCategory">
                        <option value="general">General</option>
                        <option value="study">Study</option>
                        <option value="research">Research</option>
                        <option value="personal">Personal</option>
                    </select>
                </div>
                <div class="form-group mt-3">
                    <label for="noteContent">Content</label>
                    <div class="formatting-tools mb-2">
                        <button class="btn btn-sm btn-outline-secondary note-format-btn" data-format="bold">
                            <i class="fas fa-bold"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-secondary note-format-btn" data-format="italic">
                            <i class="fas fa-italic"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-secondary note-format-btn" data-format="list">
                            <i class="fas fa-list"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-secondary note-format-btn" data-format="code">
                            <i class="fas fa-code"></i>
                        </button>
                    </div>
                    <textarea class="form-control" id="noteContent" rows="10" placeholder="Write your note here..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" id="cancelNote">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveNoteBtn">Save Note</button>
            </div>
        </div>
    </div>

    <!-- Notes List Modal -->
    <div class="modal-overlay" id="notesListModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>My Notes</h3>
                <button class="modal-close" id="closeNotesListModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div class="search-bar" style="flex: 1; margin-right: 1rem;">
                        <i class="fas fa-search"></i>
                        <input type="text" id="noteSearch" placeholder="Search notes...">
                    </div>
                    <button class="btn btn-primary" id="addNoteBtn">
                        <i class="fas fa-plus"></i> Add Note
                    </button>
                </div>
                <div id="notesList" class="notes-list">
                    <!-- Notes will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Collections Modal -->
    <div class="modal-overlay" id="collectionModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>Create/Edit Collection</h3>
                <button class="modal-close" id="closeCollectionModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="collectionName">Collection Name</label>
                    <input type="text" class="form-control" id="collectionName" placeholder="Enter collection name">
                </div>
                <div class="form-group mt-3">
                    <label for="collectionDescription">Description</label>
                    <textarea class="form-control" id="collectionDescription" rows="3" placeholder="Describe your collection..."></textarea>
                </div>
                <div class="form-group mt-3">
                    <label>Items in Collection</label>
                    <div id="collectionItems" class="collection-items-list">
                        <!-- Collection items will be dynamically inserted here -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" id="cancelCollection">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveCollectionBtn">Save Collection</button>
            </div>
        </div>
    </div>

    <!-- Collections List Modal -->
    <div class="modal-overlay" id="collectionsListModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>My Collections</h3>
                <button class="modal-close" id="closeCollectionsListModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div class="search-bar" style="flex: 1; margin-right: 1rem;">
                        <i class="fas fa-search"></i>
                        <input type="text" id="collectionSearch" placeholder="Search collections...">
                    </div>
                    <button class="btn btn-primary" id="addCollectionBtn">
                        <i class="fas fa-plus"></i> Add Collection
                    </button>
                </div>
                <div id="collectionsList" class="collections-list">
                    <!-- Collections will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Add particles.js -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // Particles.js configuration
        particlesJS('particles-js', {
            particles: {
                number: {
                    value: 80,
                    density: {
                        enable: true,
                        value_area: 800
                    }
                },
                color: {
                    value: '#ffffff'
                },
                shape: {
                    type: 'circle'
                },
                opacity: {
                    value: 0.5,
                    random: false
                },
                size: {
                    value: 3,
                    random: true
                },
                line_linked: {
                    enable: true,
                    distance: 150,
                    color: '#ffffff',
                    opacity: 0.4,
                    width: 1
                },
                move: {
                    enable: true,
                    speed: 2,
                    direction: 'none',
                    random: false,
                    straight: false,
                    out_mode: 'out',
                    bounce: false
                }
            },
            interactivity: {
                detect_on: 'canvas',
                events: {
                    onhover: {
                        enable: true,
                        mode: 'grab'
                    },
                    onclick: {
                        enable: true,
                        mode: 'push'
                    },
                    resize: true
                },
                modes: {
                    grab: {
                        distance: 140,
                        line_linked: {
                            opacity: 1
                        }
                    },
                    push: {
                        particles_nb: 4
                    }
                }
            },
            retina_detect: true
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // App State
        const state = {
            currentUser: null,
            contentItems: [],
            tags: [],
            flashcards: [],
            notes: [],
            collections: [],
            currentView: 'dashboard',
            currentFlashcardIndex: 0,
            isCardFlipped: false,
            darkMode: false,
            aiAssistantOpen: false
        };

        // DOM Elements
        const elements = {
            homePage: document.getElementById('homePage'),
            dashboard: document.getElementById('dashboard'),
            
            // Auth elements
            signInBtn: document.getElementById('signInBtn'),
            signUpBtn: document.getElementById('signUpBtn'),
            logoutBtn: document.getElementById('logoutBtn'),
            
            // Modal elements
            loginModal: document.getElementById('loginModal'),
            signupModal: document.getElementById('signupModal'),
            addContentModal: document.getElementById('addContentModal'),
            importContentModal: document.getElementById('importContentModal'),
            contentViewerModal: document.getElementById('contentViewerModal'),
            flashcardModal: document.getElementById('flashcardModal'),
            tagManagerModal: document.getElementById('tagManagerModal'),
            analyticsModal: document.getElementById('analyticsModal'),
            
            // Close buttons
            closeLoginModal: document.getElementById('closeLoginModal'),
            closeSignupModal: document.getElementById('closeSignupModal'),
            closeAddContentModal: document.getElementById('closeAddContentModal'),
            closeImportContentModal: document.getElementById('closeImportContentModal'),
            closeContentViewer: document.getElementById('closeContentViewer'),
            closeFlashcardModal: document.getElementById('closeFlashcardModal'),
            closeTagManager: document.getElementById('closeTagManager'),
            closeAnalyticsModal: document.getElementById('closeAnalyticsModal'),
            closeAIChat: document.getElementById('closeAIChat'),
            
            // Form elements
            loginForm: document.getElementById('loginForm'),
            signupForm: document.getElementById('signupForm'),
            
            // Content elements
            contentGrid: document.getElementById('contentGrid'),
            addContentBtn: document.getElementById('addContentBtn'),
            importContentBtn: document.getElementById('importContentBtn'),
            saveContent: document.getElementById('saveContent'),
            
            // Flashcard elements
            flashcardFront: document.getElementById('flashcardFront'),
            flashcardBack: document.getElementById('flashcardBack'),
            flipCard: document.getElementById('flipCard'),
            prevCard: document.getElementById('prevCard'),
            nextCard: document.getElementById('nextCard'),
            flashcardProgress: document.getElementById('flashcardProgress'),
            
            // Tag elements
            tagInput: document.getElementById('tagInput'),
            tagSuggestions: document.getElementById('tagSuggestions'),
            newTagInput: document.getElementById('newTagInput'),
            addTagBtn: document.getElementById('addTagBtn'),
            tagList: document.getElementById('tagList'),
            saveTags: document.getElementById('saveTags'),
            
            // Stats elements
            userName: document.getElementById('userName'),
            totalItems: document.getElementById('totalItems'),
            totalTags: document.getElementById('totalTags'),
            recentItems: document.getElementById('recentItems'),
            flashcardsCount: document.getElementById('flashcardsCount'),
            aiSuggestions: document.getElementById('aiSuggestions'),
            
            // Navigation elements
            navLinks: document.querySelectorAll('.sidebar .nav-link'),
            categoryTabs: document.querySelectorAll('.category-tab'),
            searchInput: document.getElementById('searchInput'),
            
            // Toast
            toast: document.getElementById('toastNotification'),
            toastMessage: document.getElementById('toastMessage'),
            
            // NEW: Dark mode toggle
            darkModeToggle: document.getElementById('darkModeToggle'),
            
            // NEW: AI Assistant
            aiAssistant: document.getElementById('aiAssistant'),
            aiAssistantChat: document.getElementById('aiAssistantChat'),
            aiChatMessages: document.getElementById('aiChatMessages'),
            aiChatInput: document.getElementById('aiChatInput'),
            
            // NEW: Quick actions
            quickActionBtns: document.querySelectorAll('.quick-action-btn'),
            
            // NEW: Rating stars
            ratingStars: document.querySelectorAll('.rating-star'),

            reminderBtns: {
                show: document.getElementById('showRemindersBtn'),
                create: document.getElementById('addNewReminder'),
                save: document.getElementById('saveReminder'),
                cancel: document.getElementById('cancelReminder'),
                close: document.getElementById('closeReminderModal'),
                closeList: document.getElementById('closeRemindersListModal')
            }
        };

        // Initialize the app
        function initApp() {
            // Check if user is logged in
            const userData = localStorage.getItem('tagzs_user');
            
            if (userData) {
                try {
                    const parsedData = JSON.parse(userData);
                    state.currentUser = parsedData.user;
                    
                    // Load user data if available
                    if (parsedData.contentItems) state.contentItems = parsedData.contentItems;
                    if (parsedData.tags) state.tags = parsedData.tags;
                    if (parsedData.flashcards) state.flashcards = parsedData.flashcards;
                    if (parsedData.notes) state.notes = parsedData.notes;
                    if (parsedData.collections) state.collections = parsedData.collections;
                    if (parsedData.darkMode) state.darkMode = parsedData.darkMode;
                    
                    elements.userName.textContent = state.currentUser.name;
                    
                    // Apply dark mode if enabled
                    if (state.darkMode) {
                        document.body.classList.add('dark-mode');
                    }
                    
                    // If no data, load sample data
                    if (state.contentItems.length === 0) {
                        loadSampleData();
                    }
                    
                    // Show dashboard
                    showDashboard();
                    updateStats();
                    renderContentGrid();
                    renderAISuggestions();
                } catch (e) {
                    console.error('Error parsing user data:', e);
                    localStorage.removeItem('tagzs_user');
                    showHomePage();
                }
            } else {
                // Show home page
                showHomePage();
            }
            
            // Set up event listeners
            setupEventListeners();
        }

        // Load sample data for demonstration
        function loadSampleData() {
            // Sample content items
            state.contentItems = [
                {
                    id: 1,
                    title: 'Introduction to Machine Learning',
                    type: 'video',
                    url: 'https://www.youtube.com/watch?v=example1',
                    tags: ['machine learning', 'AI', 'beginners'],
                    notes: ['Great explanation of supervised vs unsupervised learning'],
                    dateAdded: new Date('2023-05-15'),
                    thumbnail: 'https://via.placeholder.com/300x200/6C63FF/FFFFFF?text=ML+Intro',
                    priority: 'high',
                    rating: 4,
                    views: 12
                },
                {
                    id: 2,
                    title: 'The Future of Web Development',
                    type: 'article',
                    url: 'https://example.com/web-dev-future',
                    tags: ['web development', 'trends', '2023'],
                    notes: ['Interesting predictions about WASM and edge computing'],
                    dateAdded: new Date('2023-06-20'),
                    thumbnail: 'https://via.placeholder.com/300x200/4CAF50/FFFFFF?text=Web+Dev',
                    priority: 'medium',
                    rating: 5,
                    views: 8
                },
                {
                    id: 3,
                    title: 'Designing Better User Experiences',
                    type: 'article',
                    url: 'https://example.com/ux-design',
                    tags: ['UX', 'design', 'UI'],
                    notes: ['Key takeaways: user testing is essential', 'Good examples of micro-interactions'],
                    dateAdded: new Date('2023-07-10'),
                    thumbnail: 'https://via.placeholder.com/300x200/FF6B6B/FFFFFF?text=UX+Design',
                    priority: 'low',
                    rating: 3,
                    views: 5
                },
                {
                    id: 4,
                    title: 'JavaScript Performance Optimization',
                    type: 'video',
                    url: 'https://www.youtube.com/watch?v=example2',
                    tags: ['JavaScript', 'performance', 'optimization'],
                    notes: ['Use Web Workers for heavy computations', 'Memoization patterns'],
                    dateAdded: new Date('2023-07-25'),
                    thumbnail: 'https://via.placeholder.com/300x200/FFB74D/FFFFFF?text=JS+Perf',
                    priority: 'high',
                    rating: 4,
                    views: 15
                },
                {
                    id: 5,
                    title: 'Building Scalable APIs',
                    type: 'document',
                    url: 'https://example.com/scalable-apis',
                    tags: ['API', 'backend', 'scalability'],
                    notes: ['Rate limiting strategies', 'Caching patterns'],
                    dateAdded: new Date('2023-08-05'),
                    thumbnail: 'https://via.placeholder.com/300x200/78909C/FFFFFF?text=API+Design',
                    priority: 'medium',
                    rating: 4,
                    views: 7
                }
            ];

            // Sample tags
            state.tags = [
                'machine learning', 'AI', 'beginners', 'web development', 
                'trends', '2023', 'UX', 'design', 'UI', 'JavaScript', 
                'performance', 'optimization', 'API', 'backend', 'scalability'
            ];

            // Sample flashcards
            state.flashcards = [
                {
                    id: 1,
                    question: 'What is the difference between supervised and unsupervised learning?',
                    answer: 'Supervised learning uses labeled data to train models, while unsupervised learning finds patterns in unlabeled data.',
                    tags: ['machine learning', 'AI'],
                    contentId: 1
                },
                {
                    id: 2,
                    question: 'What are the key benefits of using Web Workers in JavaScript?',
                    answer: 'Web Workers allow running scripts in background threads, preventing UI freezing during heavy computations.',
                    tags: ['JavaScript', 'performance'],
                    contentId: 4
                }
            ];

            // Sample collections
            state.collections = [
                {
                    id: 1,
                    name: 'Web Development Resources',
                    items: [2, 4, 5],
                    tags: ['web development', 'JavaScript', 'API']
                },
                {
                    id: 2,
                    name: 'AI & Machine Learning',
                    items: [1],
                    tags: ['machine learning', 'AI']
                }
            ];

            // Save the sample data
            saveUserData();
        }

        // Save user data to localStorage
        function saveUserData() {
            if (state.currentUser) {
                const userData = {
                    user: state.currentUser,
                    contentItems: state.contentItems,
                    tags: state.tags,
                    flashcards: state.flashcards,
                    notes: state.notes,
                    collections: state.collections,
                    darkMode: state.darkMode
                };
                localStorage.setItem('tagzs_user', JSON.stringify(userData));
            }
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            elements.toastMessage.textContent = message;
            elements.toast.className = `toast show ${type}`;
            
            setTimeout(() => {
                elements.toast.classList.remove('show');
            }, 3000);
        }

        // Set up event listeners
        function setupEventListeners() {
            // Auth related
            elements.signInBtn.addEventListener('click', () => showModal('loginModal'));
            elements.signUpBtn.addEventListener('click', () => showModal('signupModal'));
            elements.logoutBtn.addEventListener('click', logout);
            
            // Modal controls
            elements.closeLoginModal.addEventListener('click', () => hideModal('loginModal'));
            elements.closeSignupModal.addEventListener('click', () => hideModal('signupModal'));
            elements.closeAddContentModal.addEventListener('click', () => hideModal('addContentModal'));
            elements.closeImportContentModal.addEventListener('click', () => hideModal('importContentModal'));
            elements.closeContentViewer.addEventListener('click', () => hideModal('contentViewerModal'));
            elements.closeFlashcardModal.addEventListener('click', () => hideModal('flashcardModal'));
            elements.closeTagManager.addEventListener('click', () => hideModal('tagManagerModal'));
            elements.closeAnalyticsModal.addEventListener('click', () => hideModal('analyticsModal'));
            elements.closeAIChat.addEventListener('click', toggleAIAssistant);
            
            // Navigation
            elements.navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const section = link.getAttribute('data-section');
                    navigateTo(section);
                });
            });
            
            // Category tabs
            elements.categoryTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    elements.categoryTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    const category = tab.getAttribute('data-category');
                    filterContentByCategory(category);
                });
            });
            
            // Search
            elements.searchInput.addEventListener('input', (e) => {
                searchContent(e.target.value);
            });
            
            // Content management
            elements.addContentBtn.addEventListener('click', () => showModal('addContentModal'));
            elements.importContentBtn.addEventListener('click', () => showModal('importContentModal'));
            elements.saveContent.addEventListener('click', saveNewContent);
            
            // Tag management
            elements.tagInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && e.target.value.trim()) {
                    addTagToInput(e.target.value.trim());
                    e.target.value = '';
                    e.preventDefault();
                }
            });
            
            elements.addTagBtn.addEventListener('click', () => {
                if (elements.newTagInput.value.trim()) {
                    addNewTag(elements.newTagInput.value.trim());
                    elements.newTagInput.value = '';
                }
            });
            
            elements.saveTags.addEventListener('click', saveTagChanges);
            
            // Flashcard controls
            elements.flipCard.addEventListener('click', () => flashcardSystem.flip());
            elements.prevCard.addEventListener('click', () => flashcardSystem.prev());
            elements.nextCard.addEventListener('click', () => flashcardSystem.next());
            
            // Form submissions
            elements.loginForm.addEventListener('submit', handleLogin);
            elements.signupForm.addEventListener('submit', handleSignup);
            
            // Auth modal switches
            document.getElementById('switchToSignup').addEventListener('click', (e) => {
                e.preventDefault();
                hideModal('loginModal');
                showModal('signupModal');
            });
            
            document.getElementById('switchToLogin').addEventListener('click', (e) => {
                e.preventDefault();
                hideModal('signupModal');
                showModal('loginModal');
            });
            
            // NEW: Dark mode toggle
            elements.darkModeToggle.addEventListener('click', toggleDarkMode);
            
            // NEW: AI Assistant
            elements.aiAssistant.addEventListener('click', () => aiAssistant.toggle());
            
            // NEW: AI Chat input
            elements.aiChatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && e.target.value.trim()) {
                    aiAssistant.sendMessage(e.target.value.trim());
                    e.target.value = '';
                }
            });
            
            // NEW: Quick actions
            elements.quickActionBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const action = e.currentTarget.getAttribute('data-action');
                    switch(action) {
                        case 'generate-flashcards':
                            const selectedContent = state.contentItems[0]; // For demo, use first content
                            flashcardSystem.createFromContent(selectedContent.id);
                            break;
                        case 'set-reminder':
                            const date = new Date();
                            date.setHours(date.getHours() + 1);
                            reminderSystem.add(selectedContent.id, date, 'Time to review this content');
                            break;
                        case 'ai-analyze':
                            aiAssistant.toggle();
                            aiAssistant.sendMessage(`Analyze content: ${selectedContent.title}`);
                            break;
                    }
                });
            });
            
            // NEW: Rating stars
            elements.ratingStars.forEach((star, index) => {
                star.addEventListener('click', () => {
                    rateContent(index + 1);
                });
            });

            // Reminder system event listeners
            if (elements.reminderBtns.show) {
                elements.reminderBtns.show.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateTo('reminders');
                });
            }

            if (elements.reminderBtns.create) {
                elements.reminderBtns.create.addEventListener('click', () => {
                    reminderSystem.showReminderModal();
                });
            }

            if (elements.reminderBtns.save) {
                elements.reminderBtns.save.addEventListener('click', () => {
                    reminderSystem.saveReminder();
                });
            }

            if (elements.reminderBtns.cancel) {
                elements.reminderBtns.cancel.addEventListener('click', () => {
                    reminderSystem.hideReminderModal();
                });
            }

            if (elements.reminderBtns.close) {
                elements.reminderBtns.close.addEventListener('click', () => {
                    reminderSystem.hideReminderModal();
                });
            }

            if (elements.reminderBtns.closeList) {
                elements.reminderBtns.closeList.addEventListener('click', () => {
                    reminderSystem.hideRemindersListModal();
                });
            }

            // Add keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.ctrlKey && e.key === 'r') {
                    e.preventDefault();
                    navigateTo('reminders');
                }
            });

            // Notes modal controls
            document.getElementById('closeNotesListModal')?.addEventListener('click', () => {
                hideModal('notesListModal');
            });
            
            document.getElementById('cancelNote')?.addEventListener('click', () => {
                hideModal('noteModal');
            });
            
            // Collections modal controls
            document.getElementById('closeCollectionsListModal')?.addEventListener('click', () => {
                hideModal('collectionsListModal');
            });
            
            document.getElementById('cancelCollection')?.addEventListener('click', () => {
                hideModal('collectionModal');
            });

            // Add this at the beginning of setupEventListeners
            const planContentBtn = document.getElementById('planContentBtn');
            if (planContentBtn) {
                planContentBtn.addEventListener('click', () => {
                    const modal = document.createElement('div');
                    modal.className = 'modal-overlay';
                    modal.style.display = 'block';
                    modal.innerHTML = `
                        <div class="modal-container" style="background: white; padding: 20px; border-radius: 8px; max-width: 600px; margin: 40px auto;">
                            <div class="modal-header">
                                <h3>Plan Your Content</h3>
                                <button class="modal-close" style="float: right; border: none; background: none; font-size: 20px;">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label>Select Tags</label>
                                    <div class="tag-selection" style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                                        ${state.tags.map(tag => `
                                            <button class="tag-btn" style="padding: 5px 10px; border: 1px solid #6C63FF; border-radius: 15px; background: white; cursor: pointer;">
                                                ${tag}
                                            </button>
                                        `).join('')}
                                    </div>
                                </div>
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label>Date Range</label>
                                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                                        <input type="date" class="form-control" style="flex: 1;">
                                        <input type="date" class="form-control" style="flex: 1;">
                                    </div>
                                </div>
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label>Study Time (minutes per day)</label>
                                    <input type="number" class="form-control" value="30" min="5" max="180" style="width: 100%; margin-top: 10px;">
                                </div>
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label>Days of Week</label>
                                    <div style="display: flex; gap: 5px; margin-top: 10px;">
                                        <button class="day-btn" style="flex: 1; padding: 5px; border: 1px solid #6C63FF; border-radius: 5px; background: white;">Mon</button>
                                        <button class="day-btn" style="flex: 1; padding: 5px; border: 1px solid #6C63FF; border-radius: 5px; background: white;">Tue</button>
                                        <button class="day-btn" style="flex: 1; padding: 5px; border: 1px solid #6C63FF; border-radius: 5px; background: white;">Wed</button>
                                        <button class="day-btn" style="flex: 1; padding: 5px; border: 1px solid #6C63FF; border-radius: 5px; background: white;">Thu</button>
                                        <button class="day-btn" style="flex: 1; padding: 5px; border: 1px solid #6C63FF; border-radius: 5px; background: white;">Fri</button>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer" style="margin-top: 20px; text-align: right;">
                                <button class="btn btn-secondary" style="margin-right: 10px; padding: 8px 15px; border-radius: 5px; border: none; background: #gray;">Cancel</button>
                                <button class="btn btn-primary" style="padding: 8px 15px; border-radius: 5px; border: none; background: #6C63FF; color: white;">Create Plan</button>
                            </div>
                        </div>
                    `;

                    // Add event listeners
                    modal.querySelector('.modal-close').addEventListener('click', () => modal.remove());
                    modal.querySelector('.btn-secondary').addEventListener('click', () => modal.remove());
                    
                    // Tag selection
                    modal.querySelectorAll('.tag-btn').forEach(btn => {
                        btn.addEventListener('click', () => {
                            btn.classList.toggle('selected');
                            btn.style.background = btn.classList.contains('selected') ? '#6C63FF' : 'white';
                            btn.style.color = btn.classList.contains('selected') ? 'white' : 'black';
                        });
                    });

                    // Day selection
                    modal.querySelectorAll('.day-btn').forEach(btn => {
                        btn.addEventListener('click', () => {
                            btn.classList.toggle('selected');
                            btn.style.background = btn.classList.contains('selected') ? '#6C63FF' : 'white';
                            btn.style.color = btn.classList.contains('selected') ? 'white' : 'black';
                        });
                    });

                    // Create plan button
                    modal.querySelector('.btn-primary').addEventListener('click', () => {
                        const selectedTags = Array.from(modal.querySelectorAll('.tag-btn.selected')).map(btn => btn.textContent.trim());
                        const selectedDays = Array.from(modal.querySelectorAll('.day-btn.selected')).map(btn => btn.textContent.trim());
                        const studyTime = modal.querySelector('input[type="number"]').value;
                        
                        if (selectedTags.length === 0) {
                            alert('Please select at least one tag');
                            return;
                        }

                        if (selectedDays.length === 0) {
                            alert('Please select at least one day');
                            return;
                        }

                        // Create the plan
                        this.createSimplePlan(selectedTags, selectedDays, studyTime);
                        modal.remove();
                        showToast('Learning plan created successfully!');
                    });

                    document.body.appendChild(modal);
                });
            }

            // Analytics
            const analyticsLink = document.querySelector('a[data-section="analytics"]');
            if (analyticsLink) {
                analyticsLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    showAnalytics();
                });
            }
        }

        // Analytics Functions
        function showAnalytics() {
            const stats = getAnalyticsData();
            const modal = createAnalyticsModal(stats);
            document.body.appendChild(modal);
        }

        function getAnalyticsData() {
            const now = new Date();
            const oneWeekAgo = new Date(now - 7 * 24 * 60 * 60 * 1000);

            return {
                total: state.contentItems.length,
                completed: state.contentItems.filter(item => item.completed).length,
                recentlyAdded: state.contentItems.filter(item => new Date(item.dateAdded) > oneWeekAgo).length,
                topTags: getTopTags(),
                mostViewed: getMostViewedContent()
            };
        }

        function getTopTags() {
            const tagCounts = {};
            state.contentItems.forEach(item => {
                item.tags.forEach(tag => {
                    tagCounts[tag] = (tagCounts[tag] || 0) + 1;
                });
            });
            return Object.entries(tagCounts)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5);
        }

        function getMostViewedContent() {
            return state.contentItems
                .sort((a, b) => (b.views || 0) - (a.views || 0))
                .slice(0, 5);
        }

        function createAnalyticsModal(stats) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.style.display = 'block';
            
            modal.innerHTML = `
                <div class="modal-container" style="background: white; padding: 20px; border-radius: 8px; max-width: 600px; margin: 40px auto;">
                    <div class="modal-header">
                        <h3>Content Analytics</h3>
                        <button class="close-btn" style="float: right; border: none; background: none; font-size: 20px; cursor: pointer;">&times;</button>
                    </div>
                    
                    <div class="stats-overview" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0;">
                        <div style="background: #f0f0ff; padding: 15px; border-radius: 8px; text-align: center;">
                            <h4 style="margin: 0;">${stats.total}</h4>
                            <p style="margin: 5px 0;">Total Items</p>
                        </div>
                        <div style="background: #f0fff0; padding: 15px; border-radius: 8px; text-align: center;">
                            <h4 style="margin: 0;">${stats.completed}</h4>
                            <p style="margin: 5px 0;">Completed</p>
                        </div>
                        <div style="background: #fff0f0; padding: 15px; border-radius: 8px; text-align: center;">
                            <h4 style="margin: 0;">${stats.recentlyAdded}</h4>
                            <p style="margin: 5px 0;">Added This Week</p>
                        </div>
                    </div>

                    <div class="top-tags" style="margin: 20px 0;">
                        <h4>Most Used Tags</h4>
                        ${stats.topTags.map(([tag, count]) => `
                            <div style="display: flex; justify-content: space-between; padding: 8px; background: #f8f8f8; margin: 5px 0; border-radius: 4px;">
                                <span>${tag}</span>
                                <span>${count} items</span>
                            </div>
                        `).join('')}
                    </div>

                    <div class="most-viewed" style="margin: 20px 0;">
                        <h4>Most Viewed Content</h4>
                        ${stats.mostViewed.map(item => `
                            <div style="padding: 8px; background: #f8f8f8; margin: 5px 0; border-radius: 4px;">
                                <div style="font-weight: 500;">${item.title}</div>
                                <div style="font-size: 12px; color: #666;">
                                    ${item.views || 0} views • ${item.tags.join(', ')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            // Add close button functionality
            modal.querySelector('.close-btn').addEventListener('click', () => modal.remove());
            
            return modal;
        }

        // NEW: Toggle dark mode
        function toggleDarkMode() {
            state.darkMode = !state.darkMode;
            document.body.classList.toggle('dark-mode', state.darkMode);
            saveUserData();
            showToast(`Dark mode ${state.darkMode ? 'enabled' : 'disabled'}`);
        }

        // NEW: Toggle AI Assistant
        function toggleAIAssistant() {
            state.aiAssistantOpen = !state.aiAssistantOpen;
            elements.aiAssistantChat.classList.toggle('active', state.aiAssistantOpen);
        }

        // NEW: Send AI message
        function sendAIMessage(message) {
            // Add user message to chat
            const userMessage = document.createElement('div');
            userMessage.className = 'ai-message ai-user';
            userMessage.innerHTML = `<p>${message}</p>`;
            elements.aiChatMessages.appendChild(userMessage);
            
            // Show typing indicator
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'ai-message ai-typing';
            typingIndicator.innerHTML = '<div class="ai-processing-spinner"></div>';
            elements.aiChatMessages.appendChild(typingIndicator);
            
            // Scroll to bottom
            elements.aiChatMessages.scrollTop = elements.aiChatMessages.scrollHeight;
            
            // Simulate AI response after delay
            setTimeout(() => {
                // Remove typing indicator
                typingIndicator.remove();
                
                // Add AI response
                const aiResponse = document.createElement('div');
                aiResponse.className = 'ai-message ai-response';
                
                // Simple response logic (in a real app, this would call an API)
                let responseText = "I'm your AI assistant. In a real implementation, I would provide helpful responses based on your content.";
                
                if (message.toLowerCase().includes('tag')) {
                    responseText = "I can help you with tagging. Here are some popular tags in your collection: " + 
                                 state.tags.slice(0, 5).join(', ');
                } else if (message.toLowerCase().includes('flashcard')) {
                    responseText = "You have " + state.flashcards.length + " flashcards. I can help you create more or quiz you on existing ones.";
                } else if (message.toLowerCase().includes('hello') || message.toLowerCase().includes('hi')) {
                    responseText = "Hello! How can I assist you with your content today?";
                }
                
                aiResponse.innerHTML = `<p>${responseText}</p>`;
                elements.aiChatMessages.appendChild(aiResponse);
                
                // Scroll to bottom
                elements.aiChatMessages.scrollTop = elements.aiChatMessages.scrollHeight;
            }, 1500);
        }

        // NEW: Handle quick actions
        function handleQuickAction(action) {
            switch(action) {
                case 'generate-flashcards':
                    showToast('Generating flashcards from your content...');
                    // In a real app, this would call an API to generate flashcards
                    setTimeout(() => {
                        showToast('Generated 3 new flashcards from your recent content');
                    }, 2000);
                    break;
                case 'ai-tagging':
                    showToast('Analyzing content for AI tagging suggestions...');
                    // In a real app, this would call an API to generate tags
                    setTimeout(() => {
                        showToast('AI has suggested tags for 5 items');
                    }, 2000);
                    break;
                case 'export-all':
                    showModal('importContentModal'); // Reusing import modal for demo
                    showToast('Preparing your content for export...');
                    break;
                case 'high':
                case 'medium':
                case 'low':
                    showToast(`Content priority set to ${action}`);
                    break;
                default:
                    showToast(`Action: ${action}`);
            }
        }

        // NEW: Rate content
        function rateContent(rating) {
            // In a real app, this would save the rating to the content item
            showToast(`Rated content ${rating} star${rating !== 1 ? 's' : ''}`);
            
            // Update star display
            elements.ratingStars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        // NEW: Render AI suggestions
        function renderAISuggestions() {
            const suggestionsContainer = document.getElementById('aiSuggestedItems');
            suggestionsContainer.innerHTML = '';
            
            // Sort by most viewed (in a real app, this would use more sophisticated AI)
            const suggestedItems = [...state.contentItems]
                .sort((a, b) => b.views - a.views)
                .slice(0, 3);
            
            suggestedItems.forEach(item => {
                const suggestion = document.createElement('div');
                suggestion.className = 'ai-suggested-item';
                suggestion.innerHTML = `
                    <div class="d-flex justify-content-between align-items-center">
                        <span>${item.title}</span>
                        <button class="btn btn-sm btn-outline-primary">Review</button>
                    </div>
                `;
                suggestionsContainer.appendChild(suggestion);
            });
            
            // Update count
            elements.aiSuggestions.textContent = suggestedItems.length;
        }

        // Show modal
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';

                // Special handling for reminder modal
                if (modalId === 'reminderModal') {
                    reminderSystem.resetReminderForm();
                }
            }
        }

        // Hide modal
        function hideModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        // Show home page
        function showHomePage() {
            elements.homePage.style.display = 'block';
            elements.dashboard.style.display = 'none';
        }

        // Show dashboard
        function showDashboard() {
            elements.homePage.style.display = 'none';
            elements.dashboard.style.display = 'block';
        }

        // Navigate to section
        function navigateTo(section) {
            state.currentView = section;
            
            // Update active nav link
            elements.navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('data-section') === section) {
                    link.classList.add('active');
                }
            });
            
            switch(section) {
                case 'flashcards':
                    showModal('flashcardModal');
                    showFlashcard(state.currentFlashcardIndex);
                    break;
                case 'tags':
                    showModal('tagManagerModal');
                    renderTagList();
                    break;
                case 'analytics':
                    showModal('analyticsModal');
                    break;
                case 'reminders':
                    reminderSystem.showRemindersListModal();
                    reminderSystem.renderReminders();
                    break;
                case 'notes':
                    showModal('notesListModal');
                    notesSystem.renderNotes();
                    break;
                case 'collections':
                    showModal('collectionsListModal');
                    collectionsSystem.renderCollections();
                    break;
            }
        }

        // Update stats in dashboard
        function updateStats() {
            elements.totalItems.textContent = state.contentItems.length;
            elements.totalTags.textContent = state.tags.length;
            
            // Count recent items (added in last 7 days)
            const oneWeekAgo = new Date();
            oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
            const recentCount = state.contentItems.filter(item => new Date(item.dateAdded) > oneWeekAgo).length;
            elements.recentItems.textContent = recentCount;
            
            elements.flashcardsCount.textContent = state.flashcards.length;
        }

        // Render content grid
        function renderContentGrid() {
            elements.contentGrid.innerHTML = '';
            
            // Sort by most recent first
            const sortedItems = [...state.contentItems].sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));
            
            sortedItems.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card content-card fade-in';
                card.setAttribute('data-type', item.type);
                card.setAttribute('data-id', item.id);
                
                // Determine badge color based on type
                let badgeClass = 'content-type-badge ';
                switch(item.type) {
                    case 'video': badgeClass += 'content-type-video'; break;
                    case 'article': badgeClass += 'content-type-article'; break;
                    case 'podcast': badgeClass += 'content-type-podcast'; break;
                    case 'document': badgeClass += 'content-type-document'; break;
                    default: badgeClass += 'content-type-other';
                }
                
                // NEW: Priority badge
                let priorityBadge = '';
                if (item.priority === 'high') {
                    priorityBadge = '<span class="priority-badge priority-high">High</span>';
                } else if (item.priority === 'medium') {
                    priorityBadge = '<span class="priority-badge priority-medium">Medium</span>';
                } else if (item.priority === 'low') {
                    priorityBadge = '<span class="priority-badge priority-low">Low</span>';
                }
                
                card.innerHTML = `
                    ${priorityBadge}
                    <span class="${badgeClass}">${item.type.charAt(0).toUpperCase() + item.type.slice(1)}</span>
                    <img src="${item.thumbnail}" alt="${item.title}">
                    <div class="content-actions">
                        <button class="view-btn"><i class="fas fa-eye"></i></button>
                        <button class="edit-btn"><i class="fas fa-edit"></i></button>
                        <button class="delete-btn"><i class="fas fa-trash"></i></button>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">${item.title}</h5>
                        <p class="card-text">${item.type.charAt(0).toUpperCase() + item.type.slice(1)}</p>
                        <div class="tag-cloud">
                            ${item.tags.slice(0, 3).map(tag => `<span class="tag">#${tag}</span>`).join('')}
                            ${item.tags.length > 3 ? `<span class="tag">+${item.tags.length - 3}</span>` : ''}
                        </div>
                        <!-- NEW: Content stats -->
                        <div class="d-flex justify-content-between mt-2">
                            <small class="text-muted"><i class="fas fa-eye"></i> ${item.views}</small>
                            <small class="text-muted"><i class="fas fa-star"></i> ${item.rating || 'Not rated'}</small>
                        </div>
                    </div>
                `;
                
                // Add event listeners to action buttons
                const viewBtn = card.querySelector('.view-btn');
                const editBtn = card.querySelector('.edit-btn');
                const deleteBtn = card.querySelector('.delete-btn');
                
                viewBtn.addEventListener('click', () => viewContent(item.id));
                editBtn.addEventListener('click', () => editContent(item.id));
                deleteBtn.addEventListener('click', () => deleteContent(item.id));
                
                elements.contentGrid.appendChild(card);
            });
        }

        // View content
        function viewContent(contentId) {
            const content = state.contentItems.find(item => item.id === contentId);
            if (!content) return;
            
            document.getElementById('viewerTitle').textContent = content.title;
            
            // Simulate content display (in a real app, this would show actual content)
            const viewerContent = document.getElementById('viewerContent');
            viewerContent.innerHTML = `
                <p>This is a preview of the ${content.type} "${content.title}".</p>
                ${content.thumbnail ? `<img src="${content.thumbnail}" alt="${content.title}" class="img-fluid rounded">` : ''}
                ${content.url ? `<p class="mt-3"><a href="${content.url}" target="_blank">View original ${content.type}</a></p>` : ''}
            `;
            
            // Display tags
            const viewerTags = document.getElementById('viewerTags');
            viewerTags.innerHTML = content.tags.map(tag => `<span class="tag">#${tag}</span>`).join('');
            
            // Display notes
            const viewerNotes = document.getElementById('viewerNotes');
            viewerNotes.innerHTML = content.notes.map(note => `
                <div class="note-item">
                    <p>${note}</p>
                </div>
            `).join('');
            
            // Set up open original button
            document.getElementById('openOriginal').onclick = () => {
                if (content.url) {
                    window.open(content.url, '_blank');
                }
            };
            
            // Set up edit button
            document.getElementById('editContent').onclick = () => {
                hideModal('contentViewerModal');
                editContent(contentId);
            };
            
            // Set up note adding
            document.getElementById('addViewerNote').addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && e.target.value.trim()) {
                    addNoteToContent(contentId, e.target.value.trim());
                    e.target.value = '';
                    viewContent(contentId); // Refresh view
                    showToast('Note added successfully');
                }
            });
            
            // NEW: Set up rating stars
            const stars = document.querySelectorAll('.rating-star');
            stars.forEach((star, index) => {
                star.classList.toggle('active', index < (content.rating || 0));
                star.addEventListener('click', () => {
                    // Update rating in state
                    const contentIndex = state.contentItems.findIndex(item => item.id === contentId);
                    if (contentIndex !== -1) {
                        state.contentItems[contentIndex].rating = index + 1;
                        saveUserData();
                        showToast(`Rated ${content.title} ${index + 1} stars`);
                    }
                });
            });
            
            // Add reminder button to viewer
            const reminderBtn = document.createElement('button');
            reminderBtn.className = 'btn btn-outline-primary me-2';
            reminderBtn.innerHTML = '<i class="fas fa-bell"></i> Set Reminder';
            reminderBtn.addEventListener('click', () => {
                const date = new Date();
                date.setHours(date.getHours() + 1);
                reminderSystem.add(contentId, date, 'Review this content');
            });
            document.querySelector('.modal-footer').prepend(reminderBtn);
            
            // Add flashcard button to viewer
            const flashcardBtn = document.createElement('button');
            flashcardBtn.className = 'btn btn-outline-primary me-2';
            flashcardBtn.innerHTML = '<i class="fas fa-lightbulb"></i> Create Flashcards';
            flashcardBtn.addEventListener('click', () => {
                flashcardSystem.createFromContent(contentId);
            });
            document.querySelector('.modal-footer').prepend(flashcardBtn);
            
            showModal('contentViewerModal');
        }

        // Edit content
        function editContent(contentId) {
            const content = state.contentItems.find(item => item.id === contentId);
            if (!content) return;
            
            // Populate form with content data
            document.getElementById('contentTitle').value = content.title;
            document.getElementById('contentUrl').value = content.url || '';
            document.getElementById('contentType').value = content.type;
            document.getElementById('contentNotes').value = content.notes.join('\n\n');
            
            // Clear and repopulate tags
            const tagSuggestions = document.getElementById('tagSuggestions');
            tagSuggestions.innerHTML = '';
            content.tags.forEach(tag => {
                const tagElement = document.createElement('span');
                tagElement.className = 'tag-suggestion selected';
                tagElement.textContent = tag;
                tagElement.addEventListener('click', () => {
                    tagElement.classList.toggle('selected');
                });
                tagSuggestions.appendChild(tagElement);
            });
            
            // Set up save button
            document.getElementById('saveContent').onclick = () => {
                updateContent(contentId);
            };
            
            showModal('addContentModal');
        }

        // Save new content
        function saveNewContent() {
            const title = document.getElementById('contentTitle').value.trim();
            const url = document.getElementById('contentUrl').value.trim();
            const type = document.getElementById('contentType').value;
            const notes = document.getElementById('contentNotes').value.split('\n\n').filter(n => n.trim());
            
            // Get selected tags
            const selectedTags = Array.from(document.querySelectorAll('#tagSuggestions .selected')).map(el => el.textContent);
            
            if (!title) {
                showToast('Please enter a title', 'error');
                return;
            }
            
            const newContent = {
                id: Date.now(), // Simple ID generation
                title,
                type,
                url: url || undefined,
                tags: selectedTags,
                notes,
                dateAdded: new Date(),
                thumbnail: getThumbnailForType(type),
                views: 0,
                rating: 0,
                expiryDate: document.getElementById('contentExpiry')?.value || null,
                expiryStatus: 'upcoming',
                lastReviewed: null
            };
            
            state.contentItems.unshift(newContent); // Add to beginning of array
            updateStats();
            renderContentGrid();
            hideModal('addContentModal');
            
            // Add any new tags to global tags
            selectedTags.forEach(tag => {
                if (!state.tags.includes(tag)) {
                    state.tags.push(tag);
                }
            });
            
            renderTagSuggestions();
            saveUserData();
            showToast('Content saved successfully');
        }

        // Update existing content
        function updateContent(contentId) {
            const contentIndex = state.contentItems.findIndex(item => item.id === contentId);
            if (contentIndex === -1) return;
            
            const title = document.getElementById('contentTitle').value.trim();
            const url = document.getElementById('contentUrl').value.trim();
            const type = document.getElementById('contentType').value;
            const notes = document.getElementById('contentNotes').value.split('\n\n').filter(n => n.trim());
            
            // Get selected tags
            const selectedTags = Array.from(document.querySelectorAll('#tagSuggestions .selected')).map(el => el.textContent);
            
            if (!title) {
                showToast('Please enter a title', 'error');
                return;
            }
            
            // Update content
            state.contentItems[contentIndex] = {
                ...state.contentItems[contentIndex],
                title,
                type,
                url: url || undefined,
                tags: selectedTags,
                notes
            };
            
            updateStats();
            renderContentGrid();
            hideModal('addContentModal');
            
            // Add any new tags to global tags
            selectedTags.forEach(tag => {
                if (!state.tags.includes(tag)) {
                    state.tags.push(tag);
                }
            });
            
            renderTagSuggestions();
            saveUserData();
            showToast('Content updated successfully');
        }

        // Delete content
        function deleteContent(contentId) {
            if (confirm('Are you sure you want to delete this content item?')) {
                state.contentItems = state.contentItems.filter(item => item.id !== contentId);
                updateStats();
                renderContentGrid();
                saveUserData();
                showToast('Content deleted');
            }
        }

        // Add note to content
        function addNoteToContent(contentId, note) {
            const contentIndex = state.contentItems.findIndex(item => item.id === contentId);
            if (contentIndex === -1) return;
            
            state.contentItems[contentIndex].notes.push(note);
            saveUserData();
        }

        // Get thumbnail placeholder based on type
        function getThumbnailForType(type) {
            const colors = {
                video: '6C63FF',
                article: '4CAF50',
                podcast: 'FF6B6B',
                document: '78909C',
                website: 'FFB74D',
                image: '9C27B0',
                other: '607D8B'
            };
            
            const text = type.charAt(0).toUpperCase() + type.slice(1);
            return `https://via.placeholder.com/300x200/${colors[type] || '607D8B'}/FFFFFF?text=${encodeURIComponent(text)}`;
        }

        // Filter content by category
        function filterContentByCategory(category) {
            const cards = document.querySelectorAll('.content-card');
            
            cards.forEach(card => {
                if (category === 'all' || card.getAttribute('data-type') === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Search content
        function searchContent(query) {
            const normalizedQuery = query.toLowerCase().trim();
            
            if (!normalizedQuery) {
                document.querySelectorAll('.content-card').forEach(card => {
                    card.style.display = 'block';
                });
                return;
            }
            
            document.querySelectorAll('.content-card').forEach(card => {
                const title = card.querySelector('.card-title').textContent.toLowerCase();
                const tags = Array.from(card.querySelectorAll('.tag')).map(tag => tag.textContent.toLowerCase().substring(1));
                
                if (title.includes(normalizedQuery) || tags.some(tag => tag.includes(normalizedQuery))) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Render tag suggestions
        function renderTagSuggestions() {
            const tagSuggestions = document.getElementById('tagSuggestions');
            tagSuggestions.innerHTML = '';
            
            // Show popular tags first (in a real app, this would be based on usage)
            const popularTags = state.tags.slice(0, 8);
            
            popularTags.forEach(tag => {
                const tagElement = document.createElement('span');
                tagElement.className = 'tag-suggestion';
                tagElement.textContent = tag;
                tagElement.addEventListener('click', () => {
                    tagElement.classList.toggle('selected');
                });
                tagSuggestions.appendChild(tagElement);
            });
        }

        // Add tag to input
        function addTagToInput(tag) {
            const tagSuggestions = document.getElementById('tagSuggestions');
            
            // Check if tag already exists
            const existingTag = Array.from(tagSuggestions.children).find(el => el.textContent === tag);
            
            if (existingTag) {
                existingTag.classList.add('selected');
            } else {
                const tagElement = document.createElement('span');
                tagElement.className = 'tag-suggestion selected';
                tagElement.textContent = tag;
                tagElement.addEventListener('click', () => {
                    tagElement.classList.toggle('selected');
                });
                tagSuggestions.appendChild(tagElement);
            }
        }

        // Render tag list for management
        function renderTagList() {
            const tagList = document.getElementById('tagList');
            tagList.innerHTML = '';
            
            state.tags.forEach(tag => {
                const tagItem = document.createElement('div');
                tagItem.className = 'tag-item';
                tagItem.innerHTML = `
                    <span class="tag-name">${tag}</span>
                    <div class="tag-actions">
                        <button class="edit-tag" data-tag="${tag}"><i class="fas fa-edit"></i></button>
                        <button class="delete-tag" data-tag="${tag}"><i class="fas fa-trash"></i></button>
                    </div>
                `;
                
                tagList.appendChild(tagItem);
            });
            
            // Add event listeners to tag actions
            document.querySelectorAll('.edit-tag').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const tag = e.target.closest('button').getAttribute('data-tag');
                    editTag(tag);
                });
            });
            
            document.querySelectorAll('.delete-tag').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const tag = e.target.closest('button').getAttribute('data-tag');
                    deleteTag(tag);
                });
            });
        }

        // Add new tag
        function addNewTag(tag) {
            if (!state.tags.includes(tag)) {
                state.tags.push(tag);
                renderTagList();
                saveUserData();
                showToast('Tag added successfully');
            }
        }

        // Edit tag
        function editTag(oldTag) {
            const newTag = prompt('Edit tag:', oldTag);
            
            if (newTag && newTag.trim() && newTag !== oldTag) {
                const trimmedTag = newTag.trim();
                
                // Update in tags list
                const tagIndex = state.tags.indexOf(oldTag);
                if (tagIndex !== -1) {
                    state.tags[tagIndex] = trimmedTag;
                }
                
                // Update in all content items
                state.contentItems.forEach(item => {
                    const tagPos = item.tags.indexOf(oldTag);
                    if (tagPos !== -1) {
                        item.tags[tagPos] = trimmedTag;
                    }
                });
                
                renderTagList();
                renderContentGrid();
                renderTagSuggestions();
                saveUserData();
                showToast('Tag updated successfully');
            }
        }

        // Delete tag
        function deleteTag(tag) {
            if (confirm(`Delete tag "${tag}"? This will remove it from all content items.`)) {
                // Remove from tags list
                state.tags = state.tags.filter(t => t !== tag);
                
                // Remove from all content items
                state.contentItems.forEach(item => {
                    item.tags = item.tags.filter(t => t !== tag);
                });
                
                renderTagList();
                renderContentGrid();
                renderTagSuggestions();
                updateStats();
                saveUserData();
                showToast('Tag deleted');
            }
        }

        // Save tag changes
        function saveTagChanges() {
            hideModal('tagManagerModal');
            showToast('Tags saved successfully');
        }

        // Show flashcard
        function showFlashcard(index) {
            if (state.flashcards.length === 0) {
                elements.flashcardFront.innerHTML = '<h3>No flashcards available</h3>';
                elements.flashcardBack.innerHTML = '<p>Add flashcards to content items</p>';
                return;
            }
            
            if (index < 0) index = state.flashcards.length - 1;
            if (index >= state.flashcards.length) index = 0;
            
            state.currentFlashcardIndex = index;
            state.isCardFlipped = false;
            
            const flashcard = state.flashcards[index];
            elements.flashcardFront.innerHTML = `<h3>${flashcard.question}</h3>`;
            elements.flashcardBack.innerHTML = `<p>${flashcard.answer}</p>`;
            elements.flashcardBack.style.display = 'none';
            elements.flashcardFront.style.display = 'flex';
            
            // Update progress
            const progress = ((index + 1) / state.flashcards.length) * 100;
            elements.flashcardProgress.style.width = `${progress}%`;
        }

        // Flip flashcard
        function flipFlashcard() {
            state.isCardFlipped = !state.isCardFlipped;
            
            if (state.isCardFlipped) {
                elements.flashcardFront.style.display = 'none';
                elements.flashcardBack.style.display = 'flex';
            } else {
                elements.flashcardFront.style.display = 'flex';
                elements.flashcardBack.style.display = 'none';
            }
        }

        // Show previous flashcard
        function showPreviousFlashcard() {
            showFlashcard(state.currentFlashcardIndex - 1);
        }

        // Show next flashcard
        function showNextFlashcard() {
            showFlashcard(state.currentFlashcardIndex + 1);
        }

        // Handle login
        function handleLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            // Simple validation
            if (!email || !password) {
                showToast('Please enter both email and password', 'error');
                return;
            }
            
            // In a real app, this would validate against a server
            const userData = {
                name: email.split('@')[0],
                email: email,
                plan: 'pro'
            };
            
            // Save user data
            state.currentUser = userData;
            
            // Load sample data if no data exists
            if (state.contentItems.length === 0) {
                loadSampleData();
            }
            
            // Save to localStorage
            saveUserData();
            
            // Update UI
            elements.userName.textContent = userData.name;
            hideModal('loginModal');
            showDashboard();
            showToast('Logged in successfully');
        }

        // Handle signup
        function handleSignup(e) {
            e.preventDefault();
            
            const name = document.getElementById('signupName').value.trim();
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirm').value;
            
            // Simple validation
            if (!name || !email || !password || !confirmPassword) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showToast('Passwords do not match', 'error');
                return;
            }
            
            if (password.length < 8) {
                showToast('Password must be at least 8 characters', 'error');
                return;
            }
            
            // In a real app, this would create an account on a server
            const userData = {
                name: name,
                email: email,
                plan: 'free'
            };
            
            // Save user data
            state.currentUser = userData;
            
            // Load sample data
            loadSampleData();
            
            // Save to localStorage
            saveUserData();
            
            // Update UI
            elements.userName.textContent = userData.name;
            hideModal('signupModal');
            showDashboard();
            showToast('Account created successfully');
        }

        // Logout
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                state.currentUser = null;
                localStorage.removeItem('tagzs_user');
                showHomePage();
                showToast('Logged out successfully');
            }
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);

        // Enhanced Flashcard System
        const flashcardSystem = {
            cards: [],
            decks: {},
            currentIndex: 0,
            isFlipped: false,
            currentDeck: null,
            
            init() {
                try {
                    this.cards = state.flashcards || [];
                    this.organizeDecksByCategory();
                    
                    // Initialize stats
                    this.updateStats();
                    
                    // Add keyboard navigation
                    document.addEventListener('keydown', (e) => {
                        if (document.getElementById('flashcardModal').style.display === 'block') {
                            switch(e.key) {
                                case 'ArrowLeft': this.prev(); break;
                                case 'ArrowRight': this.next(); break;
                                case ' ': this.flip(); e.preventDefault(); break;
                            }
                        }
                    });

                    this.setupEventListeners();
                    this.render();
                } catch (error) {
                    console.error('Error initializing flashcard system:', error);
                    showToast('Error initializing flashcard system', 'error');
                }
            },
            
            setupEventListeners() {
                try {
                    // Safely add event listeners with error checking
                    const addSafeListener = (id, event, handler) => {
                        const element = document.getElementById(id);
                        if (element) {
                            element.addEventListener(event, handler);
                        } else {
                            console.warn(`Element with id '${id}' not found`);
                        }
                    };

                    // Flashcard creation
                    addSafeListener('createFlashcardBtn', 'click', () => {
                        showModal('createFlashcardModal');
                        this.resetCreateForm();
                    });

                    addSafeListener('closeCreateFlashcardModal', 'click', () => {
                        hideModal('createFlashcardModal');
                    });

                    addSafeListener('cancelCreateFlashcard', 'click', () => {
                        hideModal('createFlashcardModal');
                    });

                    addSafeListener('saveFlashcard', 'click', () => this.saveNewFlashcard());

                    // Flashcard navigation
                    addSafeListener('flipCard', 'click', () => this.flip());
                    addSafeListener('prevCard', 'click', () => this.prev());
                    addSafeListener('nextCard', 'click', () => this.next());
                    addSafeListener('togglePreview', 'click', () => {
                        const previewCard = document.querySelector('.preview-card');
                        if (previewCard) {
                            previewCard.classList.toggle('flipped');
                        }
                    });

                    // Text formatting
                    document.querySelectorAll('.formatting-tools button').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            e.preventDefault();
                            const format = e.currentTarget.getAttribute('data-format');
                            const textarea = e.currentTarget.closest('.form-group')?.querySelector('textarea');
                            if (textarea) {
                                this.applyFormatting(format, textarea);
                            }
                        });
                    });

                    // Form input listeners
                    ['flashcardQuestion', 'flashcardAnswer', 'cardBgColor', 'cardTextColor', 'cardFont'].forEach(id => {
                        addSafeListener(id, 'input', () => this.updatePreview());
                    });

                    // Image upload
                    const imageUpload = document.getElementById('imageUpload');
                    if (imageUpload) {
                        imageUpload.addEventListener('change', (e) => this.handleImageUpload(e));
                    }

                } catch (error) {
                    console.error('Error setting up event listeners:', error);
                    showToast('Error setting up flashcard controls', 'error');
                }
            },
            
            resetCreateForm() {
                try {
                    // Reset all form inputs
                    const elements = {
                        question: document.getElementById('flashcardQuestion'),
                        answer: document.getElementById('flashcardAnswer'),
                        tags: document.getElementById('flashcardTags'),
                        category: document.getElementById('flashcardCategory'),
                        bgColor: document.getElementById('cardBgColor'),
                        textColor: document.getElementById('cardTextColor'),
                        font: document.getElementById('cardFont')
                    };

                    // Reset text inputs
                    if (elements.question) elements.question.value = '';
                    if (elements.answer) elements.answer.value = '';
                    if (elements.tags) elements.tags.value = '';
                    
                    // Reset select
                    if (elements.category) elements.category.selectedIndex = 0;
                    
                    // Reset colors
                    if (elements.bgColor) elements.bgColor.value = '#ffffff';
                    if (elements.textColor) elements.textColor.value = '#000000';
                    
                    // Reset font
                    if (elements.font) elements.font.value = 'Inter';

                    // Reset preview
                    this.updatePreview();
                } catch (error) {
                    console.error('Error resetting create form:', error);
                }
            },
            
            updateStats() {
                try {
                    const stats = {
                        total: this.cards.length,
                        mastered: this.cards.filter(card => card.difficulty === 'easy').length,
                        streak: this.calculateStreak()
                    };

                    // Update stats display
                    const elements = {
                        total: document.getElementById('totalFlashcards'),
                        mastered: document.getElementById('masteredCards'),
                        streak: document.getElementById('studyStreak')
                    };

                    if (elements.total) elements.total.textContent = stats.total;
                    if (elements.mastered) elements.mastered.textContent = stats.mastered;
                    if (elements.streak) elements.streak.textContent = stats.streak;
                } catch (error) {
                    console.error('Error updating stats:', error);
                }
            },
            
            calculateStreak() {
                try {
                    const today = new Date().toDateString();
                    const lastStudy = localStorage.getItem('lastStudyDate');
                    const currentStreak = parseInt(localStorage.getItem('studyStreak')) || 0;

                    if (lastStudy === today) {
                        return currentStreak;
                    }

                    const yesterday = new Date();
                    yesterday.setDate(yesterday.getDate() - 1);
                    
                    if (lastStudy === yesterday.toDateString()) {
                        const newStreak = currentStreak + 1;
                        localStorage.setItem('studyStreak', newStreak);
                        return newStreak;
                    }

                    localStorage.setItem('studyStreak', '0');
                    return 0;
                } catch (error) {
                    console.error('Error calculating streak:', error);
                    return 0;
                }
            },
            
            flip() {
                try {
                    this.isFlipped = !this.isFlipped;
                    const flashcard = document.querySelector('.flashcard');
                    if (flashcard) {
                        flashcard.classList.toggle('flipped');
                    }

                    if (!this.isFlipped) {
                        // Update study progress when card is flipped back
                        const currentDeckCards = this.currentDeck ? this.decks[this.currentDeck] : this.cards;
                        if (currentDeckCards && currentDeckCards[this.currentIndex]) {
                            const card = currentDeckCards[this.currentIndex];
                            card.lastStudied = new Date();
                            card.studyCount = (card.studyCount || 0) + 1;
                            localStorage.setItem('lastStudyDate', new Date().toDateString());
                            saveUserData();
                        }
                    }
                } catch (error) {
                    console.error('Error flipping card:', error);
                    showToast('Error flipping card', 'error');
                }
            },
            
            applyFormatting(format, textarea) {
                const start = textarea.selectionStart;
                const end = textarea.selectionEnd;
                const text = textarea.value;
                let formattedText = '';
                
                switch(format) {
                    case 'bold':
                        formattedText = `**${text.substring(start, end)}**`;
                        break;
                    case 'italic':
                        formattedText = `*${text.substring(start, end)}*`;
                        break;
                    case 'underline':
                        formattedText = `_${text.substring(start, end)}_`;
                        break;
                    case 'list':
                        formattedText = `\n- ${text.substring(start, end)}`;
                        break;
                }
                
                textarea.value = text.substring(0, start) + formattedText + text.substring(end);
                this.updatePreview();
            },
            
            async handleImageUpload(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                try {
                    const base64 = await this.getBase64(file);
                    const imgTag = `\n![${file.name}](${base64})\n`;
                    const textarea = event.target.closest('.form-group').querySelector('textarea');
                    textarea.value += imgTag;
                    this.updatePreview();
                } catch (error) {
                    showToast('Error uploading image', 'error');
                }
            },
            
            getBase64(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.readAsDataURL(file);
                    reader.onload = () => resolve(reader.result);
                    reader.onerror = error => reject(error);
                });
            },
            
            updatePreview() {
                const question = document.getElementById('flashcardQuestion').value;
                const answer = document.getElementById('flashcardAnswer').value;
                const bgColor = document.getElementById('cardBgColor').value;
                const textColor = document.getElementById('cardTextColor').value;
                const font = document.getElementById('cardFont').value;
                
                const previewFront = document.getElementById('previewFront');
                const previewBack = document.getElementById('previewBack');
                
                // Apply styles
                [previewFront, previewBack].forEach(el => {
                    el.style.backgroundColor = bgColor;
                    el.style.color = textColor;
                    el.style.fontFamily = font;
                });
                
                // Convert markdown to HTML (simple version)
                previewFront.innerHTML = this.markdownToHtml(question);
                previewBack.innerHTML = this.markdownToHtml(answer);
            },
            
            markdownToHtml(text) {
                if (!text) return '';
                return text
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                    .replace(/_(.*?)_/g, '<u>$1</u>')
                    .replace(/\n- (.*)/g, '<br>• $1')
                    .replace(/!\[(.*?)\]\((.*?)\)/g, '<img src="$2" alt="$1" style="max-width: 100%; height: auto;">');
            },
            
            saveNewFlashcard() {
                const question = document.getElementById('flashcardQuestion').value.trim();
                const answer = document.getElementById('flashcardAnswer').value.trim();
                const tags = document.getElementById('flashcardTags').value.split(',').map(tag => tag.trim());
                const category = document.getElementById('flashcardCategory').value;
                
                if (!question || !answer) {
                    showToast('Please fill in both question and answer', 'error');
                    return;
                }
                
                const newCard = {
                    id: Date.now(),
                    question,
                    answer,
                    tags,
                    category,
                    created: new Date(),
                    style: {
                        backgroundColor: document.getElementById('cardBgColor').value,
                        textColor: document.getElementById('cardTextColor').value,
                        font: document.getElementById('cardFont').value
                    }
                };
                
                this.cards.push(newCard);
                this.organizeDecksByCategory();
                state.flashcards = this.cards;
                saveUserData();
                
                hideModal('createFlashcardModal');
                showToast('Flashcard created successfully');
                this.render();
            },
            
            organizeDecksByCategory() {
                this.decks = this.cards.reduce((acc, card) => {
                    const category = card.category || 'Uncategorized';
                    if (!acc[category]) acc[category] = [];
                    acc[category].push(card);
                    return acc;
                }, {});
            },
            
            selectDeck(category) {
                this.currentDeck = category;
                this.currentIndex = 0;
                this.render();
            },
            
            render() {
                // Render deck selector
                const deckSelector = document.querySelector('.deck-selector');
                if (deckSelector) {
                    deckSelector.innerHTML = Object.keys(this.decks).map(category => `
                        <div class="deck-item ${this.currentDeck === category ? 'active' : ''}"
                             onclick="flashcardSystem.selectDeck('${category}')">
                            ${category} (${this.decks[category].length})
                        </div>
                    `).join('');
                }
                
                // Render current flashcard
                this.renderCurrentCard();
            },
            
            renderCurrentCard() {
                const currentDeckCards = this.currentDeck ? this.decks[this.currentDeck] : this.cards;
                
                if (currentDeckCards.length === 0) {
                    elements.flashcardFront.innerHTML = '<h3>No flashcards available</h3>';
                    elements.flashcardBack.innerHTML = '<p>Create some flashcards to start studying!</p>';
                    return;
                }
                
                const card = currentDeckCards[this.currentIndex];
                
                // Apply custom styles
                elements.flashcardFront.style.backgroundColor = card.style?.backgroundColor || '#ffffff';
                elements.flashcardFront.style.color = card.style?.textColor || '#000000';
                elements.flashcardFront.style.fontFamily = card.style?.font || 'Inter';
                
                elements.flashcardBack.style.backgroundColor = card.style?.backgroundColor || '#ffffff';
                elements.flashcardBack.style.color = card.style?.textColor || '#000000';
                elements.flashcardBack.style.fontFamily = card.style?.font || 'Inter';
                
                elements.flashcardFront.innerHTML = `
                    ${this.markdownToHtml(card.question)}
                    <div class="mt-3">
                        <small class="text-muted">Card ${this.currentIndex + 1} of ${currentDeckCards.length}</small>
                        ${card.tags.length > 0 ? `<div class="tag-cloud mt-2">${card.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}</div>` : ''}
                    </div>
                `;
                
                elements.flashcardBack.innerHTML = `
                    ${this.markdownToHtml(card.answer)}
                    <div class="mt-3">
                        <div class="btn-group">
                            <button class="btn btn-sm btn-outline-light" onclick="flashcardSystem.markDifficulty('easy')">Easy</button>
                            <button class="btn btn-sm btn-outline-light" onclick="flashcardSystem.markDifficulty('medium')">Medium</button>
                            <button class="btn btn-sm btn-outline-light" onclick="flashcardSystem.markDifficulty('hard')">Hard</button>
                        </div>
                    </div>
                `;
                
                // Update progress
                const progress = ((this.currentIndex + 1) / currentDeckCards.length) * 100;
                elements.flashcardProgress.style.width = `${progress}%`;
            },

            next() {
                try {
                    const currentDeckCards = this.currentDeck ? this.decks[this.currentDeck] : this.cards;
                    if (currentDeckCards.length === 0) return;
                    
                    this.currentIndex = (this.currentIndex + 1) % currentDeckCards.length;
                    this.isFlipped = false;
                    this.render();
                } catch (error) {
                    console.error('Error moving to next card:', error);
                    showToast('Error moving to next card', 'error');
                }
            },

            prev() {
                try {
                    const currentDeckCards = this.currentDeck ? this.decks[this.currentDeck] : this.cards;
                    if (currentDeckCards.length === 0) return;
                    
                    this.currentIndex = (this.currentIndex - 1 + currentDeckCards.length) % currentDeckCards.length;
                    this.isFlipped = false;
                    this.render();
                } catch (error) {
                    console.error('Error moving to previous card:', error);
                    showToast('Error moving to previous card', 'error');
                }
            },

            markDifficulty(level) {
                try {
                    const currentDeckCards = this.currentDeck ? this.decks[this.currentDeck] : this.cards;
                    if (currentDeckCards.length === 0) return;

                    const card = currentDeckCards[this.currentIndex];
                    card.difficulty = level;
                    card.nextReview = this.calculateNextReview(level);
                    card.lastStudied = new Date();
                    
                    saveUserData();
                    this.updateStats();
                    
                    showToast(`Marked as ${level}. Next review: ${card.nextReview.toLocaleDateString()}`);
                    this.next();
                } catch (error) {
                    console.error('Error marking card difficulty:', error);
                    showToast('Error updating card progress', 'error');
                }
            },

            calculateNextReview(difficulty) {
                try {
                    const now = new Date();
                    switch(difficulty) {
                        case 'easy': return new Date(now.setDate(now.getDate() + 7));
                        case 'medium': return new Date(now.setDate(now.getDate() + 3));
                        case 'hard': return new Date(now.setDate(now.getDate() + 1));
                        default: return new Date(now.setDate(now.getDate() + 3));
                    }
                } catch (error) {
                    console.error('Error calculating next review:', error);
                    return new Date();
                }
            },

            saveNewFlashcard() {
                try {
                    const question = document.getElementById('flashcardQuestion')?.value.trim();
                    const answer = document.getElementById('flashcardAnswer')?.value.trim();
                    const tags = document.getElementById('flashcardTags')?.value.split(',').map(tag => tag.trim()).filter(Boolean);
                    const category = document.getElementById('flashcardCategory')?.value;

                    if (!question || !answer) {
                        showToast('Please fill in both question and answer', 'error');
                        return;
                    }

                    const newCard = {
                        id: Date.now(),
                        question,
                        answer,
                        tags: tags || [],
                        category: category || 'Uncategorized',
                        created: new Date(),
                        style: {
                            backgroundColor: document.getElementById('cardBgColor')?.value || '#ffffff',
                            textColor: document.getElementById('cardTextColor')?.value || '#000000',
                            font: document.getElementById('cardFont')?.value || 'Inter'
                        }
                    };

                    this.cards.push(newCard);
                    this.organizeDecksByCategory();
                    state.flashcards = this.cards;
                    saveUserData();
                    this.updateStats();

                    hideModal('createFlashcardModal');
                    showToast('Flashcard created successfully');
                    this.render();
                } catch (error) {
                    console.error('Error saving new flashcard:', error);
                    showToast('Error creating flashcard', 'error');
                }
            },

            organizeDecksByCategory() {
                try {
                    this.decks = this.cards.reduce((acc, card) => {
                        const category = card.category || 'Uncategorized';
                        if (!acc[category]) acc[category] = [];
                        acc[category].push(card);
                        return acc;
                    }, {});
                } catch (error) {
                    console.error('Error organizing decks:', error);
                    this.decks = { 'Uncategorized': this.cards };
                }
            },

            render() {
                try {
                    // Render deck selector
                    const deckSelector = document.querySelector('.deck-selector');
                    if (deckSelector) {
                        deckSelector.innerHTML = Object.keys(this.decks).map(category => `
                            <div class="deck-item ${this.currentDeck === category ? 'active' : ''}"
                                 onclick="flashcardSystem.selectDeck('${category}')">
                                ${category} (${this.decks[category].length})
                            </div>
                        `).join('');
                    }

                    this.renderCurrentCard();
                    this.updateStats();
                } catch (error) {
                    console.error('Error rendering flashcards:', error);
                    showToast('Error displaying flashcards', 'error');
                }
            }
        };

        // Enhanced Reminder System
        const reminderSystem = {
            reminders: [],
            currentFilter: 'all',
            
            init() {
                try {
                    this.reminders = state.reminders || [];
                    this.setupEventListeners();
                    this.checkReminders();
                    
                    // Set up periodic reminder checks
                    setInterval(() => this.checkReminders(), 60000);
                    
                    // Initialize form with current date/time
                    const now = new Date();
                    const dateInput = document.getElementById('reminderDate');
                    const timeInput = document.getElementById('reminderTime');
                    
                    if (dateInput) {
                        dateInput.value = now.toISOString().split('T')[0];
                    }
                    if (timeInput) {
                        timeInput.value = now.toTimeString().slice(0, 5);
                    }

                    // Request notification permission
                    if ('Notification' in window) {
                        Notification.requestPermission();
                    }

                    console.log('Reminder system initialized successfully');
                } catch (error) {
                    console.error('Error initializing reminder system:', error);
                    showToast('Error initializing reminder system', 'error');
                }
            },
            
            setupEventListeners() {
                try {
                    // Modal controls
                    document.getElementById('closeReminderModal')?.addEventListener('click', () => {
                        this.hideReminderModal();
                    });
                    
                    document.getElementById('closeRemindersListModal')?.addEventListener('click', () => {
                        this.hideRemindersListModal();
                    });
                    
                    document.getElementById('saveReminder')?.addEventListener('click', () => {
                        this.saveReminder();
                    });
                    
                    document.getElementById('cancelReminder')?.addEventListener('click', () => {
                        this.hideReminderModal();
                    });
                    
                    // Priority buttons
                    document.querySelectorAll('.priority-btn').forEach(btn => {
                        btn.addEventListener('click', () => {
                            document.querySelectorAll('.priority-btn').forEach(b => b.classList.remove('active'));
                            btn.classList.add('active');
                        });
                    });
                    
                    // Filter buttons
                    document.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.addEventListener('click', () => {
                            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                            btn.classList.add('active');
                            this.filterReminders(btn.dataset.filter);
                        });
                    });

                    // Add keyboard shortcuts
                    document.addEventListener('keydown', (e) => {
                        if (e.ctrlKey && e.key === 'r') {
                            e.preventDefault();
                            this.showRemindersListModal();
                        }
                    });
                    
                    console.log('Reminder event listeners set up successfully');
                } catch (error) {
                    console.error('Error setting up reminder event listeners:', error);
                }
            },

            updateReminderCount() {
                const upcomingCount = this.reminders.filter(r => r.status === 'upcoming').length;
                const badge = document.getElementById('reminderCount');
                if (badge) {
                    badge.textContent = upcomingCount;
                    badge.style.display = upcomingCount > 0 ? 'block' : 'none';
                }
            },

            showReminderModal() {
                const modal = document.getElementById('reminderModal');
                if (modal) {
                    modal.style.display = 'block';
                    document.body.style.overflow = 'hidden';
                    
                    // Initialize with current date/time
                    const now = new Date();
                    const dateInput = document.getElementById('reminderDate');
                    const timeInput = document.getElementById('reminderTime');
                    
                    if (dateInput) dateInput.value = now.toISOString().split('T')[0];
                    if (timeInput) timeInput.value = now.toTimeString().slice(0, 5);
                }
            },

            hideReminderModal() {
                const modal = document.getElementById('reminderModal');
                if (modal) {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            },

            showRemindersListModal() {
                const modal = document.getElementById('remindersListModal');
                if (modal) {
                    modal.style.display = 'block';
                    document.body.style.overflow = 'hidden';
                    this.renderReminders();
                }
            },

            hideRemindersListModal() {
                const modal = document.getElementById('remindersListModal');
                if (modal) {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            },

            async saveReminder() {
                try {
                    const title = document.getElementById('reminderTitle')?.value.trim();
                    const type = document.getElementById('reminderType')?.value;
                    const date = document.getElementById('reminderDate')?.value;
                    const time = document.getElementById('reminderTime')?.value;
                    const repeat = document.getElementById('reminderRepeat')?.value;
                    const notes = document.getElementById('reminderNotes')?.value.trim();
                    const priority = document.querySelector('.priority-btn.active')?.dataset.priority || 'medium';

                    if (!title || !date || !time) {
                        showToast('Please fill in all required fields', 'error');
                        return;
                    }

                    const reminder = {
                        id: Date.now(),
                        title,
                        type,
                        datetime: new Date(`${date}T${time}`),
                        repeat,
                        notes,
                        priority,
                        status: 'upcoming',
                        created: new Date(),
                        lastNotified: null
                    };

                    this.reminders.push(reminder);
                    state.reminders = this.reminders;
                    saveUserData();

                    await this.scheduleReminder(reminder);
                    this.hideReminderModal();
                    this.renderReminders();
                    this.updateReminderCount();
                    showToast('Reminder set successfully');

                } catch (error) {
                    console.error('Error saving reminder:', error);
                    showToast('Error saving reminder', 'error');
                }
            },

            async scheduleReminder(reminder) {
                if ('Notification' in window && Notification.permission === 'granted') {
                    const now = new Date();
                    const reminderTime = new Date(reminder.datetime);
                    const timeUntilReminder = reminderTime - now;

                    if (timeUntilReminder > 0) {
                        setTimeout(() => {
                            this.triggerReminder(reminder);
                        }, timeUntilReminder);
                    }
                }
            },

            async triggerReminder(reminder) {
                try {
                    // Show notification
                    if ('Notification' in window && Notification.permission === 'granted') {
                        const notification = new Notification(reminder.title, {
                            body: reminder.notes || 'Time for your scheduled activity!',
                            icon: '/favicon.ico',
                            badge: '/favicon.ico',
                            tag: reminder.id
                        });

                        notification.onclick = () => {
                            window.focus();
                            this.showRemindersListModal();
                        };
                    }

                    // Update reminder status
                    reminder.lastNotified = new Date();
                    reminder.status = 'completed';

                    // Handle repeating reminders
                    if (reminder.repeat !== 'none') {
                        this.scheduleNextReminder(reminder);
                    }

                    // Save changes
                    saveUserData();
                    this.renderReminders();

                } catch (error) {
                    console.error('Error triggering reminder:', error);
                }
            },

            scheduleNextReminder(reminder) {
                const nextDate = new Date(reminder.datetime);
                
                switch (reminder.repeat) {
                    case 'daily':
                        nextDate.setDate(nextDate.getDate() + 1);
                        break;
                    case 'weekly':
                        nextDate.setDate(nextDate.getDate() + 7);
                        break;
                    case 'monthly':
                        nextDate.setMonth(nextDate.getMonth() + 1);
                        break;
                }

                const newReminder = {
                    ...reminder,
                    id: Date.now(),
                    datetime: nextDate,
                    status: 'upcoming',
                    lastNotified: null
                };

                this.reminders.push(newReminder);
                this.scheduleReminder(newReminder);
            },

            checkReminders() {
                const now = new Date();
                this.reminders.forEach(reminder => {
                    const reminderTime = new Date(reminder.datetime);
                    
                    if (reminder.status === 'upcoming') {
                        if (reminderTime < now) {
                            if (reminderTime.getDate() === now.getDate()) {
                                this.triggerReminder(reminder);
                            } else {
                                reminder.status = 'missed';
                                saveUserData();
                            }
                        }
                    }
                });
                
                this.renderReminders();
            },

            filterReminders(filter) {
                this.currentFilter = filter;
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.filter === filter);
                });
                this.renderReminders();
            },

            renderReminders() {
                const container = document.getElementById('remindersList');
                if (!container) return;

                const filteredReminders = this.getFilteredReminders();
                
                container.innerHTML = filteredReminders.length ? filteredReminders.map(reminder => `
                    <div class="reminder-item" data-id="${reminder.id}">
                        <div class="reminder-info">
                            <div class="reminder-title">${reminder.title}</div>
                            <div class="reminder-meta">
                                <span class="reminder-status status-${reminder.status}">${reminder.status}</span>
                                <span class="mx-2">•</span>
                                <span>${new Date(reminder.datetime).toLocaleString()}</span>
                                ${reminder.repeat !== 'none' ? `<span class="mx-2">•</span><span><i class="fas fa-sync"></i> ${reminder.repeat}</span>` : ''}
                            </div>
                        </div>
                        <div class="reminder-actions">
                            <button onclick="reminderSystem.editReminder(${reminder.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="reminderSystem.deleteReminder(${reminder.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `).join('') : '<div class="text-center p-4">No reminders found</div>';
            },

            getFilteredReminders() {
                let reminders = [...this.reminders];
                
                switch (this.currentFilter) {
                    case 'upcoming':
                        reminders = reminders.filter(r => r.status === 'upcoming');
                        break;
                    case 'completed':
                        reminders = reminders.filter(r => r.status === 'completed');
                        break;
                    case 'missed':
                        reminders = reminders.filter(r => r.status === 'missed');
                        break;
                }

                return reminders.sort((a, b) => new Date(a.datetime) - new Date(b.datetime));
            },

            editReminder(id) {
                const reminder = this.reminders.find(r => r.id === id);
                if (!reminder) return;

                // Populate form
                document.getElementById('reminderTitle').value = reminder.title;
                document.getElementById('reminderType').value = reminder.type;
                document.getElementById('reminderDate').value = new Date(reminder.datetime).toISOString().split('T')[0];
                document.getElementById('reminderTime').value = new Date(reminder.datetime).toTimeString().slice(0, 5);
                document.getElementById('reminderRepeat').value = reminder.repeat;
                document.getElementById('reminderNotes').value = reminder.notes;

                document.querySelectorAll('.priority-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.priority === reminder.priority);
                });

                // Show modal
                this.showReminderModal();
            },

            deleteReminder(id) {
                if (confirm('Are you sure you want to delete this reminder?')) {
                    this.reminders = this.reminders.filter(r => r.id !== id);
                    state.reminders = this.reminders;
                    saveUserData();
                    this.renderReminders();
                    showToast('Reminder deleted');
                }
            },

            requestNotificationPermission() {
                if ('Notification' in window) {
                    Notification.requestPermission();
                }
            }
        };

        // Enhanced AI Assistant
        const aiAssistant = {
            isActive: false,
            messageHistory: [],
            context: {
                lastContent: null,
                lastAction: null,
                suggestions: []
            },

            init() {
                try {
                    this.messageHistory = state.aiMessages || [];
                    this.setupEventListeners();
                    this.render();
                    this.addWelcomeMessage();
                } catch (error) {
                    console.error('Error initializing AI Assistant:', error);
                }
            },

            setupEventListeners() {
                // Toggle AI Assistant
                const aiButton = document.getElementById('aiAssistant');
                if (aiButton) {
                    aiButton.addEventListener('click', () => this.toggle());
                }

                // Chat input handling
                const chatInput = document.getElementById('aiChatInput');
                if (chatInput) {
                    chatInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter' && e.target.value.trim()) {
                            this.sendMessage(e.target.value.trim());
                            e.target.value = '';
                        }
                    });
                }

                // Close button
                const closeButton = document.getElementById('closeAIChat');
                if (closeButton) {
                    closeButton.addEventListener('click', () => this.toggle());
                }
            },

            toggle() {
                this.isActive = !this.isActive;
                const chat = document.getElementById('aiAssistantChat');
                if (chat) {
                    chat.classList.toggle('active', this.isActive);
                    if (this.isActive) {
                        document.getElementById('aiChatInput')?.focus();
                    }
                }
            },

            addWelcomeMessage() {
                const welcomeMessage = {
                    role: 'assistant',
                    content: 'Hi! I\'m your AI assistant. I can help you with:\n' +
                            '• Creating and organizing flashcards\n' +
                            '• Finding and tagging content\n' +
                            '• Setting up study reminders\n' +
                            '• Analyzing your learning progress\n' +
                            '\nWhat would you like help with?',
                    timestamp: new Date()
                };
                this.messageHistory.push(welcomeMessage);
                this.render();
            },

            async sendMessage(message) {
                try {
                    // Add user message
                    this.messageHistory.push({
                        role: 'user',
                        content: message,
                        timestamp: new Date()
                    });
                    this.render();

                    // Show typing indicator
                    this.showTypingIndicator();

                    // Process message and generate response
                    const response = await this.processMessage(message);
                    
                    // Remove typing indicator and add AI response
                    this.hideTypingIndicator();
                    this.messageHistory.push({
                        role: 'assistant',
                        content: response.message,
                        timestamp: new Date(),
                        suggestions: response.suggestions
                    });

                    // Execute any actions
                    if (response.action) {
                        await this.executeAction(response.action);
                    }

                    // Save chat history and render
                    state.aiMessages = this.messageHistory;
                    saveUserData();
                    this.render();

                } catch (error) {
                    console.error('Error sending message:', error);
                    this.hideTypingIndicator();
                    this.addErrorMessage();
                }
            },

            async processMessage(message) {
                const lowerMessage = message.toLowerCase();
                
                // Define response patterns
                const patterns = {
                    flashcard: {
                        keywords: ['flashcard', 'card', 'study', 'remember'],
                        response: {
                            message: 'I can help you create flashcards. Would you like to:\n' +
                                    '1. Create a new flashcard\n' +
                                    '2. Generate flashcards from existing content\n' +
                                    '3. Get study recommendations',
                            suggestions: ['Create flashcard', 'Generate from content', 'Study tips'],
                            action: 'SUGGEST_FLASHCARDS'
                        }
                    },
                    reminder: {
                        keywords: ['remind', 'reminder', 'schedule', 'when'],
                        response: {
                            message: 'I can help you set reminders. What would you like to be reminded about?',
                            suggestions: ['Study reminder', 'Review reminder', 'Custom reminder'],
                            action: 'SHOW_REMINDER_DIALOG'
                        }
                    },
                    tag: {
                        keywords: ['tag', 'organize', 'find', 'search'],
                        response: {
                            message: 'I can help you organize your content with tags. Here are some popular tags in your collection:\n' +
                                    state.tags.slice(0, 5).join(', '),
                            suggestions: ['Add tags', 'Find content', 'Organize library'],
                            action: 'SHOW_TAG_SUGGESTIONS'
                        }
                    },
                    progress: {
                        keywords: ['progress', 'stats', 'statistics', 'learning'],
                        response: {
                            message: 'Here\'s a summary of your learning progress:\n' +
                                    `• Total flashcards: ${state.flashcards.length}\n` +
                                    `• Study streak: ${localStorage.getItem('studyStreak') || 0} days\n` +
                                    `• Recent activity: ${this.getRecentActivitySummary()}`,
                            suggestions: ['View details', 'Study now', 'Set goals'],
                            action: 'SHOW_PROGRESS'
                        }
                    }
                };

                // Find matching pattern
                for (const [key, pattern] of Object.entries(patterns)) {
                    if (pattern.keywords.some(keyword => lowerMessage.includes(keyword))) {
                        return pattern.response;
                    }
                }

                // Default response
                return {
                    message: 'I can help you with creating flashcards, setting reminders, organizing content, and tracking your progress. What would you like to know more about?',
                    suggestions: ['Create flashcard', 'Set reminder', 'Organize content', 'View progress']
                };
            },

            async executeAction(action) {
                switch (action) {
                    case 'SUGGEST_FLASHCARDS':
                        document.getElementById('createFlashcardBtn')?.click();
                        break;
                    case 'SHOW_REMINDER_DIALOG':
                        // Show reminder dialog
                        break;
                    case 'SHOW_TAG_SUGGESTIONS':
                        // Show tag suggestions
                        break;
                    case 'SHOW_PROGRESS':
                        // Show progress stats
                        break;
                }
            },

            getRecentActivitySummary() {
                const recentCards = state.flashcards
                    .filter(card => card.lastStudied)
                    .sort((a, b) => new Date(b.lastStudied) - new Date(a.lastStudied))
                    .slice(0, 3);

                if (recentCards.length === 0) {
                    return 'No recent activity';
                }

                return `Last studied ${recentCards.length} cards`;
            },

            showTypingIndicator() {
                const messages = document.getElementById('aiChatMessages');
                if (messages) {
                    const indicator = document.createElement('div');
                    indicator.className = 'ai-message ai-typing';
                    indicator.innerHTML = '<div class="typing-indicator"><span></span><span></span><span></span></div>';
                    messages.appendChild(indicator);
                    messages.scrollTop = messages.scrollHeight;
                }
            },

            hideTypingIndicator() {
                const indicator = document.querySelector('.ai-typing');
                if (indicator) {
                    indicator.remove();
                }
            },

            addErrorMessage() {
                this.messageHistory.push({
                    role: 'assistant',
                    content: 'I apologize, but I encountered an error. Please try again or rephrase your question.',
                    timestamp: new Date(),
                    isError: true
                });
                this.render();
            },

            render() {
                const messages = document.getElementById('aiChatMessages');
                if (!messages) return;

                messages.innerHTML = this.messageHistory.map(msg => `
                    <div class="ai-message ${msg.role === 'user' ? 'ai-user' : 'ai-response'} ${msg.isError ? 'ai-error' : ''}">
                        <div class="message-content">${this.formatMessage(msg.content)}</div>
                        ${msg.suggestions ? this.renderSuggestions(msg.suggestions) : ''}
                        <div class="message-time">${new Date(msg.timestamp).toLocaleTimeString()}</div>
                    </div>
                `).join('');

                messages.scrollTop = messages.scrollHeight;
            },

            formatMessage(content) {
                return content.replace(/\n/g, '<br>').replace(/•/g, '&bull;');
            },

            renderSuggestions(suggestions) {
                return `
                    <div class="suggestion-chips">
                        ${suggestions.map(suggestion => `
                            <button class="suggestion-chip" onclick="aiAssistant.sendMessage('${suggestion}')">${suggestion}</button>
                        `).join('')}
                    </div>
                `;
            }
        };

        // Initialize enhanced systems
        document.addEventListener('DOMContentLoaded', () => {
            initApp();
            flashcardSystem.init();
            reminderSystem.init();
            aiAssistant.init();
            reminderSystem.requestNotificationPermission();
        });

        // Update the initialization
        document.addEventListener('DOMContentLoaded', () => {
            try {
                // Initialize main app
                initApp();
                
                // Initialize reminder system
                if (typeof reminderSystem !== 'undefined') {
                    reminderSystem.init();
                    
                    // Add click handler for reminder navigation
                    const reminderLink = document.querySelector('a[data-section="reminders"]');
                    if (reminderLink) {
                        reminderLink.addEventListener('click', (e) => {
                            e.preventDefault();
                            reminderSystem.showRemindersListModal();
                        });
                    }
                    
                    // Add click handler for new reminder button
                    const addReminderBtn = document.getElementById('addNewReminder');
                    if (addReminderBtn) {
                        addReminderBtn.addEventListener('click', () => {
                            reminderSystem.showReminderModal();
                        });
                    }
                    
                    // Set up initial reminder count
                    reminderSystem.updateReminderCount();
                }
            } catch (error) {
                console.error('Error during initialization:', error);
            }
        });

        // Add these systems right after the reminderSystem definition
        const notesSystem = {
            notes: [],
            currentNote: null,

            init() {
                try {
                    this.notes = state.notes || [];
                    this.setupEventListeners();
                    this.renderNotes();
                    console.log('Notes system initialized successfully');
                } catch (error) {
                    console.error('Error initializing notes system:', error);
                    showToast('Error initializing notes system', 'error');
                }
            },

            setupEventListeners() {
                // Add note button
                document.getElementById('addNoteBtn')?.addEventListener('click', () => {
                    this.showNoteModal();
                });

                // Save note button
                document.getElementById('saveNoteBtn')?.addEventListener('click', () => {
                    this.saveNote();
                });

                // Close note modal
                document.getElementById('closeNoteModal')?.addEventListener('click', () => {
                    this.hideNoteModal();
                });

                // Note editor formatting buttons
                document.querySelectorAll('.note-format-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const format = btn.dataset.format;
                        this.formatNote(format);
                    });
                });

                // Note search
                document.getElementById('noteSearch')?.addEventListener('input', (e) => {
                    this.searchNotes(e.target.value);
                });
            },

            showNoteModal(noteId = null) {
                const modal = document.getElementById('noteModal');
                if (modal) {
                    modal.style.display = 'block';
                    document.body.style.overflow = 'hidden';

                    if (noteId) {
                        this.currentNote = this.notes.find(n => n.id === noteId);
                        if (this.currentNote) {
                            document.getElementById('noteTitle').value = this.currentNote.title;
                            document.getElementById('noteContent').value = this.currentNote.content;
                            document.getElementById('noteCategory').value = this.currentNote.category;
                        }
                    } else {
                        this.currentNote = null;
                        document.getElementById('noteTitle').value = '';
                        document.getElementById('noteContent').value = '';
                        document.getElementById('noteCategory').value = 'general';
                    }
                }
            },

            hideNoteModal() {
                const modal = document.getElementById('noteModal');
                if (modal) {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            },

            saveNote() {
                try {
                    const title = document.getElementById('noteTitle')?.value.trim();
                    const content = document.getElementById('noteContent')?.value.trim();
                    const category = document.getElementById('noteCategory')?.value;

                    if (!title || !content) {
                        showToast('Please fill in both title and content', 'error');
                        return;
                    }

                    if (this.currentNote) {
                        // Update existing note
                        Object.assign(this.currentNote, {
                            title,
                            content,
                            category,
                            updated: new Date()
                        });
                    } else {
                        // Create new note
                        const newNote = {
                            id: Date.now(),
                            title,
                            content,
                            category,
                            created: new Date(),
                            updated: new Date()
                        };
                        this.notes.push(newNote);
                    }

                    state.notes = this.notes;
                    saveUserData();
                    this.hideNoteModal();
                    this.renderNotes();
                    showToast(this.currentNote ? 'Note updated successfully' : 'Note created successfully');
                } catch (error) {
                    console.error('Error saving note:', error);
                    showToast('Error saving note', 'error');
                }
            },

            deleteNote(noteId) {
                if (confirm('Are you sure you want to delete this note?')) {
                    this.notes = this.notes.filter(n => n.id !== noteId);
                    state.notes = this.notes;
                    saveUserData();
                    this.renderNotes();
                    showToast('Note deleted successfully');
                }
            },

            formatNote(format) {
                const noteContent = document.getElementById('noteContent');
                if (!noteContent) return;

                const start = noteContent.selectionStart;
                const end = noteContent.selectionEnd;
                const text = noteContent.value;
                let formattedText = '';

                switch (format) {
                    case 'bold':
                        formattedText = `**${text.substring(start, end)}**`;
                        break;
                    case 'italic':
                        formattedText = `_${text.substring(start, end)}_`;
                        break;
                    case 'list':
                        formattedText = `\n- ${text.substring(start, end)}`;
                        break;
                    case 'code':
                        formattedText = `\`${text.substring(start, end)}\``;
                        break;
                }

                noteContent.value = text.substring(0, start) + formattedText + text.substring(end);
            },

            searchNotes(query) {
                const notesList = document.getElementById('notesList');
                if (!notesList) return;

                const normalizedQuery = query.toLowerCase();
                this.notes.forEach(note => {
                    const noteElement = document.getElementById(`note-${note.id}`);
                    if (noteElement) {
                        const matches = note.title.toLowerCase().includes(normalizedQuery) ||
                                      note.content.toLowerCase().includes(normalizedQuery);
                        noteElement.style.display = matches ? 'block' : 'none';
                    }
                });
            },

            renderNotes() {
                const notesList = document.getElementById('notesList');
                if (!notesList) return;

                notesList.innerHTML = this.notes.length ? this.notes.map(note => `
                    <div class="note-item" id="note-${note.id}">
                        <div class="note-header">
                            <h4>${note.title}</h4>
                            <span class="note-category">${note.category}</span>
                        </div>
                        <div class="note-preview">${this.formatPreview(note.content)}</div>
                        <div class="note-footer">
                            <span class="note-date">Last updated: ${new Date(note.updated).toLocaleDateString()}</span>
                            <div class="note-actions">
                                <button onclick="notesSystem.showNoteModal(${note.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="notesSystem.deleteNote(${note.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('') : '<div class="empty-state">No notes yet. Click "Add Note" to create one!</div>';
            },

            formatPreview(content) {
                return content
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/_(.*?)_/g, '<em>$1</em>')
                    .replace(/`(.*?)`/g, '<code>$1</code>')
                    .replace(/\n- (.*)/g, '<br>• $1')
                    .substring(0, 200) + (content.length > 200 ? '...' : '');
            }
        };

        const collectionsSystem = {
            collections: [],
            currentCollection: null,

            init() {
                try {
                    this.collections = state.collections || [];
                    this.setupEventListeners();
                    this.renderCollections();
                    console.log('Collections system initialized successfully');
                } catch (error) {
                    console.error('Error initializing collections system:', error);
                    showToast('Error initializing collections system', 'error');
                }
            },

            setupEventListeners() {
                // Add collection button
                document.getElementById('addCollectionBtn')?.addEventListener('click', () => {
                    this.showCollectionModal();
                });

                // Save collection button
                document.getElementById('saveCollectionBtn')?.addEventListener('click', () => {
                    this.saveCollection();
                });

                // Close collection modal
                document.getElementById('closeCollectionModal')?.addEventListener('click', () => {
                    this.hideCollectionModal();
                });

                // Collection search
                document.getElementById('collectionSearch')?.addEventListener('input', (e) => {
                    this.searchCollections(e.target.value);
                });
            },

            showCollectionModal(collectionId = null) {
                const modal = document.getElementById('collectionModal');
                if (modal) {
                    modal.style.display = 'block';
                    document.body.style.overflow = 'hidden';

                    if (collectionId) {
                        this.currentCollection = this.collections.find(c => c.id === collectionId);
                        if (this.currentCollection) {
                            document.getElementById('collectionName').value = this.currentCollection.name;
                            document.getElementById('collectionDescription').value = this.currentCollection.description;
                            this.renderCollectionItems(this.currentCollection.items);
                        }
                    } else {
                        this.currentCollection = null;
                        document.getElementById('collectionName').value = '';
                        document.getElementById('collectionDescription').value = '';
                        this.renderCollectionItems([]);
                    }
                }
            },

            hideCollectionModal() {
                const modal = document.getElementById('collectionModal');
                if (modal) {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            },

            saveCollection() {
                try {
                    const name = document.getElementById('collectionName')?.value.trim();
                    const description = document.getElementById('collectionDescription')?.value.trim();
                    const items = Array.from(document.querySelectorAll('#collectionItems .collection-item'))
                        .map(item => parseInt(item.dataset.id));

                    if (!name) {
                        showToast('Please enter a collection name', 'error');
                        return;
                    }

                    if (this.currentCollection) {
                        // Update existing collection
                        Object.assign(this.currentCollection, {
                            name,
                            description,
                            items,
                            updated: new Date()
                        });
                    } else {
                        // Create new collection
                        const newCollection = {
                            id: Date.now(),
                            name,
                            description,
                            items,
                            created: new Date(),
                            updated: new Date()
                        };
                        this.collections.push(newCollection);
                    }

                    state.collections = this.collections;
                    saveUserData();
                    this.hideCollectionModal();
                    this.renderCollections();
                    showToast(this.currentCollection ? 'Collection updated successfully' : 'Collection created successfully');
                } catch (error) {
                    console.error('Error saving collection:', error);
                    showToast('Error saving collection', 'error');
                }
            },

            deleteCollection(collectionId) {
                if (confirm('Are you sure you want to delete this collection?')) {
                    this.collections = this.collections.filter(c => c.id !== collectionId);
                    state.collections = this.collections;
                    saveUserData();
                    this.renderCollections();
                    showToast('Collection deleted successfully');
                }
            },

            addItemToCollection(itemId) {
                if (!this.currentCollection) return;
                
                if (!this.currentCollection.items.includes(itemId)) {
                    this.currentCollection.items.push(itemId);
                    this.renderCollectionItems(this.currentCollection.items);
                }
            },

            removeItemFromCollection(itemId) {
                if (!this.currentCollection) return;
                
                this.currentCollection.items = this.currentCollection.items.filter(id => id !== itemId);
                this.renderCollectionItems(this.currentCollection.items);
            },

            searchCollections(query) {
                const collectionsList = document.getElementById('collectionsList');
                if (!collectionsList) return;

                const normalizedQuery = query.toLowerCase();
                this.collections.forEach(collection => {
                    const collectionElement = document.getElementById(`collection-${collection.id}`);
                    if (collectionElement) {
                        const matches = collection.name.toLowerCase().includes(normalizedQuery) ||
                                      collection.description.toLowerCase().includes(normalizedQuery);
                        collectionElement.style.display = matches ? 'block' : 'none';
                    }
                });
            },

            renderCollections() {
                const collectionsList = document.getElementById('collectionsList');
                if (!collectionsList) return;

                collectionsList.innerHTML = this.collections.length ? this.collections.map(collection => `
                    <div class="collection-item" id="collection-${collection.id}">
                        <div class="collection-header">
                            <h4>${collection.name}</h4>
                            <span class="collection-count">${collection.items.length} items</span>
                        </div>
                        <div class="collection-description">${collection.description || 'No description'}</div>
                        <div class="collection-footer">
                            <span class="collection-date">Last updated: ${new Date(collection.updated).toLocaleDateString()}</span>
                            <div class="collection-actions">
                                <button onclick="collectionsSystem.showCollectionModal(${collection.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="collectionsSystem.deleteCollection(${collection.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('') : '<div class="empty-state">No collections yet. Click "Add Collection" to create one!</div>';
            },

            renderCollectionItems(items) {
                const itemsList = document.getElementById('collectionItems');
                if (!itemsList) return;

                itemsList.innerHTML = items.map(itemId => {
                    const item = state.contentItems.find(i => i.id === itemId);
                    if (!item) return '';

                    return `
                        <div class="collection-item" data-id="${item.id}">
                            <div class="item-info">
                                <h5>${item.title}</h5>
                                <span class="item-type">${item.type}</span>
                            </div>
                            <button onclick="collectionsSystem.removeItemFromCollection(${item.id})">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    `;
                }).join('');
            }
        };

        // Add initialization to the DOMContentLoaded event
        document.addEventListener('DOMContentLoaded', () => {
            try {
                // Initialize main app and other systems
                initApp();
                reminderSystem.init();
                notesSystem.init();
                collectionsSystem.init();
                expirySystem.init();
                calendarSystem.init();
            } catch (error) {
                console.error('Error during initialization:', error);
            }
        });

        // URL Preview Functionality
        function fetchUrlPreview(url) {
            const previewContainer = document.querySelector('.url-preview-container');
            previewContainer.style.display = 'none';

            if (!url) return;

            // Using a proxy to avoid CORS issues
            fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(url)}`)
                .then(response => response.json())
                .then(data => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(data.contents, 'text/html');
                    
                    const title = doc.querySelector('title')?.textContent || 'No title available';
                    const description = doc.querySelector('meta[name="description"]')?.content || 
                                      doc.querySelector('meta[property="og:description"]')?.content || 
                                      'No description available';
                    const image = doc.querySelector('meta[property="og:image"]')?.content || 
                                doc.querySelector('meta[name="twitter:image"]')?.content || 
                                '';
                    
                    const domain = new URL(url).hostname;

                    const previewHTML = `
                        <div class="url-preview">
                            ${image ? `<img src="${image}" alt="Preview" class="url-preview-image">` : ''}
                            <div class="url-preview-content">
                                <div class="url-preview-title">${title}</div>
                                <div class="url-preview-description">${description}</div>
                                <div class="url-preview-domain">${domain}</div>
                            </div>
                        </div>
                    `;

                    previewContainer.innerHTML = previewHTML;
                    previewContainer.style.display = 'block';
                })
                .catch(error => {
                    console.error('Error fetching URL preview:', error);
                });
        }

        // Add event listener to URL input
        document.addEventListener('DOMContentLoaded', function() {
            const urlInput = document.querySelector('input[type="url"]');
            if (urlInput) {
                urlInput.addEventListener('input', function(e) {
                    fetchUrlPreview(e.target.value);
                });
            }
        });
    </script>

    <!-- Statistics Section -->
    <section class="statistics-section">
        <div class="statistics-container">
            <div class="statistics-header">
                <h2>Platform Statistics</h2>
                <p>See how our community is growing and how much content is being organized and saved every day!</p>
            </div>
            <div class="statistics-grid">
                <div class="statistic-card">
                    <i class="fas fa-users"></i>
                    <h3 id="activeUsers">10</h3>
                    <p>Active Users</p>
                </div>
                <div class="statistic-card">
                    <i class="fas fa-sign-in-alt"></i>
                    <h3 id="totalLogins">20</h3>
                    <p>Total Logins</p>
                </div>
                <div class="statistic-card">
                    <i class="fas fa-save"></i>
                    <h3 id="totalContent">30</h3>
                    <p>Total Content Saved</p>
                </div>
            </div>
        </div>
    </section>
    <script>
        // Animate and update statistics continuously
        function animateValue(id, start, end, duration) {
            const obj = document.getElementById(id);
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.textContent = Math.floor(progress * (end - start) + start);
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                } else {
                    obj.textContent = end;
                }
            };
            window.requestAnimationFrame(step);
        }

        // Initial values
        let stats = {
            activeUsers: 10,
            totalLogins: 20,
            totalContent: 30
        };

        function randomizeStats() {
            // Randomly increment or decrement by 1, but keep above 0
            stats.activeUsers = Math.max(1, stats.activeUsers + (Math.random() > 0.5 ? 1 : -1));
            stats.totalLogins = Math.max(1, stats.totalLogins + (Math.random() > 0.5 ? 1 : -1));
            stats.totalContent = Math.max(1, stats.totalContent + (Math.random() > 0.5 ? 1 : -1));

            animateValue('activeUsers', parseInt(document.getElementById('activeUsers').textContent), stats.activeUsers, 800);
            animateValue('totalLogins', parseInt(document.getElementById('totalLogins').textContent), stats.totalLogins, 800);
            animateValue('totalContent', parseInt(document.getElementById('totalContent').textContent), stats.totalContent, 800);
        }

        setInterval(randomizeStats, 2000); // Update every 2 seconds

        // Content Expiry System
        const expirySystem = {
            init() {
                this.setupEventListeners();
                this.checkContentExpiry();
                setInterval(() => this.checkContentExpiry(), 60000); // Check every minute
            },

            setupEventListeners() {
                // Filter buttons
                document.querySelectorAll('.expiry-filters button').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.expiry-filters button').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.filterExpiryList(btn.dataset.filter);
                    });
                });

                // Add expiry date when adding/editing content
                document.getElementById('addContentBtn')?.addEventListener('click', () => {
                    const form = document.getElementById('addContentModal');
                    if (!form.querySelector('#contentExpiry')) {
                        const expiryField = document.createElement('div');
                        expiryField.className = 'form-group mt-3';
                        expiryField.innerHTML = `
                            <label for="contentExpiry">Review Date</label>
                            <input type="date" class="form-control" id="contentExpiry" 
                                   min="${new Date().toISOString().split('T')[0]}">
                        `;
                        form.querySelector('.modal-body').appendChild(expiryField);
                    }
                });
            },

            checkContentExpiry() {
                const now = new Date();
                state.contentItems.forEach(item => {
                    if (item.expiryDate) {
                        const expiryDate = new Date(item.expiryDate);
                        const daysUntilExpiry = Math.ceil((expiryDate - now) / (1000 * 60 * 60 * 24));
                        
                        if (daysUntilExpiry <= 0 && item.expiryStatus !== 'overdue') {
                            item.expiryStatus = 'overdue';
                            this.notifyExpiry(item);
                        } else if (daysUntilExpiry <= 7 && item.expiryStatus !== 'upcoming') {
                            item.expiryStatus = 'upcoming';
                            this.notifyExpiry(item);
                        }
                    }
                });
                
                this.renderExpiryList();
                saveUserData();
            },

            notifyExpiry(item) {
                const message = item.expiryStatus === 'overdue' 
                    ? `Content "${item.title}" is overdue for review!`
                    : `Content "${item.title}" needs review in ${Math.ceil((new Date(item.expiryDate) - new Date()) / (1000 * 60 * 60 * 24))} days`;
                
                showToast(message, item.expiryStatus === 'overdue' ? 'error' : 'warning');
                
                if ('Notification' in window && Notification.permission === 'granted') {
                    new Notification('Content Review Reminder', {
                        body: message,
                        icon: '/favicon.ico'
                    });
                }
            },

            filterExpiryList(filter) {
                const items = document.querySelectorAll('.expiry-item');
                items.forEach(item => {
                    const status = item.getAttribute('data-status');
                    item.style.display = filter === 'all' || status === filter ? 'flex' : 'none';
                });
            },

            renderExpiryList() {
                const expiryList = document.getElementById('expiryList');
                if (!expiryList) return;

                const itemsWithExpiry = state.contentItems.filter(item => item.expiryDate);
                
                if (itemsWithExpiry.length === 0) {
                    expiryList.innerHTML = '<div class="text-center p-4">No content scheduled for review</div>';
                    return;
                }

                expiryList.innerHTML = itemsWithExpiry.map(item => {
                    const expiryDate = new Date(item.expiryDate);
                    const now = new Date();
                    const daysUntilExpiry = Math.ceil((expiryDate - now) / (1000 * 60 * 60 * 24));
                    
                    let status = item.expiryStatus || 'upcoming';
                    if (item.lastReviewed && new Date(item.lastReviewed) > expiryDate) {
                        status = 'completed';
                    }

                    return `
                        <div class="expiry-item" data-status="${status}">
                            <div class="expiry-info">
                                <div class="expiry-title">${item.title}</div>
                                <div class="expiry-meta">
                                    <span class="expiry-status ${status}">${status}</span>
                                    <span class="mx-2">•</span>
                                    <span>Due: ${expiryDate.toLocaleDateString()}</span>
                                    ${item.lastReviewed ? 
                                        `<span class="mx-2">•</span>
                                         <span>Last reviewed: ${new Date(item.lastReviewed).toLocaleDateString()}</span>` 
                                        : ''}
                                </div>
                            </div>
                            <div class="expiry-actions">
                                <button onclick="expirySystem.markReviewed(${item.id})">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button onclick="expirySystem.updateExpiryDate(${item.id})">
                                    <i class="fas fa-calendar"></i>
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            },

            markReviewed(itemId) {
                const item = state.contentItems.find(i => i.id === itemId);
                if (item) {
                    item.lastReviewed = new Date();
                    item.expiryStatus = 'completed';
                    
                    // Schedule next review
                    const nextReview = new Date();
                    nextReview.setDate(nextReview.getDate() + 30); // Default to 30 days
                    item.expiryDate = nextReview;
                    
                    saveUserData();
                    this.renderExpiryList();
                    showToast('Content marked as reviewed');
                }
            },

            updateExpiryDate(itemId) {
                const item = state.contentItems.find(i => i.id === itemId);
                if (!item) return;

                const newDate = prompt('Enter new review date (YYYY-MM-DD):', 
                    new Date(item.expiryDate || Date.now()).toISOString().split('T')[0]);
                
                if (newDate && !isNaN(new Date(newDate))) {
                    item.expiryDate = new Date(newDate);
                    item.expiryStatus = 'upcoming';
                    saveUserData();
                    this.renderExpiryList();
                    showToast('Review date updated');
                } else if (newDate) {
                    showToast('Invalid date format', 'error');
                }
            }
        };

        // Content Calendar System
        const calendarSystem = {
            currentDate: new Date(),
            plannedContent: {},
            
            init() {
                this.loadPlannedContent();
                this.setupEventListeners();
                this.render();
                
                // Initialize event handlers for planning
                document.addEventListener('click', (e) => {
                    // Handle difficulty level selection
                    if (e.target.closest('.difficulty-level .btn')) {
                        const btn = e.target.closest('.btn');
                        const btns = btn.closest('.difficulty-level').querySelectorAll('.btn');
                        btns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                    }

                    // Handle weekday selection
                    if (e.target.closest('.weekday-selector .btn')) {
                        const btn = e.target.closest('.btn');
                        btn.classList.toggle('active');
                    }

                    // Handle tag selection
                    if (e.target.closest('.selectable-tag')) {
                        const tag = e.target.closest('.selectable-tag');
                        tag.classList.toggle('selected');
                    }

                    // Handle pattern selection
                    if (e.target.closest('.pattern-option input[type="radio"]')) {
                        const radio = e.target.closest('input[type="radio"]');
                        document.querySelectorAll('.pattern-details').forEach(details => {
                            details.style.display = 'none';
                        });
                        radio.closest('.pattern-option').querySelector('.pattern-details').style.display = 'block';
                    }
                });

                // Initialize pattern option displays
                document.querySelectorAll('.pattern-details').forEach(details => {
                    details.style.display = 'none';
                });
            },

            loadPlannedContent() {
                this.plannedContent = JSON.parse(localStorage.getItem('tagzs_planned_content') || '{}');
            },

            savePlannedContent() {
                localStorage.setItem('tagzs_planned_content', JSON.stringify(this.plannedContent));
            },

            setupEventListeners() {
                document.getElementById('planContentBtn')?.addEventListener('click', () => this.showPlanModal());
                document.getElementById('viewMatrixBtn')?.addEventListener('click', () => this.toggleMatrix());
                document.getElementById('prevMonth')?.addEventListener('click', () => this.changeMonth(-1));
                document.getElementById('nextMonth')?.addEventListener('click', () => this.changeMonth(1));
                
                // Calendar day click
                document.getElementById('calendarGrid')?.addEventListener('click', (e) => {
                    const day = e.target.closest('.calendar-day');
                    if (day) {
                        const date = day.getAttribute('data-date');
                        this.showDayDetails(date);
                    }
                });
            },

            changeMonth(delta) {
                this.currentDate.setMonth(this.currentDate.getMonth() + delta);
                this.render();
            },

            toggleMatrix() {
                const matrix = document.getElementById('tagMatrix');
                const calendar = document.getElementById('calendarGrid');
                const btn = document.getElementById('viewMatrixBtn');
                
                if (matrix.style.display === 'none') {
                    matrix.style.display = 'block';
                    calendar.style.display = 'none';
                    btn.innerHTML = '<i class="fas fa-calendar"></i> View Calendar';
                    this.renderMatrix();
                } else {
                    matrix.style.display = 'none';
                    calendar.style.display = 'grid';
                    btn.innerHTML = '<i class="fas fa-th"></i> View Matrix';
                }
            },

            render() {
                this.renderCalendar();
                this.updateMonthDisplay();
            },

            renderCalendar() {
                const grid = document.getElementById('calendarGrid');
                if (!grid) return;

                const year = this.currentDate.getFullYear();
                const month = this.currentDate.getMonth();
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const today = new Date();

                let html = '';
                
                // Add day headers
                ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].forEach(day => {
                    html += `<div class="calendar-day header">${day}</div>`;
                });

                // Add empty cells for days before first of month
                for (let i = 0; i < firstDay.getDay(); i++) {
                    html += '<div class="calendar-day empty"></div>';
                }

                // Add days of month
                for (let day = 1; day <= lastDay.getDate(); day++) {
                    const date = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    const isToday = today.toDateString() === new Date(date).toDateString();
                    const hasContent = this.plannedContent[date]?.length > 0;

                    html += `
                        <div class="calendar-day ${isToday ? 'today' : ''} ${hasContent ? 'has-content' : ''}"
                             data-date="${date}">
                            <div class="date">${day}</div>
                            ${this.renderTagDots(date)}
                        </div>
                    `;
                }

                grid.innerHTML = html;
            },

            renderTagDots(date) {
                const tags = this.plannedContent[date] || [];
                return tags.length ? `
                    <div class="tag-dots">
                        ${tags.slice(0, 3).map(() => '<div class="tag-dot"></div>').join('')}
                        ${tags.length > 3 ? '<div class="tag-dot">...</div>' : ''}
                    </div>
                ` : '';
            },

            renderMatrix() {
                const matrix = document.getElementById('tagMatrix');
                if (!matrix) return;

                const tags = [...new Set(Object.values(this.plannedContent)
                    .flat()
                    .map(plan => plan.tag))];

                const daysInMonth = new Date(
                    this.currentDate.getFullYear(),
                    this.currentDate.getMonth() + 1,
                    0
                ).getDate();

                let html = `
                    <div class="matrix-row">
                        <div class="matrix-tag">Tags</div>
                        <div class="matrix-days">
                            ${Array.from({length: daysInMonth}, (_, i) => `
                                <div class="matrix-day-header">${i + 1}</div>
                            `).join('')}
                        </div>
                    </div>
                `;

                tags.forEach(tag => {
                    html += `
                        <div class="matrix-row">
                            <div class="matrix-tag">${tag}</div>
                            <div class="matrix-days">
                                ${Array.from({length: daysInMonth}, (_, i) => {
                                    const date = `${this.currentDate.getFullYear()}-${String(this.currentDate.getMonth() + 1).padStart(2, '0')}-${String(i + 1).padStart(2, '0')}`;
                                    const isPlanned = (this.plannedContent[date] || []).some(plan => plan.tag === tag);
                                    return `<div class="matrix-day ${isPlanned ? 'planned' : ''}" 
                                                data-date="${date}" 
                                                data-tag="${tag}"
                                                onclick="calendarSystem.toggleTagDay('${date}', '${tag}')"></div>`;
                                }).join('')}
                            </div>
                        </div>
                    `;
                });

                matrix.innerHTML = html;
            },

            updateMonthDisplay() {
                const monthDisplay = document.getElementById('currentMonth');
                if (monthDisplay) {
                    monthDisplay.textContent = this.currentDate.toLocaleString('default', { 
                        month: 'long', 
                        year: 'numeric' 
                    });
                }
            },

            showPlanModal() {
                const modal = document.createElement('div');
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal-container plan-content-modal">
                        <div class="modal-header">
                            <h3>Plan Content</h3>
                            <button class="modal-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Select Tags to Plan</label>
                                <div class="tag-selection">
                                    ${state.tags.map(tag => `
                                        <div class="selectable-tag" data-tag="${tag}">
                                            <span>${tag}</span>
                                            <div class="tag-stats">
                                                ${this.getTagStats(tag)}
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Learning Goals</label>
                                <select id="learningGoal" class="form-control">
                                    <option value="learn">Learn New Content</option>
                                    <option value="review">Review Existing Content</option>
                                    <option value="practice">Practice & Apply</option>
                                    <option value="master">Master the Topic</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Difficulty Level</label>
                                <div class="difficulty-level">
                                    <div class="btn-group w-100">
                                        <button type="button" class="btn btn-outline-primary" data-difficulty="beginner">Beginner</button>
                                        <button type="button" class="btn btn-outline-primary" data-difficulty="intermediate">Intermediate</button>
                                        <button type="button" class="btn btn-outline-primary" data-difficulty="advanced">Advanced</button>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Schedule</label>
                                <div class="date-range-selection mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">Start</span>
                                        <input type="date" id="planStartDate" class="form-control" value="${new Date().toISOString().split('T')[0]}">
                                        <input type="time" id="planStartTime" class="form-control" value="09:00">
                                    </div>
                                    <div class="input-group mt-2">
                                        <span class="input-group-text">End</span>
                                        <input type="date" id="planEndDate" class="form-control" value="${new Date().toISOString().split('T')[0]}">
                                        <input type="time" id="planEndTime" class="form-control" value="17:00">
                                    </div>
                                </div>
                                <div class="schedule-pattern">
                                    <div class="pattern-option">
                                        <input type="radio" name="pattern" value="daily" id="patternDaily" checked>
                                        <label for="patternDaily">Daily</label>
                                        <div class="pattern-details">
                                            <input type="number" class="form-control" id="dailyDuration" 
                                                   placeholder="Minutes per day" value="30" min="5" max="480">
                                        </div>
                                    </div>
                                    <div class="pattern-option">
                                        <input type="radio" name="pattern" value="weekdays" id="patternWeekdays">
                                        <label for="patternWeekdays">Weekdays Only</label>
                                        <div class="pattern-details">
                                            <div class="weekday-selector">
                                                <button type="button" class="btn btn-outline-primary active" data-day="1">M</button>
                                                <button type="button" class="btn btn-outline-primary active" data-day="2">T</button>
                                                <button type="button" class="btn btn-outline-primary active" data-day="3">W</button>
                                                <button type="button" class="btn btn-outline-primary active" data-day="4">T</button>
                                                <button type="button" class="btn btn-outline-primary active" data-day="5">F</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="pattern-option">
                                        <input type="radio" name="pattern" value="custom" id="patternCustom">
                                        <label for="patternCustom">Custom Schedule</label>
                                        <div class="pattern-details">
                                            <textarea class="form-control" id="customSchedule" 
                                                      placeholder="Enter custom schedule notes"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Additional Options</label>
                                <div class="additional-options">
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input" id="setReminders" checked>
                                        <label class="form-check-label" for="setReminders">Set Reminders</label>
                                    </div>
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input" id="createFlashcards" checked>
                                        <label class="form-check-label" for="createFlashcards">Create Flashcards</label>
                                    </div>
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input" id="trackProgress" checked>
                                        <label class="form-check-label" for="trackProgress">Track Progress</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline-secondary" onclick="this.closest('.modal-overlay').remove()">Cancel</button>
                            <button class="btn btn-primary" onclick="calendarSystem.savePlan()">Create Plan</button>
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);

                // Set up event listeners
                modal.querySelector('.modal-close').addEventListener('click', () => modal.remove());

                // Show first pattern details by default
                const firstPattern = modal.querySelector('.pattern-option');
                if (firstPattern) {
                    firstPattern.querySelector('.pattern-details').style.display = 'block';
                }

                // Initialize pattern radio buttons
                modal.querySelectorAll('input[name="pattern"]').forEach(radio => {
                    radio.addEventListener('change', () => {
                        modal.querySelectorAll('.pattern-details').forEach(details => {
                            details.style.display = 'none';
                        });
                        if (radio.checked) {
                            radio.closest('.pattern-option').querySelector('.pattern-details').style.display = 'block';
                        }
                    });
                });

                // Initialize weekday buttons
                modal.querySelectorAll('.weekday-selector .btn').forEach(btn => {
                    btn.addEventListener('click', () => btn.classList.toggle('active'));
                });

                // Initialize difficulty buttons
                modal.querySelectorAll('.difficulty-level .btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        modal.querySelectorAll('.difficulty-level .btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                    });
                });
            },

            savePlan() {
                const selectedTags = Array.from(document.querySelectorAll('.selectable-tag.selected'))
                    .map(tag => tag.getAttribute('data-tag'));
                const startDate = new Date(
                    document.getElementById('planStartDate').value + 'T' +
                    document.getElementById('planStartTime').value
                );
                const endDate = new Date(
                    document.getElementById('planEndDate').value + 'T' +
                    document.getElementById('planEndTime').value
                );
                const pattern = document.querySelector('input[name="pattern"]:checked')?.value;
                const learningGoal = document.getElementById('learningGoal').value;
                const difficulty = document.querySelector('.difficulty-level .btn.active')?.dataset.difficulty;
                const duration = parseInt(document.getElementById('dailyDuration')?.value || '30');
                const selectedWeekdays = Array.from(document.querySelectorAll('.weekday-selector .btn.active'))
                    .map(btn => parseInt(btn.dataset.day));
                const customNotes = document.getElementById('customSchedule')?.value;

                if (!this.validatePlanInputs(selectedTags, startDate, endDate, pattern)) {
                    return;
                }

                // Generate learning plan
                const plan = {
                    tags: selectedTags,
                    startDate,
                    endDate,
                    pattern,
                    learningGoal,
                    difficulty,
                    duration,
                    selectedWeekdays,
                    customNotes,
                    sessions: []
                };

                // Generate sessions based on pattern
                const dates = this.generateDates(startDate, endDate, pattern, selectedWeekdays);
                const availableContent = this.getAvailableContent(selectedTags, difficulty);

                dates.forEach(date => {
                    const session = {
                        date,
                        content: this.getContentForSession(availableContent, learningGoal),
                        duration: duration,
                        completed: false
                    };
                    plan.sessions.push(session);
                });

                // Save plan to calendar
                plan.sessions.forEach(session => {
                    const dateStr = session.date.toISOString().split('T')[0];
                    this.plannedContent[dateStr] = this.plannedContent[dateStr] || [];
                    
                    session.content.forEach(item => {
                        this.plannedContent[dateStr].push({
                            contentId: item.id,
                            tag: item.tags[0],
                            planned: new Date(),
                            completed: false,
                            duration: Math.floor(session.duration / session.content.length),
                            learningGoal,
                            difficulty
                        });
                    });
                });

                // Create reminders if enabled
                if (document.getElementById('setReminders')?.checked) {
                    plan.sessions.forEach(session => {
                        const contentTitles = session.content.map(c => c.title).join(', ');
                        reminderSystem.add(
                            null,
                            session.date,
                            `Learning Session: ${contentTitles} (${session.duration} min)`
                        );
                    });
                }

                // Create flashcards if enabled
                if (document.getElementById('createFlashcards')?.checked) {
                    const uniqueContent = [...new Set(plan.sessions.flatMap(s => s.content))];
                    uniqueContent.forEach(item => {
                        if (item.type === 'article' || item.type === 'video') {
                            flashcardSystem.createFromContent(item.id);
                        }
                    });
                }

                // Save and update UI
                this.savePlannedContent();
                this.render();
                document.querySelector('.modal-overlay')?.remove();
                showToast('Learning plan created successfully');

                // Show plan summary
                this.showPlanSummary(plan);
            },

            validatePlanInputs(tags, start, end, pattern) {
                if (tags.length === 0) {
                    showToast('Please select at least one tag', 'error');
                    return false;
                }

                if (start > end) {
                    showToast('End date must be after start date', 'error');
                    return false;
                }

                if (!pattern) {
                    showToast('Please select a schedule pattern', 'error');
                    return false;
                }

                return true;
            },

            generateDates(start, end, pattern, weekdays) {
                const dates = [];
                const current = new Date(start);

                while (current <= end) {
                    const dayOfWeek = current.getDay();
                    
                    if (pattern === 'daily' ||
                        (pattern === 'weekdays' && weekdays.includes(dayOfWeek)) ||
                        (pattern === 'weekly' && dayOfWeek === 1)) {
                        dates.push(new Date(current));
                    }
                    
                    current.setDate(current.getDate() + 1);
                }

                return dates;
            },

            getAvailableContent(tags, difficulty) {
                return state.contentItems.filter(item => {
                    const tagMatch = tags.some(tag => item.tags.includes(tag));
                    const difficultyMatch = !difficulty || item.difficulty === difficulty;
                    return tagMatch && difficultyMatch;
                });
            },

            getContentForSession(content, goal) {
                const count = Math.ceil(content.length * 0.2); // 20% of available content per session
                switch(goal) {
                    case 'learn':
                        return this.getNewContent(content, count);
                    case 'review':
                        return this.getContentForReview(content, count);
                    case 'practice':
                        return this.getContentForPractice(content, count);
                    case 'master':
                        return this.getMixedContent(content, count);
                    default:
                        return this.getNewContent(content, count);
                }
            },

            getNewContent(content, count) {
                return content.filter(item => !item.lastReviewed).slice(0, count);
            },

            getContentForReview(content, count) {
                return content.filter(item => item.lastReviewed).slice(0, count);
            },

            getContentForPractice(content, count) {
                return content.filter(item => item.type === 'quiz').slice(0, count);
            },

            getMixedContent(content, count) {
                const newContent = this.getNewContent(content, Math.ceil(count * 0.5));
                const reviewContent = this.getContentForReview(content, Math.ceil(count * 0.3));
                const practiceContent = this.getContentForPractice(content, Math.ceil(count * 0.2));
                return [...newContent, ...reviewContent, ...practiceContent].slice(0, count);
            },

            showPlanSummary(plan) {
                const modal = document.createElement('div');
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal-container">
                        <div class="modal-header">
                            <h3>Learning Plan Created</h3>
                            <button class="modal-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="plan-summary">
                                <h4>Plan Overview</h4>
                                <p><strong>Duration:</strong> ${plan.sessions.length} sessions</p>
                                <p><strong>Total Time:</strong> ${plan.sessions.reduce((sum, s) => sum + s.duration, 0)} minutes</p>
                                <p><strong>Focus:</strong> ${plan.learningGoal}</p>
                                <p><strong>Difficulty:</strong> ${plan.difficulty || 'Mixed'}</p>
                                <p><strong>Tags:</strong> ${plan.tags.join(', ')}</p>
                            </div>
                            <div class="plan-schedule">
                                <h4>Schedule</h4>
                                <div class="session-list">
                                    ${plan.sessions.map(session => `
                                        <div class="session-card">
                                            <div class="session-header">
                                                <h5>${session.date.toLocaleDateString()}</h5>
                                                <span class="session-duration">${session.duration} min</span>
                                            </div>
                                            <div class="session-content">
                                                ${session.content.map(item => `
                                                    <div class="content-item">
                                                        <span class="content-title">${item.title}</span>
                                                        <span class="content-type">${item.type}</span>
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            ${plan.customNotes ? `
                                <div class="plan-notes mt-3">
                                    <h4>Additional Notes</h4>
                                    <p>${plan.customNotes}</p>
                                </div>
                            ` : ''}
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline-primary" onclick="calendarSystem.exportPlan(${JSON.stringify(plan)})">
                                Export Plan
                            </button>
                            <button class="btn btn-primary" onclick="this.closest('.modal-overlay').remove()">
                                Close
                            </button>
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);
                modal.querySelector('.modal-close').addEventListener('click', () => modal.remove());
            },

            exportPlan(plan) {
                const csv = [
                    ['Date', 'Time', 'Duration', 'Content', 'Type', 'Tags'].join(','),
                    ...plan.sessions.flatMap(session => 
                        session.content.map(item => [
                            session.date.toLocaleDateString(),
                            session.date.toLocaleTimeString(),
                            Math.floor(session.duration / session.content.length),
                            item.title,
                            item.type,
                            item.tags.join(';')
                        ].join(','))
                    )
                ].join('\n');

                const blob = new Blob([csv], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'learning_plan.csv';
                a.click();
                window.URL.revokeObjectURL(url);
            },

            showDayDetails(date) {
                const plans = this.plannedContent[date] || [];
                if (plans.length === 0) return;

                const modal = document.createElement('div');
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal-container">
                        <div class="modal-header">
                            <h3>Content Plan for ${new Date(date).toLocaleDateString()}</h3>
                            <button class="modal-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            ${plans.map(plan => `
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <div>
                                        <span class="tag">${plan.tag}</span>
                                        ${plan.completed ? 
                                            '<span class="badge bg-success ms-2">Completed</span>' : 
                                            '<span class="badge bg-warning ms-2">Pending</span>'}
                                    </div>
                                    <div>
                                        <button class="btn btn-sm btn-outline-primary me-2" 
                                                onclick="calendarSystem.findContent('${plan.tag}')">
                                            Find Content
                                        </button>
                                        <button class="btn btn-sm ${plan.completed ? 'btn-success' : 'btn-outline-success'}"
                                                onclick="calendarSystem.toggleComplete('${date}', '${plan.tag}')">
                                            ${plan.completed ? 'Completed' : 'Mark Complete'}
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);
                modal.querySelector('.modal-close').addEventListener('click', () => modal.remove());
            },

            findContent(tag) {
                // Filter content grid by tag
                const searchInput = document.getElementById('searchInput');
                if (searchInput) {
                    searchInput.value = tag;
                    searchContent(tag);
                }
            },

            toggleComplete(date, tag) {
                const plan = this.plannedContent[date]?.find(p => p.tag === tag);
                if (plan) {
                    plan.completed = !plan.completed;
                    this.savePlannedContent();
                    this.render();
                    
                    // Refresh day details modal
                    document.querySelector('.modal-overlay')?.remove();
                    this.showDayDetails(date);
                }
            },

            toggleTagDay(date, tag) {
                if (!this.plannedContent[date]) {
                    this.plannedContent[date] = [];
                }

                const existingPlan = this.plannedContent[date].findIndex(p => p.tag === tag);
                if (existingPlan >= 0) {
                    this.plannedContent[date].splice(existingPlan, 1);
                } else {
                    this.plannedContent[date].push({
                        tag,
                        planned: new Date(),
                        completed: false
                    });
                }

                if (this.plannedContent[date].length === 0) {
                    delete this.plannedContent[date];
                }

                this.savePlannedContent();
                this.renderMatrix();
                this.renderCalendar();
            }
        };

        // Initialize calendar system with other systems
        document.addEventListener('DOMContentLoaded', () => {
            try {
                initApp();
                reminderSystem.init();
                notesSystem.init();
                collectionsSystem.init();
                expirySystem.init();
                calendarSystem.init();
            } catch (error) {
                console.error('Error during initialization:', error);
            }
        });
    </script>
</body>
</html>